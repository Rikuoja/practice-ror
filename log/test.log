  [1m[36m (1.6ms)[0m  [1mCREATE TABLE "beer_clubs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "founded" integer, "city" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE TABLE "beers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "style" varchar(255), "brewery_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.0ms)[0m  [1mCREATE TABLE "breweries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "year" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE TABLE "memberships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "beer_club_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.9ms)[0m  [1mCREATE TABLE "ratings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "score" integer, "beer_id" integer, "created_at" datetime, "updated_at" datetime, "user_id" integer) [0m
  [1m[35m (2.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "username" varchar(255), "created_at" datetime, "updated_at" datetime, "password_digest" varchar(255)) 
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35m (0.4ms)[0m  select sqlite_version(*)
  [1m[36m (1.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150124182443')[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150111131426')
  [1m[36m (2.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150111134847')[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150117130414')
  [1m[36m (1.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150124134722')[0m
  [1m[35m (8.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150124163252')
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150124173936')[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150124174027')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:07:09.132792"], ["password_digest", "$2a$04$7JhanUcurv5Rv1IqFUJKaOVQ10QipS74Vfncd03TxEOustOW1Cezi"], ["updated_at", "2015-02-02 13:07:09.132792"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:07:09.148786"], ["password_digest", "$2a$04$rbYsLxlm8p7ByonALVzX7.tzdvJ9Jw.1sgVBlkVAHKScl6UR9f8H6"], ["updated_at", "2015-02-02 13:07:09.148786"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 13:07:09.220619"], ["score", 10], ["updated_at", "2015-02-02 13:07:09.220619"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:07:09.224391"], ["score", 20], ["updated_at", "2015-02-02 13:07:09.224391"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:07:53.772058"], ["password_digest", "$2a$04$HEoXgS5TVYIMoSTn0CpDZe3yEtnCLRXIGDOvTflOmZ5m973yBlDoK"], ["updated_at", "2015-02-02 13:07:53.772058"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:07:53.851915"], ["password_digest", "$2a$04$kNKfk7uKjEdJyaq5TjtMDuGS3qcu2yJOHE7jGPhOmeOWDkONsZBxi"], ["updated_at", "2015-02-02 13:07:53.851915"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 13:07:53.898302"], ["score", 10], ["updated_at", "2015-02-02 13:07:53.898302"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:07:53.901224"], ["score", 20], ["updated_at", "2015-02-02 13:07:53.901224"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:37:24.815576"], ["password_digest", "$2a$04$3O3TYOhp3YBsK.iZLIub8eYAY4ARhTCZIEQhCze0ptSW5UPJqg/4W"], ["updated_at", "2015-02-02 13:37:24.815576"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (12.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:37:24.950593"], ["password_digest", "$2a$04$Kx6.DXS1IEBPOqFpDb8jk.ReiJxHcWE9NVztB9YlwRy6x9qdnlwrK"], ["updated_at", "2015-02-02 13:37:24.950593"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.3ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 13:37:24.985031"], ["score", 10], ["updated_at", "2015-02-02 13:37:24.985031"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:37:24.990477"], ["score", 20], ["updated_at", "2015-02-02 13:37:24.990477"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:46:58.568691"], ["password_digest", "$2a$04$/jbswCXND/kRIdrh/jcpJ.B.gE.7d0eMdJyoi5jWklMIoyM7z2wWu"], ["updated_at", "2015-02-02 13:46:58.568691"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (5.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:46:58.659064"], ["password_digest", "$2a$04$hszeYgOB2wXqa6mte8L/befrTM9dMs5V458iNTDG0NuGh9WlfJKsm"], ["updated_at", "2015-02-02 13:46:58.659064"], ["username", "Pekka"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 13:46:58.706795"], ["score", 10], ["updated_at", "2015-02-02 13:46:58.706795"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:46:58.710107"], ["score", 20], ["updated_at", "2015-02-02 13:46:58.710107"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 13:55:16.308487"], ["name", "Testiolut"], ["updated_at", "2015-02-02 13:55:16.308487"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:55:16.317607"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 13:55:16.317607"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (10.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:55:16.398891"], ["password_digest", "$2a$04$uBqmYk39fmT.v.7tTgLhvOLDwSaUKPKlGnMzP6je/QJUzOzQr2t6e"], ["updated_at", "2015-02-02 13:55:16.398891"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:55:16.457061"], ["password_digest", "$2a$04$Z8FpvGKzpnqvtWbDqjaSTeFmTJcPZFpWgmfQUFIBls8Lzx0n3ENRW"], ["updated_at", "2015-02-02 13:55:16.457061"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 13:55:16.487097"], ["score", 10], ["updated_at", "2015-02-02 13:55:16.487097"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:55:16.498356"], ["score", 20], ["updated_at", "2015-02-02 13:55:16.498356"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:58:31.718263"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 13:58:31.718263"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:58:31.864658"], ["password_digest", "$2a$04$K8HfJPoMENWEJFV6gHRcwuvQ3a9UljXkFnA5M1.vbYxKYdLjSkJD6"], ["updated_at", "2015-02-02 13:58:31.864658"], ["username", "Pekka"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:58:31.912207"], ["password_digest", "$2a$04$5ga7lhyKarvjdf/0qXPvl.OiMnXklark3eEMFDjdi1CJ8RKbr0j4m"], ["updated_at", "2015-02-02 13:58:31.912207"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 13:58:31.951604"], ["score", 10], ["updated_at", "2015-02-02 13:58:31.951604"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 13:58:31.954528"], ["score", 20], ["updated_at", "2015-02-02 13:58:31.954528"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:08:39.614091"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 14:08:39.614091"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (32.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:08:39.797642"], ["password_digest", "$2a$04$3FInilFqpUaFnkwRhZDUAOoW/he/Sk.Xo4agmCsXvgnJ1tmU.C7ke"], ["updated_at", "2015-02-02 14:08:39.797642"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:08:39.807615"], ["password_digest", "$2a$04$TV0kUIuHZsp/p9oaUmfdsuS03EY3/dgeGIADPZer6dmsrFNEs3tMC"], ["updated_at", "2015-02-02 14:08:39.807615"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:08:39.875818"], ["score", 10], ["updated_at", "2015-02-02 14:08:39.875818"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 14:08:39.885223"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:08:39.888654"], ["score", 20], ["updated_at", "2015-02-02 14:08:39.888654"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 14:08:39.890145"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.4ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:08:39.899822"], ["password_digest", "$2a$04$Ex3BSe5uiKU55yfa.FX21u7mbHhY5m3EQWT5t9u8Q0qRdvJwSYML2"], ["updated_at", "2015-02-02 14:08:39.899822"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (16.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (12.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:09:16.534323"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 14:09:16.534323"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (13.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:09:16.712072"], ["password_digest", "$2a$04$sYUht/D0GuvYOQ1NqZxLq.cToCSZGUM9lWEtGcqDfnAuQQZN3FTnK"], ["updated_at", "2015-02-02 14:09:16.712072"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:09:16.733696"], ["password_digest", "$2a$04$t5rjxFenwssvrHz3V7dq/elyvY2yyGvRGd024BN9kUW.IVxpq0pze"], ["updated_at", "2015-02-02 14:09:16.733696"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:09:16.802421"], ["score", 10], ["updated_at", "2015-02-02 14:09:16.802421"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 14:09:16.819955"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:09:16.826981"], ["score", 20], ["updated_at", "2015-02-02 14:09:16.826981"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 14:09:16.828518"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:09:16.850425"], ["password_digest", "$2a$04$2aLs6pw27d7q51WRfkR4wuQpRbE9hkj30Q73mJ1OBRI8OuV4bDDHi"], ["updated_at", "2015-02-02 14:09:16.850425"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:10:07.086830"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 14:10:07.086830"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:10:07.278256"], ["password_digest", "$2a$04$8bwbZV0XPBvA9VL3b/Gg1uxty.EbqJb1GV6tKEyBr1lDH1T199Kuq"], ["updated_at", "2015-02-02 14:10:07.278256"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:10:07.289390"], ["password_digest", "$2a$04$.wc575qFZIW2ppj6yvlPp.QxZgpIm5a3T6hUhPvKetSERkvPXMvqq"], ["updated_at", "2015-02-02 14:10:07.289390"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:10:07.368217"], ["score", 10], ["updated_at", "2015-02-02 14:10:07.368217"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 14:10:07.379286"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:10:07.383124"], ["score", 20], ["updated_at", "2015-02-02 14:10:07.383124"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 14:10:07.384604"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:10:07.471829"], ["password_digest", "$2a$04$IFcCf49v/hB1GzGpYtCCEeIeUbosq70pGHooJZVOrX.qc/tHRhitO"], ["updated_at", "2015-02-02 14:10:07.471829"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:10:07.484247"], ["password_digest", "$2a$04$X3Y05lI9CSFgHTy4g3vqf.1rOJBg4Eh2T5wRn5n/Ah1M1L/aGE3EG"], ["updated_at", "2015-02-02 14:10:07.484247"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:11:02.129969"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 14:11:02.129969"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:11:02.319150"], ["password_digest", "$2a$04$mffvrL1Uu6iaFutOKpYYieck1q2izirzVnH7BS9PLaStxuV9ML4Hi"], ["updated_at", "2015-02-02 14:11:02.319150"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:11:02.329538"], ["password_digest", "$2a$04$SDPiI.PnnoGOFE6izyD0Tezf3esUjkY5rEGUXdFoVtMEiVl/3P3ei"], ["updated_at", "2015-02-02 14:11:02.329538"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:11:02.394881"], ["score", 10], ["updated_at", "2015-02-02 14:11:02.394881"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 14:11:02.404063"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:11:02.415614"], ["score", 20], ["updated_at", "2015-02-02 14:11:02.415614"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 14:11:02.417771"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:11:02.431427"], ["password_digest", "$2a$04$q8OnZipCWShXjRDJpLbCG.hgSnC8eSFjLOp0a/z.YQSF/1DkIeVcG"], ["updated_at", "2015-02-02 14:11:02.431427"], ["username", "Pekka"]]
  [1m[35m (1.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (16.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:11:02.480926"], ["password_digest", "$2a$04$D04yCA5bJlT.NgI54NF6huiKAd6gHHnJDYLRC3bjuYkbuH80zWwF."], ["updated_at", "2015-02-02 14:11:02.480926"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:14:01.570159"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 14:14:01.570159"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:14:01.790533"], ["password_digest", "$2a$04$ugANxhD0MotqavgCZ9jD2e3IUxnn05FIojGl2B9kWZjVrqkPqbVUq"], ["updated_at", "2015-02-02 14:14:01.790533"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.9ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:14:01.806092"], ["password_digest", "$2a$04$C3yj4ZFsyFf5YRkGeMPM.esQ3uPkto3.puzJHx/wavD5nz4eJW9fy"], ["updated_at", "2015-02-02 14:14:01.806092"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:01.858159"], ["score", 10], ["updated_at", "2015-02-02 14:14:01.858159"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 14:14:01.882579"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:01.886786"], ["score", 20], ["updated_at", "2015-02-02 14:14:01.886786"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 14:14:01.888434"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:01.923936"], ["password_digest", "$2a$04$m57SJYkryRg/RbzisCEDXObht34GGfe57XeIJBBQu7j0cB4AUo.Ta"], ["updated_at", "2015-02-02 14:14:01.923936"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:01.973434"], ["password_digest", "$2a$04$0F/La9iamJzRYiT8mTTARe0hLZPXKsBF6lf98AVTIHD/YSIoP9SMi"], ["updated_at", "2015-02-02 14:14:01.973434"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:14:02.014400"], ["name", "anonymous"], ["updated_at", "2015-02-02 14:14:02.014400"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-02 14:14:02.018496"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 14:14:02.018496"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:02.033148"], ["password_digest", "$2a$04$nkUrogM/UukF4c2i2AYhAuW36gXPuJjoCSV6RUWXCzAvjbrw1fqoK"], ["updated_at", "2015-02-02 14:14:02.033148"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-02 14:14:02.039744"], ["score", 10], ["updated_at", "2015-02-02 14:14:02.039744"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:14:50.688181"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 14:14:50.688181"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (2.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:14:50.769463"], ["password_digest", "$2a$04$UWqCjtzoch8bvqO7.ypp3.qv7c.oeoAzZ6mqZuu5NIdDjLNjBNzBG"], ["updated_at", "2015-02-02 14:14:50.769463"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:14:50.778764"], ["password_digest", "$2a$04$YSNYlAztFHm5rgoeU9dv0.hgyeYCpZr.ioioLhobfwdYoZyZM6d02"], ["updated_at", "2015-02-02 14:14:50.778764"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:50.804242"], ["score", 10], ["updated_at", "2015-02-02 14:14:50.804242"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 14:14:50.816670"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:50.831516"], ["score", 20], ["updated_at", "2015-02-02 14:14:50.831516"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 14:14:50.833684"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:50.851702"], ["password_digest", "$2a$04$wy0vaARA1V.FMSb/stqk7.B.HqKgVP7eRV5526/xLgPuI2gP0cqjO"], ["updated_at", "2015-02-02 14:14:50.851702"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:50.862558"], ["password_digest", "$2a$04$VV03TQV.5FN.qnTY6dUYM.0chhbKFYxY54vzfc7hhMWSinXLz3fIC"], ["updated_at", "2015-02-02 14:14:50.862558"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:50.888712"], ["name", "anonymous"], ["updated_at", "2015-02-02 14:14:50.888712"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 14:14:50.895653"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 14:14:50.895653"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:14:50.902496"], ["password_digest", "$2a$04$HvRrb5Lc1AROfZLy9m3U9O7YXxnvhL9BXvkA628XpaUFTBN54vJKe"], ["updated_at", "2015-02-02 14:14:50.902496"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (14.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 14:14:50.906979"], ["score", 10], ["updated_at", "2015-02-02 14:14:50.906979"], ["user_id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."id" ASC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:50.932273"], ["name", "anonymous"], ["updated_at", "2015-02-02 14:14:50.932273"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 14:14:50.934364"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 14:14:50.934364"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:50.936974"], ["name", "anonymous"], ["updated_at", "2015-02-02 14:14:50.936974"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-02 14:14:50.938508"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 14:14:50.938508"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:14:50.940419"], ["name", "anonymous"], ["updated_at", "2015-02-02 14:14:50.940419"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-02 14:14:50.942669"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 14:14:50.942669"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:14:50.953101"], ["password_digest", "$2a$04$Hx8Zt2iZ6qK.B8JBr9rjiO6diuDis9F4tF.NwNc176Fzwm6xuIHK6"], ["updated_at", "2015-02-02 14:14:50.953101"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 14:14:50.955741"], ["score", 10], ["updated_at", "2015-02-02 14:14:50.955741"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-02 14:14:50.964427"], ["score", 25], ["updated_at", "2015-02-02 14:14:50.964427"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-02 14:14:50.966873"], ["score", 9], ["updated_at", "2015-02-02 14:14:50.966873"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."id" ASC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:15:20.241209"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 14:15:20.241209"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:15:20.359803"], ["password_digest", "$2a$04$Pu8RZH3RQbxPaKTy2znYQeu1ABFBQ7hSQt1K8PEcWKjSkDhlumiv2"], ["updated_at", "2015-02-02 14:15:20.359803"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:15:20.369999"], ["password_digest", "$2a$04$mGfthKeCHDBCHrFfksgbOePUp7Kfs1aVwCEBWLVm6N9ui7tm/Lf36"], ["updated_at", "2015-02-02 14:15:20.369999"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:15:20.413762"], ["score", 10], ["updated_at", "2015-02-02 14:15:20.413762"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 14:15:20.421488"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 14:15:20.425141"], ["score", 20], ["updated_at", "2015-02-02 14:15:20.425141"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 14:15:20.427013"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:15:20.437853"], ["password_digest", "$2a$04$Sfxy3XZoMosAm6IK/1yMGuns3ZNh9HXiDGR9Us30hlhlWS9F2eYle"], ["updated_at", "2015-02-02 14:15:20.437853"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:15:20.447545"], ["password_digest", "$2a$04$OvQ79bJydazFIV78SW54J.9tdV30w9mlG1sEGW2LNXCOozFFdUS3u"], ["updated_at", "2015-02-02 14:15:20.447545"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:15:20.487479"], ["name", "anonymous"], ["updated_at", "2015-02-02 14:15:20.487479"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 14:15:20.492174"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 14:15:20.492174"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:15:20.500051"], ["password_digest", "$2a$04$xTBif60bV6omw2LZwnHacOflc3QgnuHVHKBADbDCIzRjWiSv5jqKe"], ["updated_at", "2015-02-02 14:15:20.500051"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 14:15:20.516831"], ["score", 10], ["updated_at", "2015-02-02 14:15:20.516831"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:15:20.524098"], ["name", "anonymous"], ["updated_at", "2015-02-02 14:15:20.524098"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 14:15:20.525944"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 14:15:20.525944"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:15:20.528108"], ["name", "anonymous"], ["updated_at", "2015-02-02 14:15:20.528108"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-02 14:15:20.529513"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 14:15:20.529513"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 14:15:20.531343"], ["name", "anonymous"], ["updated_at", "2015-02-02 14:15:20.531343"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-02 14:15:20.533134"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 14:15:20.533134"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 14:15:20.537798"], ["password_digest", "$2a$04$AHWRR14Hx3GXTzSgkCLuwOKuk07jxHZpuVCylCS8ito6FA3VjBoQW"], ["updated_at", "2015-02-02 14:15:20.537798"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 14:15:20.540010"], ["score", 10], ["updated_at", "2015-02-02 14:15:20.540010"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-02 14:15:20.541828"], ["score", 25], ["updated_at", "2015-02-02 14:15:20.541828"], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-02 14:15:20.543552"], ["score", 9], ["updated_at", "2015-02-02 14:15:20.543552"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:03:43.482924"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 19:03:43.482924"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:03:43.554824"], ["password_digest", "$2a$04$EdVBT7xiurANDCop8RYxAu1EFMqBDxBB7e5H.fSdSCqez9pA7p/cu"], ["updated_at", "2015-02-02 19:03:43.554824"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:03:43.593446"], ["password_digest", "$2a$04$sXWdxEnadjWctA.YzkP9i.G9O92rQK..AHP4avfj1Xmz.qRNUvP/6"], ["updated_at", "2015-02-02 19:03:43.593446"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 19:03:43.633395"], ["score", 10], ["updated_at", "2015-02-02 19:03:43.633395"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 19:03:43.665214"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 19:03:43.669771"], ["score", 20], ["updated_at", "2015-02-02 19:03:43.669771"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 19:03:43.671299"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:03:43.690989"], ["password_digest", "$2a$04$tGNg654A3tCa1uzxxI2onehIgjvTIN6tWBaQvRF8FvRV1lIhoN2O2"], ["updated_at", "2015-02-02 19:03:43.690989"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:03:43.704032"], ["password_digest", "$2a$04$z0rc5MiTmNz2c/8T.ACLs.mdfrBT4mkUpNhh9v.GsOkzCzXquca1S"], ["updated_at", "2015-02-02 19:03:43.704032"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (4.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:03:43.737812"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:03:43.737812"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 19:03:43.742237"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:03:43.742237"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:03:43.754352"], ["password_digest", "$2a$04$B1W7FUj4dh1IEfYqNjs9jOMduviXhwa1hcyPjGklxZaX.VRLwHoWC"], ["updated_at", "2015-02-02 19:03:43.754352"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 19:03:43.758270"], ["score", 10], ["updated_at", "2015-02-02 19:03:43.758270"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:03:43.769855"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:03:43.769855"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 19:03:43.771890"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:03:43.771890"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:03:43.774536"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:03:43.774536"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-02 19:03:43.776140"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:03:43.776140"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:03:43.788652"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:03:43.788652"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-02 19:03:43.790434"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:03:43.790434"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:03:43.795910"], ["password_digest", "$2a$04$XepTEtA/FqmmtM8TpMjIveKCyA/NIkd6p1chpw5pee7iQCmzDX75q"], ["updated_at", "2015-02-02 19:03:43.795910"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 19:03:43.798302"], ["score", 10], ["updated_at", "2015-02-02 19:03:43.798302"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-02 19:03:43.800374"], ["score", 25], ["updated_at", "2015-02-02 19:03:43.800374"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-02 19:03:43.805328"], ["score", 9], ["updated_at", "2015-02-02 19:03:43.805328"], ["user_id", 1]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:09:59.821077"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 19:09:59.821077"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (1.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (7.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:10:00.002402"], ["password_digest", "$2a$04$RhbPQaOw69Ozv8p32brpn.9XqwlhYx.VtLGSNZ4ZrdKxI6B6nsVqa"], ["updated_at", "2015-02-02 19:10:00.002402"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:10:00.012405"], ["password_digest", "$2a$04$JECZDs0OBwl7Ae3At49JhOGD77ltEtHaLOp6uE3HLKDqweN4pwXKC"], ["updated_at", "2015-02-02 19:10:00.012405"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.9ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 19:10:00.058858"], ["score", 10], ["updated_at", "2015-02-02 19:10:00.058858"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 19:10:00.090480"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 19:10:00.099625"], ["score", 20], ["updated_at", "2015-02-02 19:10:00.099625"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 19:10:00.101303"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:10:00.112293"], ["password_digest", "$2a$04$kEq6zgtYGyldC0eM61hFIOVdsAJerfocSPXNyxvEB2GQ7th7HoA3q"], ["updated_at", "2015-02-02 19:10:00.112293"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:10:00.123235"], ["password_digest", "$2a$04$agFCHNdMbkIq68O8.cNK4e9TO5Z0X2dtKvN.97O.WIHEtFvTHwde."], ["updated_at", "2015-02-02 19:10:00.123235"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.8ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:10:00.192954"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:10:00.192954"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 19:10:00.242032"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:10:00.242032"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:10:00.265010"], ["password_digest", "$2a$04$g12jqvs4USxv8WmxjBDr6eQScfRVBVfUYXu2pGooGy8DYOmgmJSNK"], ["updated_at", "2015-02-02 19:10:00.265010"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 19:10:00.272408"], ["score", 10], ["updated_at", "2015-02-02 19:10:00.272408"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:10:00.282433"], ["password_digest", "$2a$04$.QRogn1n58LArJuzxCAHSOZ1jQcQD7erhmlIcWGL2E0b4wgD6Sp/y"], ["updated_at", "2015-02-02 19:10:00.282433"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:10:00.284947"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:10:00.284947"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 19:10:00.298831"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:10:00.298831"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 19:10:00.301535"], ["score", 10], ["updated_at", "2015-02-02 19:10:00.301535"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:10:00.303554"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:10:00.303554"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-02 19:10:00.306008"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:10:00.306008"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-02 19:10:00.308073"], ["score", 25], ["updated_at", "2015-02-02 19:10:00.308073"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:10:00.321103"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:10:00.321103"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-02 19:10:00.323256"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:10:00.323256"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-02 19:10:00.327279"], ["score", 7], ["updated_at", "2015-02-02 19:10:00.327279"], ["user_id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.4ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.7ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:44:10.980853"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 19:44:10.980853"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (3.0ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (2.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:44:11.107875"], ["password_digest", "$2a$04$xugWeZR15LLLd8TRLLSNK.8SLi5a07J1gJSO5ME6gC3vxXu0bMcdy"], ["updated_at", "2015-02-02 19:44:11.107875"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:44:11.184965"], ["password_digest", "$2a$04$t4wgNUk43Wbqb13X0POuqeey1Vs5oLja3jlFxi1BWcwtm5dDVSk1C"], ["updated_at", "2015-02-02 19:44:11.184965"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 19:44:11.238593"], ["score", 10], ["updated_at", "2015-02-02 19:44:11.238593"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 19:44:11.254520"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 19:44:11.258430"], ["score", 20], ["updated_at", "2015-02-02 19:44:11.258430"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 19:44:11.263883"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:44:11.274377"], ["password_digest", "$2a$04$MzHrx62yI7O5Oh5tG0oTJ.clST/.q8uCb76BbFTDVLABazcfSX446"], ["updated_at", "2015-02-02 19:44:11.274377"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:44:11.298075"], ["password_digest", "$2a$04$/Aq6g25LtunALDs3DGO9N.YR4VI8vMykrV//ngzuAf9fKaB6huNQi"], ["updated_at", "2015-02-02 19:44:11.298075"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:44:11.336703"], ["password_digest", "$2a$04$PxUpqiHqRiNSWGHVhkXIluGmLsz5K0/wjwJwJAU3XcrEuHrS6aDem"], ["updated_at", "2015-02-02 19:44:11.336703"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:44:11.353012"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:44:11.353012"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 19:44:11.357700"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:44:11.357700"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 19:44:11.363563"], ["score", 10], ["updated_at", "2015-02-02 19:44:11.363563"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.8ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:44:11.373909"], ["password_digest", "$2a$04$fo5dENLGgPeNSpcBD9Xe3.fxgGmG/.grbvoEj.eUFO/452AUtD0GC"], ["updated_at", "2015-02-02 19:44:11.373909"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:44:11.376448"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:44:11.376448"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 19:44:11.378554"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:44:11.378554"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 19:44:11.382193"], ["score", 10], ["updated_at", "2015-02-02 19:44:11.382193"], ["user_id", 1]]
  [1m[35m (3.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:44:11.388408"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:44:11.388408"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-02 19:44:11.390388"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:44:11.390388"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-02 19:44:11.392578"], ["score", 20], ["updated_at", "2015-02-02 19:44:11.392578"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:44:11.395420"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:44:11.395420"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-02 19:44:11.397702"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:44:11.397702"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-02 19:44:11.400134"], ["score", 15], ["updated_at", "2015-02-02 19:44:11.400134"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:44:11.402235"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:44:11.402235"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-02 19:44:11.403874"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:44:11.403874"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-02 19:44:11.406950"], ["score", 7], ["updated_at", "2015-02-02 19:44:11.406950"], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 19:44:11.422484"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:44:11.422484"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-02 19:44:11.424338"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:44:11.424338"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-02 19:44:11.426537"], ["score", 9], ["updated_at", "2015-02-02 19:44:11.426537"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 19:44:11.428768"], ["name", "anonymous"], ["updated_at", "2015-02-02 19:44:11.428768"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-02 19:44:11.430571"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 19:44:11.430571"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-02 19:44:11.432730"], ["score", 25], ["updated_at", "2015-02-02 19:44:11.432730"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:03.509689"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 20:38:03.509689"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:03.590028"], ["password_digest", "$2a$04$ZSuP0A.KiYOZbbCzz3b6EuqJP75pbVIwFS7E.Pe3Z5WHCaxaeZdI6"], ["updated_at", "2015-02-02 20:38:03.590028"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (13.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:03.639104"], ["password_digest", "$2a$04$OwasmoJC.zSO0fQLPJTtD.lUoLRhHS8lIV.DHmfljzOqR9vHhdXSi"], ["updated_at", "2015-02-02 20:38:03.639104"], ["username", "Pekka"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:03.728741"], ["score", 10], ["updated_at", "2015-02-02 20:38:03.728741"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 20:38:03.742804"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:03.747412"], ["score", 20], ["updated_at", "2015-02-02 20:38:03.747412"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 20:38:03.750708"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:03.763942"], ["password_digest", "$2a$04$End1.Pcj70yyhQyhQbIkXOcCGYJ26DtlNXECfB452Shxmq2oz1rV6"], ["updated_at", "2015-02-02 20:38:03.763942"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:03.782915"], ["password_digest", "$2a$04$Ma7Ml.EN0pPgNABZ0MlwN.W8zhh2kcABX5qkMpygcLoy8OAp7O4lm"], ["updated_at", "2015-02-02 20:38:03.782915"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:03.840559"], ["password_digest", "$2a$04$fjy.oSofDNOyxEJI6rIh8uE/59sLR8xIK4BkhN1CoiZ67kfaI.6eS"], ["updated_at", "2015-02-02 20:38:03.840559"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:03.858175"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:03.858175"], ["year", 1900]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 20:38:03.862815"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:03.862815"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 20:38:03.866524"], ["score", 10], ["updated_at", "2015-02-02 20:38:03.866524"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (1.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:03.911037"], ["password_digest", "$2a$04$OacBvAnx96KuwzuWGGXB6.wrOS1oYeQsKNd5L9WdumSPVZcFoQg5y"], ["updated_at", "2015-02-02 20:38:03.911037"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:03.913493"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:03.913493"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 20:38:03.915462"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:03.915462"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 20:38:03.925897"], ["score", 10], ["updated_at", "2015-02-02 20:38:03.925897"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:03.928756"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:03.928756"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-02 20:38:03.930591"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:03.930591"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-02 20:38:03.932658"], ["score", 20], ["updated_at", "2015-02-02 20:38:03.932658"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:03.934930"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:03.934930"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-02 20:38:03.936681"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:03.936681"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-02 20:38:03.938734"], ["score", 15], ["updated_at", "2015-02-02 20:38:03.938734"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:03.941005"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:03.941005"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-02 20:38:03.942689"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:03.942689"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-02 20:38:03.944680"], ["score", 7], ["updated_at", "2015-02-02 20:38:03.944680"], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.9ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:03.948677"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:03.948677"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-02 20:38:03.956332"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:03.956332"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-02 20:38:03.959928"], ["score", 9], ["updated_at", "2015-02-02 20:38:03.959928"], ["user_id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:03.963528"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:03.963528"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-02 20:38:03.965449"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:03.965449"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-02 20:38:03.969936"], ["score", 25], ["updated_at", "2015-02-02 20:38:03.969936"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:03.996096"], ["password_digest", "$2a$04$z9M9OnuECIZRZuUus4a7nOFtRxQiuRM7mUZTOvEmblIS3xc9dczTC"], ["updated_at", "2015-02-02 20:38:03.996096"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:04.006329"], ["password_digest", "$2a$04$UEqZJIu7ZfNEe5aLhJY52OOSdh38SiOTyJMUUJcCBXgSd4h9bU/li"], ["updated_at", "2015-02-02 20:38:04.006329"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:04.016065"], ["password_digest", "$2a$04$PwRdw1AkFK3WmdlilNBaI.wUmjOTRC.df/U7kn4XnljB4MuxDtgxy"], ["updated_at", "2015-02-02 20:38:04.016065"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:04.039484"], ["password_digest", "$2a$04$fYDZXWQLDwGj.NVD2Kenv.4f0gTvlf56w/Tl.HUTpi/v5m.wJ3Ba2"], ["updated_at", "2015-02-02 20:38:04.039484"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:42.383218"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 20:38:42.383218"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (13.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:42.594405"], ["password_digest", "$2a$04$ZOVD0OP0VdwUq5201bSs3ezeQ8V9wV/hpR759GyookYHGYfypkuES"], ["updated_at", "2015-02-02 20:38:42.594405"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (45.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:42.695572"], ["password_digest", "$2a$04$Jx5C9B8tCogsP/Ykir9mJ.HcrWTUPKi20cA1KkncS6xmFOyycye0C"], ["updated_at", "2015-02-02 20:38:42.695572"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:42.761883"], ["score", 10], ["updated_at", "2015-02-02 20:38:42.761883"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 20:38:42.779606"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:42.783835"], ["score", 20], ["updated_at", "2015-02-02 20:38:42.783835"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 20:38:42.793885"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (10.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:42.815703"], ["password_digest", "$2a$04$bLPKyJ43Sj9PAItAHReOK.wvNag80DrWG33DpJ8m6yj5GzDY.lKoe"], ["updated_at", "2015-02-02 20:38:42.815703"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:42.840437"], ["password_digest", "$2a$04$LlIYH.1NeYiZn7IMHXhVluLMvjkHELobXQWVHWZQdAZvPcgE087Ta"], ["updated_at", "2015-02-02 20:38:42.840437"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:42.897352"], ["password_digest", "$2a$04$XVwFMu8OxIrf9ABi0X9.jeq9fiycPR1LbObWNQsLqwcUf3412q/oC"], ["updated_at", "2015-02-02 20:38:42.897352"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (7.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:42.923975"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:42.923975"], ["year", 1900]]
  [1m[35m (27.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 20:38:42.966737"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:42.966737"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 20:38:42.971553"], ["score", 10], ["updated_at", "2015-02-02 20:38:42.971553"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.4ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:43.030700"], ["password_digest", "$2a$04$dYlDNwSn8UqpcIpetnmjMOjbdbDH3Tf3iAFWPFKA/AiSxeg9agMi6"], ["updated_at", "2015-02-02 20:38:43.030700"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.033681"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:43.033681"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 20:38:43.036262"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:43.036262"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 20:38:43.039009"], ["score", 10], ["updated_at", "2015-02-02 20:38:43.039009"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:43.041284"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:43.041284"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-02 20:38:43.043284"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:43.043284"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-02 20:38:43.046034"], ["score", 20], ["updated_at", "2015-02-02 20:38:43.046034"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.048244"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:43.048244"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-02 20:38:43.049835"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:43.049835"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-02 20:38:43.051869"], ["score", 15], ["updated_at", "2015-02-02 20:38:43.051869"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:43.054385"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:43.054385"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-02 20:38:43.055836"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:43.055836"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-02 20:38:43.057698"], ["score", 7], ["updated_at", "2015-02-02 20:38:43.057698"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.059782"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:43.059782"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-02 20:38:43.061906"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:43.061906"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-02 20:38:43.064265"], ["score", 9], ["updated_at", "2015-02-02 20:38:43.064265"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 20:38:43.066620"], ["name", "anonymous"], ["updated_at", "2015-02-02 20:38:43.066620"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-02 20:38:43.068253"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 20:38:43.068253"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-02 20:38:43.070579"], ["score", 25], ["updated_at", "2015-02-02 20:38:43.070579"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.5ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.099318"], ["password_digest", "$2a$04$jGUQkMZazgpb/ivI6ioOyu79LQje6fP760Ofss37ur4FK9icbdYRm"], ["updated_at", "2015-02-02 20:38:43.099318"], ["username", "Pekka"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.116243"], ["password_digest", "$2a$04$ob2Px8cuT/eFhI6bEmZTCu9MZHvjeH.o2D7wQiBF59p8JtTY4xqUa"], ["updated_at", "2015-02-02 20:38:43.116243"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.131615"], ["password_digest", "$2a$04$uzBhLhSnRZag.nVEtFBtsenZZBLbCc87XMD1lzhdYqB4Sq8cute32"], ["updated_at", "2015-02-02 20:38:43.131615"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.138004"], ["password_digest", "$2a$04$1eWi6bZJko17kCOtr8Pn9uuCZ/z4CxvdbSU.0HTrba3ohQ5QjrAW6"], ["updated_at", "2015-02-02 20:38:43.138004"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.172750"], ["password_digest", "$2a$04$uHgpFflpirjYImqiGKMTfOeJNrWLkg98mFvnwxv82d0VACMoJnTpa"], ["updated_at", "2015-02-02 20:38:43.172750"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.180329"], ["password_digest", "$2a$04$M2ihf7G0LvnSM1IGXhyiM.XhGIxzXwSp4iuiOqeX0FsbP4f3rBXqS"], ["updated_at", "2015-02-02 20:38:43.180329"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.196287"], ["password_digest", "$2a$04$AWtU8PmL14mjOQJcqo8VtumkdtCHdAorIi5.SzDRN5ZFDB43Ln0Tq"], ["updated_at", "2015-02-02 20:38:43.196287"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 20:38:43.206093"], ["password_digest", "$2a$04$uKBDfSjKlX9iT8cBWlGgyuTqI8G1CpK2U3NU8hv3UrjUFt9N1hygO"], ["updated_at", "2015-02-02 20:38:43.206093"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-02 23:09:37 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (5.8ms)
Completed 200 OK in 3524ms (Views: 3497.0ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:41.505350"], ["name", "Koff"], ["updated_at", "2015-02-02 21:09:41.505350"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:41.514061"], ["name", "Karjala"], ["updated_at", "2015-02-02 21:09:41.514061"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:41.516834"], ["name", "Schlenkerla"], ["updated_at", "2015-02-02 21:09:41.516834"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-02 23:09:41 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (11.8ms)
Completed 200 OK in 16ms (Views: 14.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:41.561518"], ["name", "Koff"], ["updated_at", "2015-02-02 21:09:41.561518"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:41.565862"], ["name", "Karjala"], ["updated_at", "2015-02-02 21:09:41.565862"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:41.569300"], ["name", "Schlenkerla"], ["updated_at", "2015-02-02 21:09:41.569300"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-02 23:09:41 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-02 23:09:41 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.5ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (70.5ms)
Completed 200 OK in 85ms (Views: 77.2ms | ActiveRecord: 2.4ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:41.777950"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 21:09:41.777950"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (2.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:41.942011"], ["password_digest", "$2a$04$EQuhGQ.RGD/Vq6nFu.tpWOkKaf3swUfc.vgkESm2FqqFXNOiNQ02m"], ["updated_at", "2015-02-02 21:09:41.942011"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:41.954090"], ["password_digest", "$2a$04$5RdQ8HQ73sUEeYtdlEUkD.vgfQIB/OcBGg9jkW0tC1lsHDL3eFGpu"], ["updated_at", "2015-02-02 21:09:41.954090"], ["username", "Pekka"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:41.999376"], ["score", 10], ["updated_at", "2015-02-02 21:09:41.999376"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 21:09:42.017555"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.025625"], ["score", 20], ["updated_at", "2015-02-02 21:09:42.025625"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 21:09:42.028326"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.039301"], ["password_digest", "$2a$04$C30Xw6nlbx7BVGILtdnx8u7g5xTj6dDSJcRbYcYXgjJMB6N6WmXOm"], ["updated_at", "2015-02-02 21:09:42.039301"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.052289"], ["password_digest", "$2a$04$35NWUsWDjnGvYrnbVsv7M.rcN2vNqC0zZPtoSJTLZQOZHQe0mWUu6"], ["updated_at", "2015-02-02 21:09:42.052289"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:42.063795"], ["password_digest", "$2a$04$p6B6c7/QxlK5gBJUQKDIi.RY.B7ZkPLMQ02aoAglVvxBjZSuvKXYK"], ["updated_at", "2015-02-02 21:09:42.063795"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.067444"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:09:42.067444"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 21:09:42.084467"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:09:42.084467"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 21:09:42.088941"], ["score", 10], ["updated_at", "2015-02-02 21:09:42.088941"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:42.098849"], ["password_digest", "$2a$04$G.54Vc5MKrfsMLLbwGHB8OxNWDueuJ.clO4B9cStdGFmNgAYrwzOS"], ["updated_at", "2015-02-02 21:09:42.098849"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.101459"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:09:42.101459"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 21:09:42.104128"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:09:42.104128"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 21:09:42.112863"], ["score", 10], ["updated_at", "2015-02-02 21:09:42.112863"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:42.115789"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:09:42.115789"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-02 21:09:42.117527"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:09:42.117527"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-02 21:09:42.120498"], ["score", 20], ["updated_at", "2015-02-02 21:09:42.120498"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.123014"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:09:42.123014"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-02 21:09:42.124558"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:09:42.124558"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-02 21:09:42.126716"], ["score", 15], ["updated_at", "2015-02-02 21:09:42.126716"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:42.128702"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:09:42.128702"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-02 21:09:42.130274"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:09:42.130274"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-02 21:09:42.132635"], ["score", 7], ["updated_at", "2015-02-02 21:09:42.132635"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.134740"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:09:42.134740"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-02 21:09:42.136201"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:09:42.136201"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-02 21:09:42.138818"], ["score", 9], ["updated_at", "2015-02-02 21:09:42.138818"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:09:42.141167"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:09:42.141167"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-02 21:09:42.142987"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:09:42.142987"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-02 21:09:42.146307"], ["score", 25], ["updated_at", "2015-02-02 21:09:42.146307"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.176820"], ["password_digest", "$2a$04$olg0N537TvjMo8ypTf9M/es6NN903gSox88Z5nA89CmvU64vDcsha"], ["updated_at", "2015-02-02 21:09:42.176820"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.185452"], ["password_digest", "$2a$04$mSWxXPuvGPJ7fg3fDsMpgewyICIcGn/o1gsUCwA5kH4q3MTMKRsWm"], ["updated_at", "2015-02-02 21:09:42.185452"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.196012"], ["password_digest", "$2a$04$hZIr6iqJ/YfxY3X3O1xO9uywb9cwqzrIUHfxhmYqSwSxI2CDAHEFO"], ["updated_at", "2015-02-02 21:09:42.196012"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.203346"], ["password_digest", "$2a$04$bBFZtYUzo7EiLEb79bkOFu8OYA3Bvfx.IHYlGw66b0kx1pMCX7MQa"], ["updated_at", "2015-02-02 21:09:42.203346"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.219863"], ["password_digest", "$2a$04$PL4cZxbCQeaQsNtwSfLu3.MUjlFa5XOp9/cwjD7k0lhHlwfZRt4wK"], ["updated_at", "2015-02-02 21:09:42.219863"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.244104"], ["password_digest", "$2a$04$ak1O2htilTgMmfaRmlncA.qXfZKKgnPMi.XOOnIcqCm7qll128N7e"], ["updated_at", "2015-02-02 21:09:42.244104"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.254376"], ["password_digest", "$2a$04$R5I5xGvz.4ZoqevniOt/eOCl6YRgCq.Mga4VJONi.VwaNvwQv9FPa"], ["updated_at", "2015-02-02 21:09:42.254376"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:09:42.263269"], ["password_digest", "$2a$04$dz6GHltyEwlMwXCfTOR/T.6qk6Ea6UJ9BLEY9Oz5JECEXXC9ZcPva"], ["updated_at", "2015-02-02 21:09:42.263269"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-02 23:11:04 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 106ms (Views: 78.5ms | ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:04.727074"], ["name", "Koff"], ["updated_at", "2015-02-02 21:11:04.727074"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:04.733728"], ["name", "Karjala"], ["updated_at", "2015-02-02 21:11:04.733728"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:04.735814"], ["name", "Schlenkerla"], ["updated_at", "2015-02-02 21:11:04.735814"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-02 23:11:04 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (4.7ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:04.799051"], ["name", "Koff"], ["updated_at", "2015-02-02 21:11:04.799051"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:04.801502"], ["name", "Karjala"], ["updated_at", "2015-02-02 21:11:04.801502"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:04.808102"], ["name", "Schlenkerla"], ["updated_at", "2015-02-02 21:11:04.808102"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-02 23:11:04 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-02 23:11:04 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.5ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (133.6ms)
Completed 200 OK in 170ms (Views: 164.7ms | ActiveRecord: 2.7ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:05.066970"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-02 21:11:05.066970"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:05.144772"], ["password_digest", "$2a$04$hDbxj0kzLQiyau0eFujFN.pLiix6Ea4dDGdD8YH6yXzC0IOSvhpHi"], ["updated_at", "2015-02-02 21:11:05.144772"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:05.156828"], ["password_digest", "$2a$04$JRyIkWrir5zG9uVLwMf0xe/FaiTLuD5AA8QSqCyxOCybJ13ftgryq"], ["updated_at", "2015-02-02 21:11:05.156828"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.167698"], ["score", 10], ["updated_at", "2015-02-02 21:11:05.167698"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-02 21:11:05.176704"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.182136"], ["score", 20], ["updated_at", "2015-02-02 21:11:05.182136"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-02 21:11:05.184461"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.208963"], ["password_digest", "$2a$04$OkRMn.4erwOKV0rZBIel.uOQWDbTJ4o12rBrambzzpUMiYcSLHx9y"], ["updated_at", "2015-02-02 21:11:05.208963"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.216748"], ["password_digest", "$2a$04$QpMKde.ZBOaNLm1JUPnUMuqsAkdpxEqT8PyZVE39Qpg21DE8ya2xm"], ["updated_at", "2015-02-02 21:11:05.216748"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (7.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:05.234189"], ["password_digest", "$2a$04$p98voAttx95o.oWxVF38NO3mkLrL.gWngYUeh77upxb70UZfjurqK"], ["updated_at", "2015-02-02 21:11:05.234189"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.239353"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:11:05.239353"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 21:11:05.243149"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:11:05.243149"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 21:11:05.247183"], ["score", 10], ["updated_at", "2015-02-02 21:11:05.247183"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:05.256924"], ["password_digest", "$2a$04$wVapcOeB9MYwdcDcjzThQ.4Xw.fgBbM3xSrtt4pWWv87c14c2SNve"], ["updated_at", "2015-02-02 21:11:05.256924"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.259284"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:11:05.259284"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-02 21:11:05.269931"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:11:05.269931"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-02 21:11:05.275419"], ["score", 10], ["updated_at", "2015-02-02 21:11:05.275419"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:05.278026"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:11:05.278026"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-02 21:11:05.280062"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:11:05.280062"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-02 21:11:05.282404"], ["score", 20], ["updated_at", "2015-02-02 21:11:05.282404"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.284642"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:11:05.284642"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-02 21:11:05.286453"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:11:05.286453"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-02 21:11:05.288661"], ["score", 15], ["updated_at", "2015-02-02 21:11:05.288661"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:05.290734"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:11:05.290734"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-02 21:11:05.292246"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:11:05.292246"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-02 21:11:05.294151"], ["score", 7], ["updated_at", "2015-02-02 21:11:05.294151"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.296063"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:11:05.296063"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-02 21:11:05.297778"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:11:05.297778"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-02 21:11:05.299699"], ["score", 9], ["updated_at", "2015-02-02 21:11:05.299699"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-02 21:11:05.301755"], ["name", "anonymous"], ["updated_at", "2015-02-02 21:11:05.301755"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-02 21:11:05.311022"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-02 21:11:05.311022"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-02 21:11:05.314020"], ["score", 25], ["updated_at", "2015-02-02 21:11:05.314020"], ["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (4.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.328980"], ["password_digest", "$2a$04$XSS5K4gYFmuqyq.Otte9YOhSSloXBoJbQNAj8faXnGuUlTXyontfO"], ["updated_at", "2015-02-02 21:11:05.328980"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.337179"], ["password_digest", "$2a$04$O0cygaaBgNWHFiJO7pHKXedffEgqCSfJPpgEoGjJT1LtleQLeWoQ2"], ["updated_at", "2015-02-02 21:11:05.337179"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.346534"], ["password_digest", "$2a$04$hPRZNqDt5uZgjU4B2Z2dyutfL9LpAaqsC2qW/c9k/O4jEW9FRtdUK"], ["updated_at", "2015-02-02 21:11:05.346534"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.358110"], ["password_digest", "$2a$04$sDrrfAqjVOiPlhKEjos9juOJjjqRaxhbI5MHxI4lG8BW5Ptca8uDm"], ["updated_at", "2015-02-02 21:11:05.358110"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.393186"], ["password_digest", "$2a$04$CkejtIYY74d0sgacIhKqX.UML9qQQeKlT7K7IuoUBT0A/phUEeP1m"], ["updated_at", "2015-02-02 21:11:05.393186"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.416286"], ["password_digest", "$2a$04$VUuTj3jGwfNnMQvs9unwLevN5kV9QGY74VNvtz1XfDHDFNipiwOoi"], ["updated_at", "2015-02-02 21:11:05.416286"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.429355"], ["password_digest", "$2a$04$krtT.HAJpal74SUxl46z3ubMiEObWytI55NPher41ABramvT44qOO"], ["updated_at", "2015-02-02 21:11:05.429355"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-02 21:11:05.438005"], ["password_digest", "$2a$04$fYXmlnBzRGktIlewYzsmUu3q9Z1UxzsYlP8/8m17pRhFPetY1.oFy"], ["updated_at", "2015-02-02 21:11:05.438005"], ["username", "Pekka"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 12:35:51 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 101ms (Views: 74.7ms | ActiveRecord: 1.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:51.632406"], ["name", "Koff"], ["updated_at", "2015-02-03 10:35:51.632406"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:51.639457"], ["name", "Karjala"], ["updated_at", "2015-02-03 10:35:51.639457"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:51.641391"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 10:35:51.641391"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 12:35:51 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (8.4ms)
Completed 200 OK in 46ms (Views: 44.8ms | ActiveRecord: 0.3ms)
  [1m[35m (3.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:51.812981"], ["name", "Koff"], ["updated_at", "2015-02-03 10:35:51.812981"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:51.816584"], ["name", "Karjala"], ["updated_at", "2015-02-03 10:35:51.816584"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:51.819352"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 10:35:51.819352"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 12:35:51 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 12:35:51 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.3ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.5ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (52.0ms)
Completed 200 OK in 66ms (Views: 60.4ms | ActiveRecord: 2.1ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:51.963080"], ["password_digest", "$2a$04$YxRYpWIWSZv0CaTUGT8a2.bhLKigXYMHbMcM.2YBr.QZRYivs5zGq"], ["updated_at", "2015-02-03 10:35:51.963080"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 12:35:51 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.8ms)
Completed 200 OK in 18ms (Views: 17.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 12:35:52 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 12:35:52 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.5ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (29.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 45ms (Views: 42.1ms | ActiveRecord: 1.6ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:52.096500"], ["password_digest", "$2a$04$a0w84sZdnslTD3VP1WoMlejTz5DZbDNVE9UsUUBIuDufz2Tla6JWS"], ["updated_at", "2015-02-03 10:35:52.096500"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 12:35:52 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 12:35:52 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 12:35:52 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:52.192671"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 10:35:52.192671"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:52.238168"], ["password_digest", "$2a$04$tVSpzlBEM2K1Cdu6XB6siegDXccl.Y8JYseGHNPnbWRx8BOmbRdV2"], ["updated_at", "2015-02-03 10:35:52.238168"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:52.246948"], ["password_digest", "$2a$04$cLnQFNq3yXGtOdUicW9WNuIelRT.0KpHFf3KGTJP2yELjFwowMDVy"], ["updated_at", "2015-02-03 10:35:52.246948"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.265880"], ["score", 10], ["updated_at", "2015-02-03 10:35:52.265880"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 10:35:52.273962"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.277313"], ["score", 20], ["updated_at", "2015-02-03 10:35:52.277313"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 10:35:52.279231"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.320982"], ["password_digest", "$2a$04$GK29X2ZMPYMVucgNrWXHkepZxFzGKl23NhRvTcUkU3hzpiF6WCERm"], ["updated_at", "2015-02-03 10:35:52.320982"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.350909"], ["password_digest", "$2a$04$JB0VQ49HEPGW3iUAG99bXO/WS2f6uFP/KGfQjnaugsQ5gOpnEZaR2"], ["updated_at", "2015-02-03 10:35:52.350909"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:52.358887"], ["password_digest", "$2a$04$A5DO0B/HFpZ73IJWL6Rg/u498Rhg.VV1alWRsEHip/rF/i.knau9i"], ["updated_at", "2015-02-03 10:35:52.358887"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.363659"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:35:52.363659"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (11.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 10:35:52.400746"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:35:52.400746"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 10:35:52.405717"], ["score", 10], ["updated_at", "2015-02-03 10:35:52.405717"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.7ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:52.426205"], ["password_digest", "$2a$04$qP4k/SqVnk6OVGIvLLCq9O5.tCr4IAskdLizAGwHYwsV6LhbXXG8."], ["updated_at", "2015-02-03 10:35:52.426205"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.429195"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:35:52.429195"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 10:35:52.436888"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:35:52.436888"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 10:35:52.440303"], ["score", 10], ["updated_at", "2015-02-03 10:35:52.440303"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:52.442778"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:35:52.442778"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 10:35:52.444510"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:35:52.444510"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 10:35:52.446902"], ["score", 20], ["updated_at", "2015-02-03 10:35:52.446902"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.449561"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:35:52.449561"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 10:35:52.452249"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:35:52.452249"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 10:35:52.470258"], ["score", 15], ["updated_at", "2015-02-03 10:35:52.470258"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:52.483943"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:35:52.483943"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 10:35:52.485871"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:35:52.485871"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 10:35:52.488380"], ["score", 7], ["updated_at", "2015-02-03 10:35:52.488380"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.490988"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:35:52.490988"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 10:35:52.493144"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:35:52.493144"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 10:35:52.495337"], ["score", 9], ["updated_at", "2015-02-03 10:35:52.495337"], ["user_id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:35:52.506026"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:35:52.506026"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 10:35:52.508348"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:35:52.508348"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.8ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 10:35:52.511591"], ["score", 25], ["updated_at", "2015-02-03 10:35:52.511591"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.524897"], ["password_digest", "$2a$04$9qehAqcam0y68P9xTfMrce3/WIJd.PWlZsNkg8QrMdUxj3bLIXdFC"], ["updated_at", "2015-02-03 10:35:52.524897"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.543924"], ["password_digest", "$2a$04$3TCwlLA/mXBWADZau2jqSOmAgmWP7XrFvmDbQgOH.2JFdDVNCCsQ."], ["updated_at", "2015-02-03 10:35:52.543924"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.552253"], ["password_digest", "$2a$04$N6frZwlLBEXETSupNqGz4eGJ3njLOOnhpFd/emv/grnXA.mQb4LGK"], ["updated_at", "2015-02-03 10:35:52.552253"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.587143"], ["password_digest", "$2a$04$HO2ROiiSsqLBslOTG2icoOj60j.sR8eA/gu1rgNDsJ/lfYaRJ3ohi"], ["updated_at", "2015-02-03 10:35:52.587143"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.609444"], ["password_digest", "$2a$04$Li9SW.E55J3DR/ZunrOmxe6YLguCAKjRE1Q.i6XOC5nRD0zEvT0/i"], ["updated_at", "2015-02-03 10:35:52.609444"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (4.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.623724"], ["password_digest", "$2a$04$Yj9B9wX7B5StzxwJb5dUt.efLnwJL97K2Ej1QOlap89x0ExwFInAa"], ["updated_at", "2015-02-03 10:35:52.623724"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.632916"], ["password_digest", "$2a$04$3Kuu8Za6OndcnGMFbgAs.Oez4IM9fWN82kQAbzEMPbptuVP7HLBLO"], ["updated_at", "2015-02-03 10:35:52.632916"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (8.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:35:52.656952"], ["password_digest", "$2a$04$F.O.xttVD7WPqc4Dhbk72ubNxUDBzxPMwGS2HAUsO3.t8/H5yaW3O"], ["updated_at", "2015-02-03 10:35:52.656952"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 12:55:29 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 96ms (Views: 69.6ms | ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:30.044760"], ["name", "Koff"], ["updated_at", "2015-02-03 10:55:30.044760"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:30.051739"], ["name", "Karjala"], ["updated_at", "2015-02-03 10:55:30.051739"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:30.056564"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 10:55:30.056564"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (30.7ms)
Completed 200 OK in 33ms (Views: 32.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:30.128695"], ["name", "Koff"], ["updated_at", "2015-02-03 10:55:30.128695"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:30.133069"], ["name", "Karjala"], ["updated_at", "2015-02-03 10:55:30.133069"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:30.135864"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 10:55:30.135864"], ["year", 1899]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.3ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.3ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.8ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (73.4ms)
Completed 200 OK in 113ms (Views: 104.1ms | ActiveRecord: 3.8ms)
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:30.301113"], ["name", "Koff"], ["updated_at", "2015-02-03 10:55:30.301113"], ["year", 1900]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 10:55:30.349221"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 10:55:30.349221"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 10:55:30.352830"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 10:55:30.352830"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:30.368118"], ["password_digest", "$2a$04$zRl9RVmLoIo9TUF225Z5Qu4P0MS1708.1LjMvrc31N3tVSDwxJ6hq"], ["updated_at", "2015-02-03 10:55:30.368118"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 13ms (Views: 13.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (31.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 48ms (Views: 44.8ms | ActiveRecord: 1.6ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (32.2ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 47ms (Views: 45.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 10:55:30.569462"], ["score", 15], ["updated_at", "2015-02-03 10:55:30.569462"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 10:55:30.574858"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.7ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (11.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 16ms (Views: 13.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:30.612244"], ["password_digest", "$2a$04$g/ob6R8nfFpiU2iu94YFwOX3SyhYII6d2E9TNuKWgs96xAaHMlDYW"], ["updated_at", "2015-02-03 10:55:30.612244"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 9.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:30.671534"], ["password_digest", "$2a$04$ZS251hlxighbA4RYZ.VuPu184U5hsKFsfOCEuDtBrdpNMkBOug7Va"], ["updated_at", "2015-02-03 10:55:30.671534"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:30.753506"], ["password_digest", "$2a$04$krmd17Zdjvr/KVlJDQsuyuY1aOOh0fDPp4Vu61mO1J4kPlWN.IjF6"], ["updated_at", "2015-02-03 10:55:30.753506"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (8.6ms)
  Rendered users/new.html.erb within layouts/application (19.5ms)
Completed 200 OK in 40ms (Views: 39.4ms | ActiveRecord: 0.0ms)
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:30.839393"], ["password_digest", "$2a$04$kUKvnzHEkbUER.sjh1FBB.8Z83qa3XDcH2bJGXhRbqSGjamgj61ZK"], ["updated_at", "2015-02-03 10:55:30.839393"], ["username", "Brian"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 14ms (ActiveRecord: 0.9ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 12:55:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (5.9ms)
Completed 200 OK in 13ms (Views: 10.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:30.881756"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 10:55:30.881756"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (2.7ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:30.953037"], ["password_digest", "$2a$04$.Js6ZlFWb/2NMFTWbU1wtum.yft9.1XWy7jPsFhXPldhgpzLkdXPW"], ["updated_at", "2015-02-03 10:55:30.953037"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (6.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:30.963038"], ["password_digest", "$2a$04$qZqkvCJOFemoMYef9uIaPev5pFf6k156RSDrq7HNG31b09KN1XFL2"], ["updated_at", "2015-02-03 10:55:30.963038"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:30.973086"], ["score", 10], ["updated_at", "2015-02-03 10:55:30.973086"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 10:55:30.976934"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:30.979089"], ["score", 20], ["updated_at", "2015-02-03 10:55:30.979089"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (6.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 10:55:30.987484"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:30.998993"], ["password_digest", "$2a$04$p8C1QDRH5de4q3mUL/o9RuDVxtSddqmz3CclwR4qnRAd5ZRtrzJPa"], ["updated_at", "2015-02-03 10:55:30.998993"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.017776"], ["password_digest", "$2a$04$jMnEt8flNy4R49O/iw8TCOT/t3xWdFxGmAdfQDbyeQ3GiFfltP0rW"], ["updated_at", "2015-02-03 10:55:31.017776"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:31.029258"], ["password_digest", "$2a$04$n2z3ewX94YPkzX3mMdbdiuAprMXic1Y1ACUXjA0mY6KdjBiXF1lae"], ["updated_at", "2015-02-03 10:55:31.029258"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.032809"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:55:31.032809"], ["year", 1900]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 10:55:31.036191"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:55:31.036191"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 10:55:31.039407"], ["score", 10], ["updated_at", "2015-02-03 10:55:31.039407"], ["user_id", 1]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:31.053260"], ["password_digest", "$2a$04$WlGqcr835fV0tWohKrOlduih1.bE/dzktkDTybtg9q4lkGjBuoeo."], ["updated_at", "2015-02-03 10:55:31.053260"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.057385"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:55:31.057385"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 10:55:31.070584"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:55:31.070584"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 10:55:31.074744"], ["score", 10], ["updated_at", "2015-02-03 10:55:31.074744"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:31.077525"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:55:31.077525"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 10:55:31.080197"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:55:31.080197"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 10:55:31.082908"], ["score", 20], ["updated_at", "2015-02-03 10:55:31.082908"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.085237"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:55:31.085237"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 10:55:31.087066"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:55:31.087066"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 10:55:31.090038"], ["score", 15], ["updated_at", "2015-02-03 10:55:31.090038"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:31.094602"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:55:31.094602"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 10:55:31.096666"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:55:31.096666"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 10:55:31.099285"], ["score", 7], ["updated_at", "2015-02-03 10:55:31.099285"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.101607"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:55:31.101607"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 10:55:31.103418"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:55:31.103418"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 10:55:31.108613"], ["score", 9], ["updated_at", "2015-02-03 10:55:31.108613"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 10:55:31.111030"], ["name", "anonymous"], ["updated_at", "2015-02-03 10:55:31.111030"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 10:55:31.112852"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 10:55:31.112852"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 10:55:31.115034"], ["score", 25], ["updated_at", "2015-02-03 10:55:31.115034"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.125946"], ["password_digest", "$2a$04$gE2Lz3dUrUxaQctqJsEdBeQuYPSsfq7ngrtNKF4f3LAQfALjMxwI."], ["updated_at", "2015-02-03 10:55:31.125946"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.145235"], ["password_digest", "$2a$04$YzlMIZY/QoSvQGB4OUXLnOsvKMQydwohPAhgt/1BQXr.ihdF3iKN2"], ["updated_at", "2015-02-03 10:55:31.145235"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.168777"], ["password_digest", "$2a$04$eQ8STeTQ0Q2PxZu3LGNbtedjbVF8KHO0LMCZEt47sF25xMke8Pa9."], ["updated_at", "2015-02-03 10:55:31.168777"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (6.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.185375"], ["password_digest", "$2a$04$QDui4nGf6VTTuY6qdqM.HO7hOrip9murUs5F4rM5XvzgJj2wutz1C"], ["updated_at", "2015-02-03 10:55:31.185375"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.195968"], ["password_digest", "$2a$04$6a5DlDC6NKWgiWzfNqnkE.aI4CpznBov3q2afMKDpoZlJy9EPjNZC"], ["updated_at", "2015-02-03 10:55:31.195968"], ["username", "Pekka"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.205699"], ["password_digest", "$2a$04$jCs4DlklRTBBMnByeMk0leHmQQTN/bXGsnVwoL6wakBIvOXBCBLBi"], ["updated_at", "2015-02-03 10:55:31.205699"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.220587"], ["password_digest", "$2a$04$3/DXc0ByncbUWfm7YPlM.evQ/fwC4vwY6vIkIMsmUugl0rdnUNwRi"], ["updated_at", "2015-02-03 10:55:31.220587"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 10:55:31.230926"], ["password_digest", "$2a$04$jxc8ZfZXRr3HvdBuBo2xvuqWFrUh92pRNA3qTfd5D1sYBJpuegrVG"], ["updated_at", "2015-02-03 10:55:31.230926"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 13:26:40 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (36.1ms)
  Rendered beers/new.html.erb within layouts/application (48.8ms)
Completed 200 OK in 168ms (Views: 129.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 13:26:40 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:40.882405"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 11:26:40.882405"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 13:26:40 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (60.9ms)
Completed 500 Internal Server Error in 68ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___1852228323773419927_70332837449380'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___1852228323773419927_70332837449380'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (4.4ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.5ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (13.4ms)
  Rendered beers/new.html.erb within layouts/application (13.9ms)
Completed 200 OK in 39ms (Views: 35.7ms | ActiveRecord: 0.5ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (8.6ms)
  Rendered beers/new.html.erb within layouts/application (9.0ms)
Completed 200 OK in 17ms (Views: 11.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 16ms (Views: 14.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:41.161464"], ["name", "Koff"], ["updated_at", "2015-02-03 11:26:41.161464"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:41.165558"], ["name", "Karjala"], ["updated_at", "2015-02-03 11:26:41.165558"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:41.168543"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 11:26:41.168543"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (10.0ms)
Completed 200 OK in 12ms (Views: 11.6ms | ActiveRecord: 0.3ms)
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:41.200850"], ["name", "Koff"], ["updated_at", "2015-02-03 11:26:41.200850"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:41.203009"], ["name", "Karjala"], ["updated_at", "2015-02-03 11:26:41.203009"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:41.205234"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 11:26:41.205234"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (7.1ms)
Completed 200 OK in 9ms (Views: 8.8ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mBrewery Load (0.2ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mRating Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1[0m  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (48.8ms)
Completed 200 OK in 59ms (Views: 55.2ms | ActiveRecord: 1.4ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:41.289387"], ["name", "Koff"], ["updated_at", "2015-02-03 11:26:41.289387"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 11:26:41.292259"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 11:26:41.292259"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 11:26:41.296638"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 11:26:41.296638"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:41.309343"], ["password_digest", "$2a$04$RCVPtkrtjS.iJeWUXxWcv.xpJEeigrG8xoVUlWSDeHbE1oLKuHT1G"], ["updated_at", "2015-02-03 11:26:41.309343"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 17ms (Views: 16.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 15ms (ActiveRecord: 0.5ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.6ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (29.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 46ms (Views: 43.1ms | ActiveRecord: 1.5ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (14.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 31ms (Views: 29.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 11:26:41.481127"], ["score", 15], ["updated_at", "2015-02-03 11:26:41.481127"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 11:26:41.489020"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 15ms (ActiveRecord: 0.9ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 18ms (Views: 15.7ms | ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:41.531849"], ["password_digest", "$2a$04$jaMV5QfiF/CpIVpoxtE/WeF0Pbs2kJ59yog1HMrNWG41AWVfWUkgG"], ["updated_at", "2015-02-03 11:26:41.531849"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.9ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.4ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 20ms (Views: 17.6ms | ActiveRecord: 0.6ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:41.624396"], ["password_digest", "$2a$04$Yot1khE.oMmjvWghN05gb.gCWUp8vOonrkx9D2HpyhcYTAZqOxO2O"], ["updated_at", "2015-02-03 11:26:41.624396"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 6ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 8ms (Views: 3.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:41.706801"], ["password_digest", "$2a$04$aSFINoDbIRJiQooj3.AY5uUhzQhXpla0sYcNhy5MF1ujkcmDn1ZhG"], ["updated_at", "2015-02-03 11:26:41.706801"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (15.6ms)
  Rendered users/new.html.erb within layouts/application (26.8ms)
Completed 200 OK in 42ms (Views: 41.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:41.822178"], ["password_digest", "$2a$04$8FRkxQuvXWWFbmp4iXD7eur1dc7xUwdJjjPg.ySJF81H.Cwz9HQI2"], ["updated_at", "2015-02-03 11:26:41.822178"], ["username", "Brian"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 19ms (ActiveRecord: 1.1ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 13:26:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (3.4ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:41.872714"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 11:26:41.872714"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:41.945964"], ["password_digest", "$2a$04$729yNxkQFP5LrQry.B9o4eOj6aYlEPF9GLKHKY8odqkZrIblG.YZi"], ["updated_at", "2015-02-03 11:26:41.945964"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:41.983350"], ["password_digest", "$2a$04$PVbuQvX6UBSA3MypLx6wVeYMJvDJq006juzBnd1Z4IK3loq86veay"], ["updated_at", "2015-02-03 11:26:41.983350"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 11:26:41.986443"], ["score", 10], ["updated_at", "2015-02-03 11:26:41.986443"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 11:26:41.988375"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 11:26:41.990078"], ["score", 20], ["updated_at", "2015-02-03 11:26:41.990078"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-03 11:26:41.991484"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.001604"], ["password_digest", "$2a$04$yc8yPJoqK0A1cv8ABhPiz.Pb1N27rZwvYaAmiXfb5EM4nolMJzq.e"], ["updated_at", "2015-02-03 11:26:42.001604"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.015726"], ["password_digest", "$2a$04$YAKeqPK29xJTDOzEheEHr.SvD3cjR8jkK4wPMoFTfgXR3zV1BX/8C"], ["updated_at", "2015-02-03 11:26:42.015726"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:42.024929"], ["password_digest", "$2a$04$MO/Xo7ggXKfGxJWpYdRfKe48Lpwd/oQ4uTq587R61hk.jYHbMSyEy"], ["updated_at", "2015-02-03 11:26:42.024929"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.036155"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:26:42.036155"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 11:26:42.038293"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:26:42.038293"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 11:26:42.040446"], ["score", 10], ["updated_at", "2015-02-03 11:26:42.040446"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:42.054903"], ["password_digest", "$2a$04$VNmY7LSG1e1s.9DZ8F/RZ.llYIXLxYvzzalU7B8QhZAbNsUlgAn16"], ["updated_at", "2015-02-03 11:26:42.054903"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.057415"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:26:42.057415"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 11:26:42.062050"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:26:42.062050"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 11:26:42.064690"], ["score", 10], ["updated_at", "2015-02-03 11:26:42.064690"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:42.067577"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:26:42.067577"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-03 11:26:42.070309"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:26:42.070309"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 11:26:42.072530"], ["score", 20], ["updated_at", "2015-02-03 11:26:42.072530"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.075388"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:26:42.075388"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-03 11:26:42.077025"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:26:42.077025"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-03 11:26:42.079022"], ["score", 15], ["updated_at", "2015-02-03 11:26:42.079022"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:42.082405"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:26:42.082405"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-03 11:26:42.084595"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:26:42.084595"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-03 11:26:42.087693"], ["score", 7], ["updated_at", "2015-02-03 11:26:42.087693"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.090062"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:26:42.090062"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-03 11:26:42.091871"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:26:42.091871"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-03 11:26:42.094750"], ["score", 9], ["updated_at", "2015-02-03 11:26:42.094750"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:26:42.097877"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:26:42.097877"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-03 11:26:42.099680"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:26:42.099680"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-03 11:26:42.101947"], ["score", 25], ["updated_at", "2015-02-03 11:26:42.101947"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.117953"], ["password_digest", "$2a$04$mQWcC4yZqXwt20/xoW6ynOoBIIp8E2..3b/p9kp.30mhZci/niSBq"], ["updated_at", "2015-02-03 11:26:42.117953"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (11.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.138127"], ["password_digest", "$2a$04$smxifTZvIkcKMsw.XKaZj.c97HM3GqCLZ5N6ZDRxR4IQuZ81KMP8e"], ["updated_at", "2015-02-03 11:26:42.138127"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.145766"], ["password_digest", "$2a$04$4VqIDQoG/Gjux6.HQ4jWXuyN/SGjuQzeLaUd9kEuqD6NWzXoxrqWS"], ["updated_at", "2015-02-03 11:26:42.145766"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.162220"], ["password_digest", "$2a$04$rz2/V52u6tH.O7Io87EDoeZQ0pcZe7nleoekAQ8KRKbPgN94cn6.y"], ["updated_at", "2015-02-03 11:26:42.162220"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.173526"], ["password_digest", "$2a$04$vzU.4TRzmOk1Yv.jB/Sn.urS2tD77KNBG66bsFEac91VK9e.gFp7K"], ["updated_at", "2015-02-03 11:26:42.173526"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.190387"], ["password_digest", "$2a$04$Jvm2DFwnpb3BNixMY.yLAe.x5q6j.TcK1C8506FSrVtQH2vy0U/Oe"], ["updated_at", "2015-02-03 11:26:42.190387"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.202632"], ["password_digest", "$2a$04$O8X9fV7mLm5mxuhBWxvId.PVsIFxTKgCq8ki2PrPTEx.ljFwgUjyW"], ["updated_at", "2015-02-03 11:26:42.202632"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:26:42.211366"], ["password_digest", "$2a$04$tALrq5XWi.p2PxhqpN8ZuOGN0bdFEOxysM9lnFtXC1H8lT3Z67uFS"], ["updated_at", "2015-02-03 11:26:42.211366"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 13:47:18 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.5ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (35.4ms)
  Rendered beers/new.html.erb within layouts/application (49.7ms)
Completed 200 OK in 153ms (Views: 124.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 13:47:18 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:18.675460"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 11:47:18.675460"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 11ms (ActiveRecord: 1.4ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 13:47:18 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (22.4ms)
Completed 500 Internal Server Error in 30ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___312100077011704956_70302938711280'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___312100077011704956_70302938711280'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 13:47:18 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (5.2ms)
  Rendered beers/new.html.erb within layouts/application (5.7ms)
Completed 200 OK in 11ms (Views: 7.5ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 13:47:18 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.3ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (5.2ms)
  Rendered beers/new.html.erb within layouts/application (5.7ms)
Completed 200 OK in 13ms (Views: 7.0ms | ActiveRecord: 0.4ms)
  [1m[35m (3.9ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 13:47:18 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.5ms)
Completed 200 OK in 18ms (Views: 16.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:18.944381"], ["name", "Koff"], ["updated_at", "2015-02-03 11:47:18.944381"], ["year", 1897]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:18.951975"], ["name", "Karjala"], ["updated_at", "2015-02-03 11:47:18.951975"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:18.965937"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 11:47:18.965937"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 13:47:18 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (3.5ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.2ms)
  [1m[35m (4.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:18.995371"], ["name", "Koff"], ["updated_at", "2015-02-03 11:47:18.995371"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:18.997741"], ["name", "Karjala"], ["updated_at", "2015-02-03 11:47:18.997741"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:19.000326"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 11:47:19.000326"], ["year", 1899]]
  [1m[35m (2.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 15ms (Views: 13.5ms | ActiveRecord: 0.4ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.7ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (54.0ms)
Completed 200 OK in 64ms (Views: 59.6ms | ActiveRecord: 1.6ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:19.100955"], ["name", "Koff"], ["updated_at", "2015-02-03 11:47:19.100955"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 11:47:19.104949"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 11:47:19.104949"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 11:47:19.107852"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 11:47:19.107852"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:19.120700"], ["password_digest", "$2a$04$UpAeMv/xfEEV88CuMyPe7OKwZtHrEx5.dSA8tbdC50RfdOWRmGerm"], ["updated_at", "2015-02-03 11:47:19.120700"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 16ms (Views: 15.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 9ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (39.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 67ms (Views: 63.2ms | ActiveRecord: 1.7ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.4ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (19.6ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 46ms (Views: 36.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 11:47:19.330859"], ["score", 15], ["updated_at", "2015-02-03 11:47:19.330859"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 11:47:19.338835"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 14ms (ActiveRecord: 0.8ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 17.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:19.385183"], ["password_digest", "$2a$04$tcB1iyuru3RM3FaMjNhIuONqd01itKoCQZtf5rwdqr6KI.7whFc9m"], ["updated_at", "2015-02-03 11:47:19.385183"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (11.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 43ms (Views: 40.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:19.510671"], ["password_digest", "$2a$04$7lrtN4zIGqFe1du0izCgvey5pJ95imxl.FtfzWA.EUbQgFfjd0CSa"], ["updated_at", "2015-02-03 11:47:19.510671"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 7ms (Views: 3.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 12ms (ActiveRecord: 0.3ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:19.600309"], ["password_digest", "$2a$04$mhCOro3UGSKytXUIXOfv1uKIBbwOfzc1Wb8E/l1dZhRrxsXaPJ9jG"], ["updated_at", "2015-02-03 11:47:19.600309"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (9.1ms)
  Rendered users/new.html.erb within layouts/application (15.3ms)
Completed 200 OK in 26ms (Views: 25.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:19.652418"], ["password_digest", "$2a$04$GcF6kDFnmKpn8wYRDXN/7OWOcB.Pvc4kHI80CIckZq647cogOoPcu"], ["updated_at", "2015-02-03 11:47:19.652418"], ["username", "Brian"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 14ms (ActiveRecord: 2.6ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 13:47:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (3.8ms)
Completed 200 OK in 20ms (Views: 15.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:19.713104"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 11:47:19.713104"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (5.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:19.795301"], ["password_digest", "$2a$04$KEgHpoBR8yEDlJZ3zIH5behZfQF2oYnRrK9uGbu7uIPByk0mgY3iK"], ["updated_at", "2015-02-03 11:47:19.795301"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:19.806104"], ["password_digest", "$2a$04$oGu0U9csENK6s4lQjWc.4.s3UUsy639whjhrnPOJsBjpIufhUBzbW"], ["updated_at", "2015-02-03 11:47:19.806104"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:19.811565"], ["score", 10], ["updated_at", "2015-02-03 11:47:19.811565"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 11:47:19.814941"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:19.816995"], ["score", 20], ["updated_at", "2015-02-03 11:47:19.816995"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 11:47:19.818813"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:19.860744"], ["password_digest", "$2a$04$iErXXgu5ADdXxfXgiSPIyuD/VsNKiJO01muqP9QtplEtCJhx9uZ8."], ["updated_at", "2015-02-03 11:47:19.860744"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:19.869016"], ["password_digest", "$2a$04$IuCOgeZ50hlS8xYaqE3Ej.TRu9mNAMvHcfzroexIAAIac.oGkv0Tq"], ["updated_at", "2015-02-03 11:47:19.869016"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (9.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:19.886007"], ["password_digest", "$2a$04$b.W1rgvi0L0kS7cUGff/BugVsZK5kCPJdbZvmMQQ0raqxIPh84kJS"], ["updated_at", "2015-02-03 11:47:19.886007"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:19.890334"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:47:19.890334"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 11:47:19.893427"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:47:19.893427"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 11:47:19.896348"], ["score", 10], ["updated_at", "2015-02-03 11:47:19.896348"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.4ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:19.908337"], ["password_digest", "$2a$04$OQvZebQRHti.CzPpKijC1e321UQgjE/6xrGg9ZZZxqLo9nNQ376pe"], ["updated_at", "2015-02-03 11:47:19.908337"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:19.913369"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:47:19.913369"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 11:47:19.918535"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:47:19.918535"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 11:47:19.945679"], ["score", 10], ["updated_at", "2015-02-03 11:47:19.945679"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:19.970498"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:47:19.970498"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 11:47:19.975445"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:47:19.975445"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 11:47:19.978000"], ["score", 20], ["updated_at", "2015-02-03 11:47:19.978000"], ["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:19.980406"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:47:19.980406"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 11:47:19.982197"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:47:19.982197"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 11:47:19.986726"], ["score", 15], ["updated_at", "2015-02-03 11:47:19.986726"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:20.003269"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:47:20.003269"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 11:47:20.006114"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:47:20.006114"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 11:47:20.011072"], ["score", 7], ["updated_at", "2015-02-03 11:47:20.011072"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:20.013693"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:47:20.013693"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 11:47:20.015285"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:47:20.015285"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 11:47:20.017384"], ["score", 9], ["updated_at", "2015-02-03 11:47:20.017384"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 11:47:20.019446"], ["name", "anonymous"], ["updated_at", "2015-02-03 11:47:20.019446"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 11:47:20.021224"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 11:47:20.021224"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 11:47:20.030377"], ["score", 25], ["updated_at", "2015-02-03 11:47:20.030377"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:20.040082"], ["password_digest", "$2a$04$DA583ExrF5VWWKIBP3vGOO.khogWX9yutUo0ibu4sHUsO8tQg/9Su"], ["updated_at", "2015-02-03 11:47:20.040082"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:20.049385"], ["password_digest", "$2a$04$obORy5YCYKnnQR8SBwrJ1eVpFvbr73/s/l.N1i8Ohqo30rTOL5sbC"], ["updated_at", "2015-02-03 11:47:20.049385"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:20.061189"], ["password_digest", "$2a$04$c01JOs4jNz5rMNaZOSPySu2A.aDn.tGQlHgs4RO02lGMXz.gK5Js2"], ["updated_at", "2015-02-03 11:47:20.061189"], ["username", "Pekka"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:20.070780"], ["password_digest", "$2a$04$lkhW2Ng93SrUbs0.mSWsIuIqJ.ODh8/uxEVBL2aWbUkfmB9IYibZ6"], ["updated_at", "2015-02-03 11:47:20.070780"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (8.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:20.097207"], ["password_digest", "$2a$04$fwgrw7pnozjKLZlX6QR4hOJw9oUeXT445.FfTCm6jU2uRAc.e6yqO"], ["updated_at", "2015-02-03 11:47:20.097207"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (11.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:20.116670"], ["password_digest", "$2a$04$Gd7dvSf9.bPIuDbB0JyveOcSrqfLruSw0rr0sMUaJ7xogzrUvmD9a"], ["updated_at", "2015-02-03 11:47:20.116670"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:20.125768"], ["password_digest", "$2a$04$WV3/8FVpD7C1AjfQ7Kx0UO57nZvApKdusvCzZjTVRniigtEBgtit6"], ["updated_at", "2015-02-03 11:47:20.125768"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 11:47:20.135274"], ["password_digest", "$2a$04$meBkvmPAsG778ZVUwzLDheGWf9b8Smla/9FOqeZ8iXaqdmKcG13gO"], ["updated_at", "2015-02-03 11:47:20.135274"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:05:24 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (1.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (37.5ms)
  Rendered beers/new.html.erb within layouts/application (50.0ms)
Completed 200 OK in 143ms (Views: 115.9ms | ActiveRecord: 1.5ms)
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:25.087772"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:05:25.087772"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 9ms (ActiveRecord: 1.4ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (65.7ms)
Completed 500 Internal Server Error in 74ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___1224691417380358605_70173398220540'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___1224691417380358605_70173398220540'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.5ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (10.2ms)
  Rendered beers/new.html.erb within layouts/application (10.6ms)
Completed 200 OK in 14ms (Views: 12.4ms | ActiveRecord: 0.5ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (6.3ms)
  Rendered beers/new.html.erb within layouts/application (6.6ms)
Completed 200 OK in 13ms (Views: 8.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (5.3ms)
Completed 200 OK in 29ms (Views: 28.1ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:25.389718"], ["name", "Koff"], ["updated_at", "2015-02-03 12:05:25.389718"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:25.392510"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:05:25.392510"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:25.394765"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:05:25.394765"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (8.5ms)
Completed 200 OK in 13ms (Views: 10.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:25.427794"], ["name", "Koff"], ["updated_at", "2015-02-03 12:05:25.427794"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:25.430867"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:05:25.430867"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:25.433743"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:05:25.433743"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.4ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.6ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (49.0ms)
Completed 200 OK in 60ms (Views: 55.4ms | ActiveRecord: 1.4ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:25.525538"], ["name", "Koff"], ["updated_at", "2015-02-03 12:05:25.525538"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:05:25.541506"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:25.541506"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:05:25.544480"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:25.544480"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:25.565474"], ["password_digest", "$2a$04$iR1Y0V5QnQyt3W0wmj6FMu/w1s4f7rQQk7EXNuRnV7yXC4ix4gkGi"], ["updated_at", "2015-02-03 12:05:25.565474"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 20ms (Views: 19.4ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 15ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (36.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 70ms (Views: 66.1ms | ActiveRecord: 1.6ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (17.1ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 34ms (Views: 32.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:05:25.815826"], ["score", 15], ["updated_at", "2015-02-03 12:05:25.815826"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:05:25.822408"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 12ms (ActiveRecord: 0.8ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.3ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.5ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (13.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 16.5ms | ActiveRecord: 1.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:25.861458"], ["name", "Koff"], ["updated_at", "2015-02-03 12:05:25.861458"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:05:25.864159"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:25.864159"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:05:25.867846"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:25.867846"]]
  [1m[36m (1.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:25.876271"], ["password_digest", "$2a$04$JKJDHIEuIIieSjC4mWnKmu8sPN69vpzw3wbw9zZgK6xAwuTb.mz0e"], ["updated_at", "2015-02-03 12:05:25.876271"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.9ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 13ms (Views: 11.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:25.928344"], ["password_digest", "$2a$04$Nr8fBExh1nXnoZyYFquLsOfczKfLYpdj43PBKZYHVorFZIz8w4M0a"], ["updated_at", "2015-02-03 12:05:25.928344"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
Completed 200 OK in 3ms (Views: 2.9ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:05:25 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 13ms (Views: 10.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:26.007071"], ["password_digest", "$2a$04$Kme6mcDguOSmBpBeBPbIx.jOYoV0AkA0QUdt/l49d7HZ/Z7U9A1e6"], ["updated_at", "2015-02-03 12:05:26.007071"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:05:26 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
Completed 200 OK in 11ms (Views: 10.1ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:05:26 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:05:26 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.051545"], ["password_digest", "$2a$04$MIbyyyOUYANG47kfnSHs0uA1HD6Dxo9PiayPDso9o0vesz1d.J7h."], ["updated_at", "2015-02-03 12:05:26.051545"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:05:26 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (7.7ms)
  Rendered users/new.html.erb within layouts/application (16.3ms)
Completed 200 OK in 26ms (Views: 24.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:05:26 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:26.113820"], ["password_digest", "$2a$04$/c/2MhbFlua2YWtjklxThuQzyDRe5bzZUBR.P9hd2oXVBf/ZAGji."], ["updated_at", "2015-02-03 12:05:26.113820"], ["username", "Brian"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:05:26 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mBeerClub Exists (0.0ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (4.1ms)
Completed 200 OK in 8ms (Views: 6.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:26.155693"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:05:26.155693"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:26.257150"], ["password_digest", "$2a$04$3.ot7Z0KnH9OPw0DdQ.wOu9O9R3miSJeIyIWhtNzC4QK5SUdd4XOe"], ["updated_at", "2015-02-03 12:05:26.257150"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:26.291394"], ["password_digest", "$2a$04$50wtDXG9Ra5a9C9vTq5bD.lNNW.FsTJCUUloWqPNR4bWdsMWA3jK2"], ["updated_at", "2015-02-03 12:05:26.291394"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.294679"], ["score", 10], ["updated_at", "2015-02-03 12:05:26.294679"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 12:05:26.297547"], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.322733"], ["score", 20], ["updated_at", "2015-02-03 12:05:26.322733"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 12:05:26.324490"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (3.8ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.340300"], ["password_digest", "$2a$04$TDYhprlBMDUcEt5L5RrcoejTLkMeLKmh5tIjL3cg41kxvN/Okm3zW"], ["updated_at", "2015-02-03 12:05:26.340300"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.353758"], ["password_digest", "$2a$04$syFZPyPcJD5xUjqHuK6fLuypW4/PgojOeFwicZEmdMyCFmXg4QTkm"], ["updated_at", "2015-02-03 12:05:26.353758"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:26.364358"], ["password_digest", "$2a$04$ZVQo0x5gi3qGtjf3d0j/cOMhjSxNOjR.9iR8ZrD8F38mcGYNxjreK"], ["updated_at", "2015-02-03 12:05:26.364358"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.406293"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:05:26.406293"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:05:26.409383"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:26.409383"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:05:26.412042"], ["score", 10], ["updated_at", "2015-02-03 12:05:26.412042"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.5ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:26.430279"], ["password_digest", "$2a$04$EyLUDavz89TRagMgfxINY.fR0EmXfzgZxzuGCF5BKyzOGp1BsucAy"], ["updated_at", "2015-02-03 12:05:26.430279"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.433261"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:05:26.433261"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (16.8ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:05:26.469530"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:26.469530"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:05:26.498618"], ["score", 10], ["updated_at", "2015-02-03 12:05:26.498618"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:26.501234"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:05:26.501234"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 12:05:26.503307"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:26.503307"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 12:05:26.505831"], ["score", 20], ["updated_at", "2015-02-03 12:05:26.505831"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.508642"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:05:26.508642"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 12:05:26.511613"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:26.511613"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 12:05:26.522157"], ["score", 15], ["updated_at", "2015-02-03 12:05:26.522157"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:26.525672"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:05:26.525672"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 12:05:26.528643"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:26.528643"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 12:05:26.537673"], ["score", 7], ["updated_at", "2015-02-03 12:05:26.537673"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.540627"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:05:26.540627"], ["year", 1900]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 12:05:26.542564"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:26.542564"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 12:05:26.544867"], ["score", 9], ["updated_at", "2015-02-03 12:05:26.544867"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:05:26.547304"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:05:26.547304"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 12:05:26.549339"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:05:26.549339"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 12:05:26.551838"], ["score", 25], ["updated_at", "2015-02-03 12:05:26.551838"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.562131"], ["password_digest", "$2a$04$BEW1M7.hyH8QINZPkiKM.u4wAWAjGpmTnjCuXucekOZoJEHVRPU2q"], ["updated_at", "2015-02-03 12:05:26.562131"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.571382"], ["password_digest", "$2a$04$tw3Kcpf2NAz.pDReI5/Wwu2irC2mPNhMQ31rxj9C73mRjSsfAJ4qS"], ["updated_at", "2015-02-03 12:05:26.571382"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.579184"], ["password_digest", "$2a$04$0/V0JlFfqLCjOI5sb9j53OcxOQOPP0aBbR5aW0fxAG/ArG94AOZz."], ["updated_at", "2015-02-03 12:05:26.579184"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.588862"], ["password_digest", "$2a$04$psIzr0JTE0n/PaRREhCjPuzFfxhLGZfhblz.MWugCECf5ijralkVS"], ["updated_at", "2015-02-03 12:05:26.588862"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.683999"], ["password_digest", "$2a$04$UmJNvn38DYdIDaNDYcy2Sujqi82eAa9s/MacmvSw30xql.7jRlw7."], ["updated_at", "2015-02-03 12:05:26.683999"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.740240"], ["password_digest", "$2a$04$nN0QMaTES1TgvRrJwLsfyuMnxtp1RkXasC1dB8Q1cb46ac6e3CC0m"], ["updated_at", "2015-02-03 12:05:26.740240"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.756980"], ["password_digest", "$2a$04$TJmeVax8UwAyLoA7dQvUyeDDOUvNMhrCz32mgCANhTO/4uUa2nFv."], ["updated_at", "2015-02-03 12:05:26.756980"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:05:26.765578"], ["password_digest", "$2a$04$A/TCfa5NLh42uCi1x.gjuurn4CAQgT1GiQitmzPTfFnu.4fpKMzva"], ["updated_at", "2015-02-03 12:05:26.765578"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:06:43 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (35.8ms)
  Rendered beers/new.html.erb within layouts/application (49.3ms)
Completed 200 OK in 142ms (Views: 114.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:06:43 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:43.720898"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:06:43.720898"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:06:43 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.4ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (68.4ms)
Completed 500 Internal Server Error in 78ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___189854650909045442_70253644156160'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___189854650909045442_70253644156160'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:06:43 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (4.5ms)
  Rendered beers/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:06:43 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (5.8ms)
  Rendered beers/new.html.erb within layouts/application (6.1ms)
Completed 200 OK in 24ms (Views: 7.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:06:43 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 17ms (Views: 15.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:43.992373"], ["name", "Koff"], ["updated_at", "2015-02-03 12:06:43.992373"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:43.995260"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:06:43.995260"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:43.997463"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:06:43.997463"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (11.0ms)
Completed 200 OK in 14ms (Views: 12.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:44.034079"], ["name", "Koff"], ["updated_at", "2015-02-03 12:06:44.034079"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:44.036174"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:06:44.036174"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:44.038380"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:06:44.038380"], ["year", 1899]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.3ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.6ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (49.1ms)
Completed 200 OK in 59ms (Views: 54.7ms | ActiveRecord: 1.6ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:44.136422"], ["name", "Koff"], ["updated_at", "2015-02-03 12:06:44.136422"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:06:44.139206"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:44.139206"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:06:44.141551"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:44.141551"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:44.160744"], ["password_digest", "$2a$04$t77T6l.u5r4VBp6c/M5Sh.s8ZB8Wh75tYnIh3wW0nYFw1lqUGmHXO"], ["updated_at", "2015-02-03 12:06:44.160744"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.6ms)
Completed 200 OK in 34ms (Views: 33.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (30.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 53ms (Views: 50.0ms | ActiveRecord: 1.7ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (49.1ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 72ms (Views: 70.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:06:44.392558"], ["score", 15], ["updated_at", "2015-02-03 12:06:44.392558"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:06:44.398877"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 12ms (ActiveRecord: 0.9ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 17.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:44.439881"], ["name", "Koff"], ["updated_at", "2015-02-03 12:06:44.439881"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:06:44.442929"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:44.442929"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:06:44.445898"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:44.445898"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:44.452439"], ["password_digest", "$2a$04$GmGEDTauXrKf1xpuCl5wZ.XQkANvut.xnIwZk9LXuCqZ7EdBjNuK6"], ["updated_at", "2015-02-03 12:06:44.452439"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 12ms (Views: 10.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:06:44.496638"], ["score", 12], ["updated_at", "2015-02-03 12:06:44.496638"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:06:44.498515"], ["score", 15], ["updated_at", "2015-02-03 12:06:44.498515"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by RatingsController#index as HTML
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT "ratings".* FROM "ratings"[0m
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (15.3ms)
Completed 500 Internal Server Error in 23ms

NoMethodError - undefined method `username' for nil:NilClass:
  app/views/ratings/index.html.erb:5:in `block in _app_views_ratings_index_html_erb___2024074754396488802_70253628333380'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/ratings/index.html.erb:4:in `_app_views_ratings_index_html_erb___2024074754396488802_70253628333380'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:35:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:21:in `visit'
  capybara (2.4.4) lib/capybara/rack_test/driver.rb:42:in `visit'
  capybara (2.4.4) lib/capybara/session.rb:227:in `visit'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  rspec-rails (3.1.0) lib/rspec/rails/example/feature_example_group.rb:28:in `visit'
  spec/features/ratings_spec.rb:32:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:44.576853"], ["password_digest", "$2a$04$4p3Pmq.4gRKAyTPvggdc1eeH4OoJ5R8tC7dVGvu1qTzixScZZU2im"], ["updated_at", "2015-02-03 12:06:44.576853"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (9.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 22ms (Views: 15.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:44.651809"], ["password_digest", "$2a$04$SuZDOp1XJsViF9dhQu9c8.uwK5zLwjPN/84p7Vfaf0A1j4UpWhjJu"], ["updated_at", "2015-02-03 12:06:44.651809"], ["username", "Pekka"]]
  [1m[36m (2.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (4.3ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:44.723721"], ["password_digest", "$2a$04$L9wK8h9lNGECMEqvTVa/r.8bKv3ArwHaKKKIL0xiu5P43zlZoTJh."], ["updated_at", "2015-02-03 12:06:44.723721"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (6.7ms)
  Rendered users/new.html.erb within layouts/application (16.4ms)
Completed 200 OK in 32ms (Views: 31.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:44.802238"], ["password_digest", "$2a$04$jKe/F9h1vt2vxfXgHWTyf.qk2ZwK27zldhcBdgx/ZmiKeXYlmUmri"], ["updated_at", "2015-02-03 12:06:44.802238"], ["username", "Brian"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 36ms (ActiveRecord: 0.9ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:06:44 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mBeerClub Exists (0.0ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (11.4ms)
Completed 200 OK in 20ms (Views: 16.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:44.879530"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:06:44.879530"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (12.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:44.989104"], ["password_digest", "$2a$04$O7WVMp/5UhGN2URRf5MpGO2MaSmPTjjf9GetomDWGHSXlETblGHDu"], ["updated_at", "2015-02-03 12:06:44.989104"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:45.026455"], ["password_digest", "$2a$04$BtLj1kUUzhR4LByNvHju8.OBtK7sFHzAMm13qkMtzThnESAkgp6kq"], ["updated_at", "2015-02-03 12:06:45.026455"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.029777"], ["score", 10], ["updated_at", "2015-02-03 12:06:45.029777"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 12:06:45.040835"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.044024"], ["score", 20], ["updated_at", "2015-02-03 12:06:45.044024"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 12:06:45.046055"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.063128"], ["password_digest", "$2a$04$0qwgSmExam0CfIp1ftbV3.QbU9nC8EsoLh0wYuRqh35bqc1ldLJZq"], ["updated_at", "2015-02-03 12:06:45.063128"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.093557"], ["password_digest", "$2a$04$fjg33UeucfhMZ6urZFE2Pe2s17tlyJS.iN.eKLN361BCm6aQTNUTq"], ["updated_at", "2015-02-03 12:06:45.093557"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:45.103109"], ["password_digest", "$2a$04$1SFYqTxVHeRZLc.dMELs4eZ2WwSTntVGKhEOwWzYNADF3ZUIdyZkG"], ["updated_at", "2015-02-03 12:06:45.103109"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.107053"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:06:45.107053"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:06:45.109963"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:45.109963"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:06:45.114363"], ["score", 10], ["updated_at", "2015-02-03 12:06:45.114363"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:45.136175"], ["password_digest", "$2a$04$uHOBtIA/qTI/pBxEQG52Pu6Zidg2Gc64zr0Cla/zB/2XVZmmrlyW6"], ["updated_at", "2015-02-03 12:06:45.136175"], ["username", "Pekka"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.140190"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:06:45.140190"], ["year", 1900]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:06:45.142914"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:45.142914"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:06:45.146113"], ["score", 10], ["updated_at", "2015-02-03 12:06:45.146113"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:45.154802"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:06:45.154802"], ["year", 1900]]
  [1m[36m (3.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 12:06:45.160940"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:45.160940"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 12:06:45.181682"], ["score", 20], ["updated_at", "2015-02-03 12:06:45.181682"], ["user_id", 1]]
  [1m[36m (1.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.190702"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:06:45.190702"], ["year", 1900]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 12:06:45.192790"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:45.192790"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 12:06:45.195646"], ["score", 15], ["updated_at", "2015-02-03 12:06:45.195646"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:45.198435"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:06:45.198435"], ["year", 1900]]
  [1m[36m (7.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 12:06:45.210358"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:45.210358"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 12:06:45.212785"], ["score", 7], ["updated_at", "2015-02-03 12:06:45.212785"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.215430"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:06:45.215430"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 12:06:45.217257"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:45.217257"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 12:06:45.219548"], ["score", 9], ["updated_at", "2015-02-03 12:06:45.219548"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:06:45.221846"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:06:45.221846"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 12:06:45.223382"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:06:45.223382"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 12:06:45.225670"], ["score", 25], ["updated_at", "2015-02-03 12:06:45.225670"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (10.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.245611"], ["password_digest", "$2a$04$NGIlUUUuxysNW.fVyv2uFeuO3Zhxu3CGxPR9Lnm7maY8frcIX0pXK"], ["updated_at", "2015-02-03 12:06:45.245611"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.256735"], ["password_digest", "$2a$04$XYFo6WKEioOIg/5zP4L0/eI4hIo.54xOweKHTBFUuH2QxcWvIKWfS"], ["updated_at", "2015-02-03 12:06:45.256735"], ["username", "Pekka"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36m (7.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.282388"], ["password_digest", "$2a$04$tD2.5TuVUSk1dTTOkMhdeeaYubFhuZWARjaBu89KQ6.917RPLb.MO"], ["updated_at", "2015-02-03 12:06:45.282388"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.331219"], ["password_digest", "$2a$04$LEoWeaZbUZuwASQlSlNoQez.KwswhcYYU7fGErypLuFBOuWRAuY/K"], ["updated_at", "2015-02-03 12:06:45.331219"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.405499"], ["password_digest", "$2a$04$9jAl0/WNDX30Ijxh2Yz6/.Op03ui17fHlUJ3NiG/j05fnFc.dvoxO"], ["updated_at", "2015-02-03 12:06:45.405499"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.428978"], ["password_digest", "$2a$04$2ugzesdqGj2AE8wOcwnDAuZvqU6.zomwksYiP/XfBi8oJF3EJRtjy"], ["updated_at", "2015-02-03 12:06:45.428978"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (9.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.447264"], ["password_digest", "$2a$04$.4FYBm6AThV3norNu6IEKO9K5bRcZJtB.G0SqC2MC.GeLxYhHfK82"], ["updated_at", "2015-02-03 12:06:45.447264"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:06:45.479609"], ["password_digest", "$2a$04$.6FFzn3yYkwIOZ.JDGixsu/XmmiCRL2/9UKaXzMp9iIbfZ2PblISS"], ["updated_at", "2015-02-03 12:06:45.479609"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (37.2ms)
  Rendered beers/new.html.erb within layouts/application (49.2ms)
Completed 200 OK in 189ms (Views: 119.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:00.343009"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:10:00.343009"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 11ms (ActiveRecord: 1.3ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (65.8ms)
Completed 500 Internal Server Error in 85ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___1531983410000382986_70211088107560'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___1531983410000382986_70211088107560'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.3ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (10.6ms)
  Rendered beers/new.html.erb within layouts/application (11.0ms)
Completed 200 OK in 14ms (Views: 12.8ms | ActiveRecord: 0.3ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (9.9ms)
  Rendered beers/new.html.erb within layouts/application (10.3ms)
Completed 200 OK in 17ms (Views: 12.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 20ms (Views: 18.7ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:00.660128"], ["name", "Koff"], ["updated_at", "2015-02-03 12:10:00.660128"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:00.664059"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:10:00.664059"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:00.667079"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:10:00.667079"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (4.5ms)
Completed 200 OK in 13ms (Views: 11.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:00.698050"], ["name", "Koff"], ["updated_at", "2015-02-03 12:10:00.698050"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:00.700227"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:10:00.700227"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:00.702706"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:10:00.702706"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 11ms (Views: 9.9ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.6ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (47.6ms)
Completed 200 OK in 57ms (Views: 53.1ms | ActiveRecord: 1.4ms)
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:00.795755"], ["name", "Koff"], ["updated_at", "2015-02-03 12:10:00.795755"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:10:00.798708"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:00.798708"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:10:00.805780"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:00.805780"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:00.818118"], ["password_digest", "$2a$04$2jsTLZvX9qllQJnS.id3/.HhF6eaZir6muvjFeIrpzppbt7hiu7rK"], ["updated_at", "2015-02-03 12:10:00.818118"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 17ms (Views: 16.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (29.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 48ms (Views: 44.6ms | ActiveRecord: 1.7ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (16.6ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 32ms (Views: 30.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:10:00.986900"], ["score", 15], ["updated_at", "2015-02-03 12:10:00.986900"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:10:00.993413"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 12ms (ActiveRecord: 0.8ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:10:00 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.5ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (13.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 21ms (Views: 18.9ms | ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.037309"], ["name", "Koff"], ["updated_at", "2015-02-03 12:10:01.037309"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:10:01.040649"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:01.040649"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:10:01.047259"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:01.047259"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.058065"], ["password_digest", "$2a$04$YyfzHsP0r6HPDC/pMPKEqeKlIbAjxIznufa7i7uz/FvUoAgA/1.Ai"], ["updated_at", "2015-02-03 12:10:01.058065"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (9.3ms)
Completed 200 OK in 13ms (Views: 12.5ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 9ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.5ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 16ms (Views: 13.7ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:10:01.147663"], ["score", 12], ["updated_at", "2015-02-03 12:10:01.147663"], ["user_id", 0]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:10:01.156585"], ["score", 15], ["updated_at", "2015-02-03 12:10:01.156585"], ["user_id", 0]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by RatingsController#index as HTML
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"[0m
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 0]]
  Rendered ratings/index.html.erb within layouts/application (25.8ms)
Completed 500 Internal Server Error in 35ms

NoMethodError - undefined method `username' for nil:NilClass:
  app/views/ratings/index.html.erb:5:in `block in _app_views_ratings_index_html_erb___4426892076906857589_70211075335060'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/ratings/index.html.erb:4:in `_app_views_ratings_index_html_erb___4426892076906857589_70211075335060'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:35:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:21:in `visit'
  capybara (2.4.4) lib/capybara/rack_test/driver.rb:42:in `visit'
  capybara (2.4.4) lib/capybara/session.rb:227:in `visit'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  rspec-rails (3.1.0) lib/rspec/rails/example/feature_example_group.rb:28:in `visit'
  spec/features/ratings_spec.rb:32:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.270559"], ["password_digest", "$2a$04$vgMMTVmniPPIyygejCUVqu2lY6/Z.zpP89hnhdFhIaYmRw/ryZcPu"], ["updated_at", "2015-02-03 12:10:01.270559"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.9ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:01.327774"], ["password_digest", "$2a$04$cZhfVPuYQgslIMet8bm8OOexM9LaFbIsm7FOem8X/H9ajBy1EATBm"], ["updated_at", "2015-02-03 12:10:01.327774"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.366179"], ["password_digest", "$2a$04$r0bVDQ/ATdTq57ps8M/4UOpW7v2Z2AIxPOFW/nH9kGatAHaaRwHrm"], ["updated_at", "2015-02-03 12:10:01.366179"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (6.5ms)
  Rendered users/new.html.erb within layouts/application (13.0ms)
Completed 200 OK in 22ms (Views: 21.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:01.427569"], ["password_digest", "$2a$04$LL.DIS/IeRW9zdchOX5qUOuTYyXDe2LfuIxyWzDiiXh9iAS0zwTVC"], ["updated_at", "2015-02-03 12:10:01.427569"], ["username", "Brian"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 11ms (ActiveRecord: 0.9ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:10:01 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (4.9ms)
Completed 200 OK in 10ms (Views: 7.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (34.5ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:01.465456"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:10:01.465456"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:01.550302"], ["password_digest", "$2a$04$nm0jfoeOaZGQGF1OdpELJ.xV45A65jU6Q2hhyFERoucYRlCiTucne"], ["updated_at", "2015-02-03 12:10:01.550302"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:01.561072"], ["password_digest", "$2a$04$Dv5xeAAXKtXgMomCg11VAeN3w3OD0Z0K.xkBeBms6XgdJMf1FcNdW"], ["updated_at", "2015-02-03 12:10:01.561072"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 12:10:01.566471"], ["score", 10], ["updated_at", "2015-02-03 12:10:01.566471"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:10:01.573805"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 12:10:01.576548"], ["score", 20], ["updated_at", "2015-02-03 12:10:01.576548"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-03 12:10:01.578264"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.604993"], ["password_digest", "$2a$04$8EF7xI78IGGvgmByD9X9UexJIQlLyQLioxN6WD.RIgjDPP7rWd8IC"], ["updated_at", "2015-02-03 12:10:01.604993"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.613538"], ["password_digest", "$2a$04$sZqzTgMYTNLtlA9qQhhgXut/SsMxpC.MQDALXMcbfWwRMUifeXhH6"], ["updated_at", "2015-02-03 12:10:01.613538"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:01.630764"], ["password_digest", "$2a$04$a9Q2RXaBGLO4r1/S4wYiD.mIrBCgcZ7B.AbrgJPagUQmuCPzZBhae"], ["updated_at", "2015-02-03 12:10:01.630764"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.634860"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:10:01.634860"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:10:01.639950"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:01.639950"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:10:01.643814"], ["score", 10], ["updated_at", "2015-02-03 12:10:01.643814"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.7ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.6ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:01.656710"], ["password_digest", "$2a$04$j0Rpl7gvXc8JMSwQHJN8IuNwchX/2PMXdleZFvrh/IBUZiZmnuBt."], ["updated_at", "2015-02-03 12:10:01.656710"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.660116"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:10:01.660116"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:10:01.664200"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:01.664200"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:10:01.688478"], ["score", 10], ["updated_at", "2015-02-03 12:10:01.688478"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:01.694399"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:10:01.694399"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-03 12:10:01.696495"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:01.696495"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:10:01.699228"], ["score", 20], ["updated_at", "2015-02-03 12:10:01.699228"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.702429"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:10:01.702429"], ["year", 1900]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-03 12:10:01.705874"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:01.705874"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-03 12:10:01.709643"], ["score", 15], ["updated_at", "2015-02-03 12:10:01.709643"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:01.712502"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:10:01.712502"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-03 12:10:01.714470"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:01.714470"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-03 12:10:01.717146"], ["score", 7], ["updated_at", "2015-02-03 12:10:01.717146"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.720523"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:10:01.720523"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-03 12:10:01.722617"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:01.722617"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-03 12:10:01.724814"], ["score", 9], ["updated_at", "2015-02-03 12:10:01.724814"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:10:01.726978"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:10:01.726978"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-03 12:10:01.728586"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:10:01.728586"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-03 12:10:01.730636"], ["score", 25], ["updated_at", "2015-02-03 12:10:01.730636"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (3.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.743233"], ["password_digest", "$2a$04$fGUzdeO/9x9/EGFJMJ/iGeohkfpQ9y35i3B353VBJQ5AByvrQF2XS"], ["updated_at", "2015-02-03 12:10:01.743233"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.828406"], ["password_digest", "$2a$04$UrSI2NGcloYXizDrQtpltOQhplLNgpgUBct7QP8Qb/oddDrHRE9Ea"], ["updated_at", "2015-02-03 12:10:01.828406"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (4.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.846466"], ["password_digest", "$2a$04$6GAdJvLYM4ZaiG85DOQhDuCWmcXwnXY442RzkH/bidZfz65BzPwP2"], ["updated_at", "2015-02-03 12:10:01.846466"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.854781"], ["password_digest", "$2a$04$ldwpxhjQ7PgyZHcsk8aDaunW3nIVYqCWNGeLqpmxvDbaIMAAU3VtS"], ["updated_at", "2015-02-03 12:10:01.854781"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.863569"], ["password_digest", "$2a$04$8dgLbPwys0fg8N0990TkoO5vkzg0KDkV5dIqB9uMs4Kd8u71J0ZwK"], ["updated_at", "2015-02-03 12:10:01.863569"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.912338"], ["password_digest", "$2a$04$Fye2rrV7TaxGRZZP41OQtekyfft0j36bYmnsC69eIgjuxcIQNnzQi"], ["updated_at", "2015-02-03 12:10:01.912338"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.928428"], ["password_digest", "$2a$04$BK/cQSBKLCJcFbkFK42g0esqhSlKYA3snxrk3PuRvi5WbhoeF.vhC"], ["updated_at", "2015-02-03 12:10:01.928428"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:10:01.942619"], ["password_digest", "$2a$04$UxK1HjONPTBrAV2YMA.1dO.oIsf57jL5Z6PctfhuspXFovS4KF8IS"], ["updated_at", "2015-02-03 12:10:01.942619"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:16:27 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (44.1ms)
  Rendered beers/new.html.erb within layouts/application (61.2ms)
Completed 200 OK in 162ms (Views: 134.9ms | ActiveRecord: 1.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:16:27 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:27.229267"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:16:27.229267"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 9ms (ActiveRecord: 1.1ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:16:27 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (385.1ms)
Completed 500 Internal Server Error in 395ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___3010378793407179331_70209544650160'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___3010378793407179331_70209544650160'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:16:27 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (4.8ms)
  Rendered beers/new.html.erb within layouts/application (5.2ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:16:27 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (4.2ms)
  Rendered beers/new.html.erb within layouts/application (4.5ms)
Completed 200 OK in 12ms (Views: 6.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:16:27 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 16ms (Views: 14.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (2.3ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:27.875208"], ["name", "Koff"], ["updated_at", "2015-02-03 12:16:27.875208"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:27.878049"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:16:27.878049"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:27.880518"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:16:27.880518"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:16:27 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (12.7ms)
Completed 200 OK in 15ms (Views: 14.6ms | ActiveRecord: 0.2ms)
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:27.916529"], ["name", "Koff"], ["updated_at", "2015-02-03 12:16:27.916529"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:27.918717"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:16:27.918717"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:27.920904"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:16:27.920904"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:16:27 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.5ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.4ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:16:27 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.6ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (53.0ms)
Completed 200 OK in 67ms (Views: 61.9ms | ActiveRecord: 2.1ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:28.013634"], ["name", "Koff"], ["updated_at", "2015-02-03 12:16:28.013634"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:16:28.016453"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:28.016453"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:16:28.018803"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:28.018803"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:28.031604"], ["password_digest", "$2a$04$2hB695R2Y0OcyrGdJGEiAerRbJ6EmqaB3nVvlo.Kleio77b1TOToi"], ["updated_at", "2015-02-03 12:16:28.031604"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 16ms (Views: 15.9ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 25ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (1.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (45.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 70ms (Views: 63.6ms | ActiveRecord: 3.9ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (14.5ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 59ms (Views: 56.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:16:28.319242"], ["score", 15], ["updated_at", "2015-02-03 12:16:28.319242"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:16:28.325266"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 13ms (ActiveRecord: 0.8ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 16.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:28.366577"], ["name", "Koff"], ["updated_at", "2015-02-03 12:16:28.366577"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (14.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:16:28.369350"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:28.369350"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:16:28.386737"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:28.386737"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:28.393512"], ["password_digest", "$2a$04$eoAP.9FWbxpjSyTTsSgu4OepMPYzWaxGfrjeVfWsCIBP.APWMOlE2"], ["updated_at", "2015-02-03 12:16:28.393512"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:16:28.435303"], ["score", 12], ["updated_at", "2015-02-03 12:16:28.435303"], ["user_id", 0]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:16:28.438801"], ["score", 15], ["updated_at", "2015-02-03 12:16:28.438801"], ["user_id", 0]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by RatingsController#index as HTML
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT "ratings".* FROM "ratings"[0m
  [1m[35mBeer Load (0.4ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 0]]
  Rendered ratings/index.html.erb within layouts/application (15.2ms)
Completed 500 Internal Server Error in 27ms

NoMethodError - undefined method `username' for nil:NilClass:
  app/views/ratings/index.html.erb:5:in `block in _app_views_ratings_index_html_erb___1124733791956846571_70209538463980'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/ratings/index.html.erb:4:in `_app_views_ratings_index_html_erb___1124733791956846571_70209538463980'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:35:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:21:in `visit'
  capybara (2.4.4) lib/capybara/rack_test/driver.rb:42:in `visit'
  capybara (2.4.4) lib/capybara/session.rb:227:in `visit'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  rspec-rails (3.1.0) lib/rspec/rails/example/feature_example_group.rb:28:in `visit'
  spec/features/ratings_spec.rb:32:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[35m (8.3ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:28.865994"], ["password_digest", "$2a$04$1otzxtzC51PwDWjwVE6RTuFSjmIFrKsSVvI4UzyBMAKBj.0Wk/DiW"], ["updated_at", "2015-02-03 12:16:28.865994"], ["username", "Pekka"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.9ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.4ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:16:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (16.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 89ms (Views: 85.6ms | ActiveRecord: 1.1ms)
  [1m[36m (3.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:29.316401"], ["password_digest", "$2a$04$xExFuNAki8HfrSBa62IuQe6AoydDLNsmoisIT2z7s7G6kK7VL0UqW"], ["updated_at", "2015-02-03 12:16:29.316401"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:16:29 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 16ms (Views: 4.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:16:29 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (4.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 27ms (ActiveRecord: 4.4ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:16:29 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:29.888742"], ["password_digest", "$2a$04$A.ifq4ENDSU0pyz10.13UelhntjTSCyJuygTuS7WrZVSiYvGTRsxC"], ["updated_at", "2015-02-03 12:16:29.888742"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:16:29 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (13.2ms)
  Rendered users/new.html.erb within layouts/application (77.7ms)
Completed 200 OK in 94ms (Views: 93.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:16:30 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:30.083388"], ["password_digest", "$2a$04$7081zvF/wIngcUMhaAHdgeHh7BI8fwR/yGZ9uKZ4IhZ9l0HEJ0QNq"], ["updated_at", "2015-02-03 12:16:30.083388"], ["username", "Brian"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 69ms (ActiveRecord: 1.9ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:16:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (7.6ms)
Completed 200 OK in 14ms (Views: 11.5ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (4.6ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:30.142386"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:16:30.142386"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:30.392297"], ["password_digest", "$2a$04$woVPgO3SeOvciQDiWoVdIeFWMNiD7MMzLpHzgdNIQApMPpe7UxBju"], ["updated_at", "2015-02-03 12:16:30.392297"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:30.601114"], ["password_digest", "$2a$04$TfYYC.6/8AwtUgXP.RFXgu2dXUF3IpMWTeD6j9Maaa6/Qhr0V0uSq"], ["updated_at", "2015-02-03 12:16:30.601114"], ["username", "Pekka"]]
  [1m[35m (17.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 12:16:30.636127"], ["score", 10], ["updated_at", "2015-02-03 12:16:30.636127"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:16:30.921579"], ["user_id", 1]]
  [1m[35m (1.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 12:16:30.925548"], ["score", 20], ["updated_at", "2015-02-03 12:16:30.925548"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-03 12:16:30.937779"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.006914"], ["password_digest", "$2a$04$JLtth43sCkTqmkshfRW5seQuuZs4BlOZ2IeTTGb3DY91HRKbkMQce"], ["updated_at", "2015-02-03 12:16:31.006914"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.031189"], ["password_digest", "$2a$04$qF4Esc1xfSwLE/UIVYGRE.ld.PXFoVim9p/.3JcwIr1ULJHMu3ajO"], ["updated_at", "2015-02-03 12:16:31.031189"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.8ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:31.138945"], ["password_digest", "$2a$04$kJ9dzfPJOs2zrgE5KjcrreV.zikcTNMDhEZ/9OP9rLE503D414lUC"], ["updated_at", "2015-02-03 12:16:31.138945"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.142001"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:16:31.142001"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:16:31.192298"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:31.192298"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:16:31.195691"], ["score", 10], ["updated_at", "2015-02-03 12:16:31.195691"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.3ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:31.209428"], ["password_digest", "$2a$04$1k6YsqDXNaV9X/ChD1vJxePoNHFl3EsKxiM2ENvusZ26F1ojISPOy"], ["updated_at", "2015-02-03 12:16:31.209428"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.9ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.212512"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:16:31.212512"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:16:31.262620"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:31.262620"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:16:31.380020"], ["score", 10], ["updated_at", "2015-02-03 12:16:31.380020"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:31.382616"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:16:31.382616"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-03 12:16:31.384323"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:31.384323"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:16:31.460678"], ["score", 20], ["updated_at", "2015-02-03 12:16:31.460678"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.485429"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:16:31.485429"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-03 12:16:31.487747"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:31.487747"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-03 12:16:31.498609"], ["score", 15], ["updated_at", "2015-02-03 12:16:31.498609"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (119.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:31.584046"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:16:31.584046"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-03 12:16:31.708107"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:31.708107"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-03 12:16:31.711040"], ["score", 7], ["updated_at", "2015-02-03 12:16:31.711040"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.797144"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:16:31.797144"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-03 12:16:31.799018"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:31.799018"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-03 12:16:31.801385"], ["score", 9], ["updated_at", "2015-02-03 12:16:31.801385"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:16:31.803723"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:16:31.803723"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-03 12:16:31.807613"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:16:31.807613"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-03 12:16:31.813757"], ["score", 25], ["updated_at", "2015-02-03 12:16:31.813757"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.6ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (38.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.882073"], ["password_digest", "$2a$04$niXZpzosMjLV5Rg8jkjRYefZvogC4TLynhiAC8UkKr8CxblSu3NZS"], ["updated_at", "2015-02-03 12:16:31.882073"], ["username", "Pekka"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.943504"], ["password_digest", "$2a$04$Wdbas4It.S.fAJFyUhefeOS5jpqjXPaLPCOLk48hS6ajkvZ2uDSGG"], ["updated_at", "2015-02-03 12:16:31.943504"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.957028"], ["password_digest", "$2a$04$NQxnziKj8BOKQjlyTUchYu1BEaRc9PEgMN9uN7Dzu1LYcBfYX7Kra"], ["updated_at", "2015-02-03 12:16:31.957028"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.964423"], ["password_digest", "$2a$04$cH/es.pMTqO7XRn/3dilDOctZrKG1tttrj8I8BMal6JkCQeKTJL9O"], ["updated_at", "2015-02-03 12:16:31.964423"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.983723"], ["password_digest", "$2a$04$/pnbLRlpOyF5ZG7ibOXcwe9W2SLVujoTl0CaulZQn0EnKrDo29UIK"], ["updated_at", "2015-02-03 12:16:31.983723"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:31.992167"], ["password_digest", "$2a$04$TcG68gFYz/gwBiOlhz09kuAY/9fBttYhpVRB0n4GPwTTnNYVq/PNK"], ["updated_at", "2015-02-03 12:16:31.992167"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:32.002247"], ["password_digest", "$2a$04$ArZsjftyyWO3IWTRJS/0Tu.TAbCU/ZwiURtRJsdO.3SJyPp.dNeju"], ["updated_at", "2015-02-03 12:16:32.002247"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:16:32.012858"], ["password_digest", "$2a$04$VpXrjLG7vcEWmiH87l57gubxxkzoIbx13R2i.S/OotOCNbDgqGtl6"], ["updated_at", "2015-02-03 12:16:32.012858"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.7ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (38.1ms)
  Rendered beers/new.html.erb within layouts/application (49.9ms)
Completed 200 OK in 176ms (Views: 148.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:16.502717"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:23:16.502717"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.3ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (57.0ms)
Completed 500 Internal Server Error in 65ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb__3602796760953276178_70148237411540'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb__3602796760953276178_70148237411540'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.3ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (7.8ms)
  Rendered beers/new.html.erb within layouts/application (8.2ms)
Completed 200 OK in 12ms (Views: 10.3ms | ActiveRecord: 0.3ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (4.6ms)
  Rendered beers/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 11ms (Views: 6.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 18ms (Views: 16.4ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:16.803318"], ["name", "Koff"], ["updated_at", "2015-02-03 12:23:16.803318"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:16.806581"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:23:16.806581"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:16.809035"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:23:16.809035"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (4.1ms)
Completed 200 OK in 12ms (Views: 11.3ms | ActiveRecord: 0.2ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:16.840377"], ["name", "Koff"], ["updated_at", "2015-02-03 12:23:16.840377"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:16.842460"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:23:16.842460"], ["year", 1898]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:16.849705"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:23:16.849705"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.6ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (46.6ms)
Completed 200 OK in 56ms (Views: 52.6ms | ActiveRecord: 1.5ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:16.933446"], ["name", "Koff"], ["updated_at", "2015-02-03 12:23:16.933446"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:23:16.936508"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:16.936508"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:23:16.940790"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:16.940790"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:16.956599"], ["password_digest", "$2a$04$fathSSrtmnRkyGtDOCaIWuWihHo6R3o1ZXeJCbib23sc7616zUjfa"], ["updated_at", "2015-02-03 12:23:16.956599"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.7ms)
Completed 200 OK in 18ms (Views: 17.6ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:23:16 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.4ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (49.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 80ms (Views: 76.5ms | ActiveRecord: 1.8ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.6ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (22.5ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 40ms (Views: 38.2ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:23:17.180483"], ["score", 15], ["updated_at", "2015-02-03 12:23:17.180483"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:23:17.187226"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 13ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 16.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.5ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:17.230759"], ["name", "Koff"], ["updated_at", "2015-02-03 12:23:17.230759"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:23:17.233458"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:17.233458"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:23:17.237035"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:17.237035"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:17.244951"], ["password_digest", "$2a$04$xOjgVAl7DJrhp1uyriMr/ud4Q4Ek1KqfHzBjADUwEQQuHB3lrH6Ca"], ["updated_at", "2015-02-03 12:23:17.244951"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.9ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 16ms (Views: 13.0ms | ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.3ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:23:17.290087"], ["score", 12], ["updated_at", "2015-02-03 12:23:17.290087"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:23:17.296846"], ["score", 15], ["updated_at", "2015-02-03 12:23:17.296846"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by RatingsController#index as HTML
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT "ratings".* FROM "ratings"[0m
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (6.4ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 20ms (Views: 18.8ms | ActiveRecord: 0.5ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (10.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:17.384545"], ["password_digest", "$2a$04$7qO9fh.Osv/JG9PhzL16te46oofvfwDIHw2Anl8YbLrp9uURPMuzm"], ["updated_at", "2015-02-03 12:23:17.384545"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 22ms (Views: 21.6ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (7.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (16.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 24ms (Views: 14.7ms | ActiveRecord: 7.4ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:17.570939"], ["password_digest", "$2a$04$I6.iXFhLlpmS1/rvQ.wJHu7mE4GlaJrE8AwT4./MYUTRmL8T3e9ly"], ["updated_at", "2015-02-03 12:23:17.570939"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:23:17 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (13.9ms)
Completed 200 OK in 17ms (Views: 16.4ms | ActiveRecord: 0.0ms)
  [1m[36m (3.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (9.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:17.864580"], ["password_digest", "$2a$04$p4qRe76JkEvltr8MnB3IW.AYs2J8siYC1gB9riD068HDuxXj/u7lO"], ["updated_at", "2015-02-03 12:23:17.864580"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:23:18 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (6.9ms)
  Rendered users/new.html.erb within layouts/application (14.4ms)
Completed 200 OK in 22ms (Views: 21.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:23:18 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:18.163552"], ["password_digest", "$2a$04$psBhEqBEuyjvBg8QV0IbAe3uTv7804PGGHExId3BTXU6FkFPKS6Oq"], ["updated_at", "2015-02-03 12:23:18.163552"], ["username", "Brian"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 52ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:23:18 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (2.9ms)
Completed 200 OK in 9ms (Views: 7.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:18.310182"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:23:18.310182"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:18.773263"], ["password_digest", "$2a$04$fU3q/uiKKobewuipbeYSdeNx3WuZWJeBqK1SgC6VoN8yDRvK9dOWe"], ["updated_at", "2015-02-03 12:23:18.773263"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:19.053535"], ["password_digest", "$2a$04$WBhxlb7aH7RV1lHnzQCLsu7TDBgGf/UZwy/EP2Ny4.W1NfH2ZM2nu"], ["updated_at", "2015-02-03 12:23:19.053535"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (13.5ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.056302"], ["score", 10], ["updated_at", "2015-02-03 12:23:19.056302"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 12:23:19.123081"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.205002"], ["score", 20], ["updated_at", "2015-02-03 12:23:19.205002"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 12:23:19.222322"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.4ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.251597"], ["password_digest", "$2a$04$1Y2xSp9T34VBrLaV/wS2oODjGmVjg8eCf4kX68K3ChxCuVn6r0MkC"], ["updated_at", "2015-02-03 12:23:19.251597"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.262260"], ["password_digest", "$2a$04$XKWaBbSEDnpuIADjkukptOKl7kKKEJnwS4cp/pD3S81sCtkmD4Bn."], ["updated_at", "2015-02-03 12:23:19.262260"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:19.289309"], ["password_digest", "$2a$04$lPwn4fASPWjgPKumAMYECOHz39tEUJatms63Zzmuty1AnHUElzHRO"], ["updated_at", "2015-02-03 12:23:19.289309"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.293398"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:23:19.293398"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:23:19.336026"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:19.336026"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:23:19.338777"], ["score", 10], ["updated_at", "2015-02-03 12:23:19.338777"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (15.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:19.416936"], ["password_digest", "$2a$04$2AzR1Jbqmm4Xq4PJC8He..NorvgpKpuWWoUQN9DzW2ILrbYfGiFH6"], ["updated_at", "2015-02-03 12:23:19.416936"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.420256"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:23:19.420256"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:23:19.522861"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:19.522861"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:23:19.529669"], ["score", 10], ["updated_at", "2015-02-03 12:23:19.529669"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:19.537538"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:23:19.537538"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 12:23:19.623527"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:19.623527"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 12:23:19.713331"], ["score", 20], ["updated_at", "2015-02-03 12:23:19.713331"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.716375"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:23:19.716375"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 12:23:19.718424"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:19.718424"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 12:23:19.720984"], ["score", 15], ["updated_at", "2015-02-03 12:23:19.720984"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:19.723259"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:23:19.723259"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 12:23:19.724960"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:19.724960"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 12:23:19.727631"], ["score", 7], ["updated_at", "2015-02-03 12:23:19.727631"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.730364"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:23:19.730364"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 12:23:19.734198"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:19.734198"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 12:23:19.736855"], ["score", 9], ["updated_at", "2015-02-03 12:23:19.736855"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:23:19.739440"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:23:19.739440"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 12:23:19.742132"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:23:19.742132"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 12:23:19.745338"], ["score", 25], ["updated_at", "2015-02-03 12:23:19.745338"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (4.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (2.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.763862"], ["password_digest", "$2a$04$/9rfhpNLJMoSFgr25449F.fRPhfGfM74ToaptWFHCwRWEq3tZNMGe"], ["updated_at", "2015-02-03 12:23:19.763862"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.772044"], ["password_digest", "$2a$04$o7Iv.jMbW/GDOJeIM9GgguG5Ccqjwfw44rU4mgPor2OtBHzn5AVqe"], ["updated_at", "2015-02-03 12:23:19.772044"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.779751"], ["password_digest", "$2a$04$tMR9i9SZhZA1Zxz5SdqpGuBilXdt047UyV8wwDUN6fvqurWjAmgzC"], ["updated_at", "2015-02-03 12:23:19.779751"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.787223"], ["password_digest", "$2a$04$znnfYR1kEdnl4bfFQ0TggOWjn8xEeo4Q5HuBrpxNvXn0vKBtZng1u"], ["updated_at", "2015-02-03 12:23:19.787223"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.797494"], ["password_digest", "$2a$04$FX6HX13v0mkGM/9kqWgS2.WI2ylP1h85GHZSBT1ULfl1GtOdQk12."], ["updated_at", "2015-02-03 12:23:19.797494"], ["username", "Pekka"]]
  [1m[35m (53.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.913152"], ["password_digest", "$2a$04$nUXUHVVsCAmGTYywxxY5ie.Nx9KzkhxcQHg.Q/0smhJZvKNFGMRV."], ["updated_at", "2015-02-03 12:23:19.913152"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (21.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.941796"], ["password_digest", "$2a$04$p0oeXEIcRr3GQrkUPVMCX.tExDY9zjkvU5VdjWajCovLDeFguVE.2"], ["updated_at", "2015-02-03 12:23:19.941796"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:23:19.952137"], ["password_digest", "$2a$04$uo5bP.CVxuHFMtdSA6UV3e9l97uZvZ.dJ1a3PVJcYSocdxqN.Do9S"], ["updated_at", "2015-02-03 12:23:19.952137"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:24:57 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (39.6ms)
  Rendered beers/new.html.erb within layouts/application (55.1ms)
Completed 200 OK in 159ms (Views: 126.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:24:57 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:57.610354"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:24:57.610354"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 11ms (ActiveRecord: 2.3ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:24:57 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.6ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (58.6ms)
Completed 500 Internal Server Error in 69ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___4198960534663669784_70211238084880'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___4198960534663669784_70211238084880'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:24:57 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (21.1ms)
  Rendered beers/new.html.erb within layouts/application (21.7ms)
Completed 200 OK in 26ms (Views: 23.9ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:24:57 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (6.2ms)
  Rendered beers/new.html.erb within layouts/application (6.5ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:24:57 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 17ms (Views: 15.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:57.881938"], ["name", "Koff"], ["updated_at", "2015-02-03 12:24:57.881938"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:24:57.885221"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:24:57.885221"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:57.888341"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:24:57.888341"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:24:57 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (9.9ms)
Completed 200 OK in 12ms (Views: 11.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:24:57.920505"], ["name", "Koff"], ["updated_at", "2015-02-03 12:24:57.920505"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:57.922698"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:24:57.922698"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:24:57.924750"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:24:57.924750"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:24:57 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.5ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:24:57 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (1.1ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (49.2ms)
Completed 200 OK in 59ms (Views: 54.6ms | ActiveRecord: 2.1ms)
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:58.015421"], ["name", "Koff"], ["updated_at", "2015-02-03 12:24:58.015421"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:24:58.018292"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:24:58.018292"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:24:58.022075"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:24:58.022075"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:58.034592"], ["password_digest", "$2a$04$KO3gomwy90D4Sllg1h5JuOmQ0r5SlFyqMOqe55QEPuK4bFQDEvgnS"], ["updated_at", "2015-02-03 12:24:58.034592"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 18ms (Views: 17.1ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 11ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (29.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 45ms (Views: 41.7ms | ActiveRecord: 1.8ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.4ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (23.7ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 48ms (Views: 46.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:24:58.230390"], ["score", 15], ["updated_at", "2015-02-03 12:24:58.230390"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:24:58.237764"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 13ms (ActiveRecord: 1.4ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (13.5ms)
  [1m[36mCACHE (0.6ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 17.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:58.286602"], ["name", "Koff"], ["updated_at", "2015-02-03 12:24:58.286602"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:24:58.290474"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:24:58.290474"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:24:58.293766"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:24:58.293766"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:58.300272"], ["password_digest", "$2a$04$udmvP1vqUM1uqDKZM4WQWuMdtogYiikB9B3EHKQkFHmbOt6VAkX7u"], ["updated_at", "2015-02-03 12:24:58.300272"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.2ms)
Completed 200 OK in 10ms (Views: 9.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 15ms (Views: 12.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:24:58.358991"], ["score", 12], ["updated_at", "2015-02-03 12:24:58.358991"], ["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:24:58.364644"], ["score", 15], ["updated_at", "2015-02-03 12:24:58.364644"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by RatingsController#index as HTML
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT "ratings".* FROM "ratings"[0m
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (6.2ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 18ms (Views: 16.8ms | ActiveRecord: 0.5ms)
  [1m[36m (7.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:24:58.504565"], ["password_digest", "$2a$04$yqWGGAmiGP1ULg3s0H/kc.7l8UQLA4jMMqIWU7p397QJ8NH1iiMeO"], ["updated_at", "2015-02-03 12:24:58.504565"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:24:58 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (125.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 623ms (Views: 620.4ms | ActiveRecord: 0.5ms)
  [1m[35m (7.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:59.289047"], ["password_digest", "$2a$04$9uf67pQtJrWz3to2oEydQuH4DAtcEL6hR8/sciQm5U4RX2xU6smIC"], ["updated_at", "2015-02-03 12:24:59.289047"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:24:59 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:24:59 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:24:59 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:24:59.654809"], ["password_digest", "$2a$04$2vfA2WJu51Ez1Bfig2lFbum14Zyn5UgCTJbkCUkdyJIFem64MpHVu"], ["updated_at", "2015-02-03 12:24:59.654809"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:24:59 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (7.7ms)
  Rendered users/new.html.erb within layouts/application (17.3ms)
Completed 200 OK in 32ms (Views: 29.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:24:59 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:59.762284"], ["password_digest", "$2a$04$fXkRfBZrknwjCUgQhVrcGue.cVnOsLC9NpNHH1OTGlRuvvy.BthEW"], ["updated_at", "2015-02-03 12:24:59.762284"], ["username", "Brian"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 114ms (ActiveRecord: 0.9ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:24:59 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (13.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (31.4ms)
Completed 200 OK in 49ms (Views: 33.1ms | ActiveRecord: 13.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:24:59.923973"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:24:59.923973"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:00.116873"], ["password_digest", "$2a$04$3AQBKxk5PQhQlLXhIJpxgervW0PAK.m59FoDZGpvCKo2sqNlDXiO."], ["updated_at", "2015-02-03 12:25:00.116873"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:00.135211"], ["password_digest", "$2a$04$KfjlIiFmBXYpcM3oavqRs.uwFxW57Rq2h95r93kUIRSCxvtRUZZne"], ["updated_at", "2015-02-03 12:25:00.135211"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.139890"], ["score", 10], ["updated_at", "2015-02-03 12:25:00.139890"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 12:25:00.182147"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.185074"], ["score", 20], ["updated_at", "2015-02-03 12:25:00.185074"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 12:25:00.186610"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.195683"], ["password_digest", "$2a$04$QayQ/tje5tWCMFfoeQ9ibu07QCTzwu9z5siGVhYnQ35UYtJgoLzLm"], ["updated_at", "2015-02-03 12:25:00.195683"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.205147"], ["password_digest", "$2a$04$8hg/QuvZWjRr/eveuvpyCOfKSiMbkffPh1Y0Mifwt.ZZatUzufcaa"], ["updated_at", "2015-02-03 12:25:00.205147"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:00.212959"], ["password_digest", "$2a$04$.Bz/9qcbk.Ct7B.Rq19v6ONO7yKMpTjC.JEDjoj2pYa.rJyFr5X8."], ["updated_at", "2015-02-03 12:25:00.212959"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.218292"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:00.218292"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:25:00.268369"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:00.268369"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:25:00.272345"], ["score", 10], ["updated_at", "2015-02-03 12:25:00.272345"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:00.283017"], ["password_digest", "$2a$04$1/fhmL6LidtYnK7/LWcHn.k9Q/4H8Bcy5LHGJIhlejSx1ffWuGIWy"], ["updated_at", "2015-02-03 12:25:00.283017"], ["username", "Pekka"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.286285"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:00.286285"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:25:00.333119"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:00.333119"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:25:00.336218"], ["score", 10], ["updated_at", "2015-02-03 12:25:00.336218"], ["user_id", 1]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:00.339765"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:00.339765"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 12:25:00.343165"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:00.343165"]]
  [1m[35m (44.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 12:25:00.410041"], ["score", 20], ["updated_at", "2015-02-03 12:25:00.410041"], ["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.412732"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:00.412732"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 12:25:00.414555"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:00.414555"]]
  [1m[36m (3.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 12:25:00.420994"], ["score", 15], ["updated_at", "2015-02-03 12:25:00.420994"], ["user_id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:00.424062"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:00.424062"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 12:25:00.426249"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:00.426249"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 12:25:00.428593"], ["score", 7], ["updated_at", "2015-02-03 12:25:00.428593"], ["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.430844"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:00.430844"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 12:25:00.452744"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:00.452744"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 12:25:00.456036"], ["score", 9], ["updated_at", "2015-02-03 12:25:00.456036"], ["user_id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:00.458899"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:00.458899"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 12:25:00.460854"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:00.460854"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 12:25:00.464304"], ["score", 25], ["updated_at", "2015-02-03 12:25:00.464304"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.7ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.488006"], ["password_digest", "$2a$04$wjCz7tcliyoPTa.qBP10Iu5yuO4dnc59ddyv7LfhAZHije7sqZIMe"], ["updated_at", "2015-02-03 12:25:00.488006"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.548974"], ["password_digest", "$2a$04$2e3YNZURIvJRlg4QPTRqF.EMKQvJQgFWVcadzCUD4FVp2SSLffdai"], ["updated_at", "2015-02-03 12:25:00.548974"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.557166"], ["password_digest", "$2a$04$HBf53QVeugbxtc7L7CN7vOU0uGC1urBkxxfGLXQ9bjbq79WIzLuXu"], ["updated_at", "2015-02-03 12:25:00.557166"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.567474"], ["password_digest", "$2a$04$NYs9I4lLoFrmUTFHe/1k0ukQPFBJBG.p4oExPQTMS201N4jICTW7."], ["updated_at", "2015-02-03 12:25:00.567474"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.581983"], ["password_digest", "$2a$04$hB.xdEyoU42zK0cIcPsYWOZELCxlWTOPfXZwU8YMY2KxeOTtXO.Sa"], ["updated_at", "2015-02-03 12:25:00.581983"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.594756"], ["password_digest", "$2a$04$TjvAD4rMNNeWXKl0jB/b/e1UcjiKckNLCvuS/R1Z6xUJnZCzDnZxm"], ["updated_at", "2015-02-03 12:25:00.594756"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.602072"], ["password_digest", "$2a$04$cEeaFEmagep/zJxPAQnJ8O3MTReJZnfvI4DmfT8kPd8j56se2BOPe"], ["updated_at", "2015-02-03 12:25:00.602072"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:00.609467"], ["password_digest", "$2a$04$gH5YUQu3BJzXJvthKw4EGebJm2bVWizwRPIJiADt3uC5o6zmz7FIa"], ["updated_at", "2015-02-03 12:25:00.609467"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:25:27 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.5ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (36.0ms)
  Rendered beers/new.html.erb within layouts/application (49.0ms)
Completed 200 OK in 149ms (Views: 122.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:25:27 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.4ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:27.937867"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:25:27.937867"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 11ms (ActiveRecord: 2.6ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:25:27 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.3ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (67.5ms)
Completed 500 Internal Server Error in 76ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb__1501652579706145605_70313459194940'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb__1501652579706145605_70313459194940'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (4.1ms)
  Rendered beers/new.html.erb within layouts/application (4.6ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (5.8ms)
  Rendered beers/new.html.erb within layouts/application (6.1ms)
Completed 200 OK in 12ms (Views: 7.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 19ms (Views: 17.9ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:28.221609"], ["name", "Koff"], ["updated_at", "2015-02-03 12:25:28.221609"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:28.224586"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:25:28.224586"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:28.227691"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:25:28.227691"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (3.7ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.2ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:28.272539"], ["name", "Koff"], ["updated_at", "2015-02-03 12:25:28.272539"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:28.274848"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:25:28.274848"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:28.282871"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:25:28.282871"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.5ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (54.1ms)
Completed 200 OK in 66ms (Views: 60.6ms | ActiveRecord: 1.4ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:28.371195"], ["name", "Koff"], ["updated_at", "2015-02-03 12:25:28.371195"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:25:28.374207"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:28.374207"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:25:28.376664"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:28.376664"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (3.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:28.409886"], ["password_digest", "$2a$04$/vDN1c86uEuTrl2N.etiXeAxInERvVAVquUt8cXwBsRTflEdtqA4W"], ["updated_at", "2015-02-03 12:25:28.409886"], ["username", "Pekka"]]
  [1m[36m (2.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 33ms (Views: 32.4ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (37.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 54ms (Views: 50.2ms | ActiveRecord: 1.8ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (17.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 42ms (Views: 40.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:25:28.636806"], ["score", 15], ["updated_at", "2015-02-03 12:25:28.636806"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:25:28.647147"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 17ms (ActiveRecord: 0.9ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (11.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 18ms (Views: 15.4ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (2.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:28.699136"], ["name", "Koff"], ["updated_at", "2015-02-03 12:25:28.699136"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:25:28.701869"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:28.701869"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:25:28.704755"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:28.704755"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:28.711653"], ["password_digest", "$2a$04$drbh0Vy2h0HYp9I1tSr5A.ioRaEDOany0bInuHgCeHrsMeUQiEzcO"], ["updated_at", "2015-02-03 12:25:28.711653"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.9ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 13ms (Views: 10.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:25:28.754608"], ["score", 12], ["updated_at", "2015-02-03 12:25:28.754608"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:25:28.757613"], ["score", 15], ["updated_at", "2015-02-03 12:25:28.757613"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (6.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 23ms (Views: 21.0ms | ActiveRecord: 0.9ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:28.901425"], ["password_digest", "$2a$04$K6S6CnaEvYZQyNAMfEsd4uYpgH3mkbKE8jUvqIwMZ8HACGEB1O.ly"], ["updated_at", "2015-02-03 12:25:28.901425"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 17ms (Views: 13.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:28.985643"], ["password_digest", "$2a$04$yVG6PHGP1IVDt3JOfgf24eqnHKbVeZVqOH4BOK4fxPBoYeKoiT6d."], ["updated_at", "2015-02-03 12:25:28.985643"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:25:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:25:29 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:25:29 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.0ms)
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:29.103835"], ["password_digest", "$2a$04$wBlC.auXsSxO7iOWvdm.v.D1Jo0O9Ln2lSm6EDKNbXdrCmSFXMqAe"], ["updated_at", "2015-02-03 12:25:29.103835"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:25:29 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (18.0ms)
  Rendered users/new.html.erb within layouts/application (246.9ms)
Completed 200 OK in 264ms (Views: 263.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:25:29 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:29.465350"], ["password_digest", "$2a$04$jSiVPZZCMlbEX0G3jYh.xeqstv3sVUAKCvLMWZyO0IKQhqDY1jh5q"], ["updated_at", "2015-02-03 12:25:29.465350"], ["username", "Brian"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 13ms (ActiveRecord: 1.4ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:25:29 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (4.7ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (3.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:30.157041"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:25:30.157041"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (116.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:30.590581"], ["password_digest", "$2a$04$5FewHeNfzke3xGVqq.x8V.T0MoTV7wyD4whQooGxMvU1xAE.NP5V."], ["updated_at", "2015-02-03 12:25:30.590581"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (24.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:30.640763"], ["password_digest", "$2a$04$YNoa8uhJLFefVDZ6U0wXueRyCJ4ryNZI5CUJYw1BUxdgVTuv/KSJ2"], ["updated_at", "2015-02-03 12:25:30.640763"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 12:25:30.643468"], ["score", 10], ["updated_at", "2015-02-03 12:25:30.643468"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:25:30.647752"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 12:25:30.650141"], ["score", 20], ["updated_at", "2015-02-03 12:25:30.650141"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-03 12:25:30.655589"], ["user_id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:30.669573"], ["password_digest", "$2a$04$5uu1VxqWiuBKhsHowH46lOExiqYAkO18BcsRuohdkmanm/Oy91Ar2"], ["updated_at", "2015-02-03 12:25:30.669573"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:30.689682"], ["password_digest", "$2a$04$RUhTtcWJJiWH6xGbEFpr6OL1cRs.M92fZQPAMzOcLiyM5JbH/8cFW"], ["updated_at", "2015-02-03 12:25:30.689682"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (4.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:30.723641"], ["password_digest", "$2a$04$GEp98x6diHS5exMEgYmpzOCoUVelaiYXBVA1yY0OaCwiKHJZ/DCga"], ["updated_at", "2015-02-03 12:25:30.723641"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:30.728611"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:30.728611"], ["year", 1900]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:25:30.731510"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:30.731510"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:25:30.755054"], ["score", 10], ["updated_at", "2015-02-03 12:25:30.755054"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:30.768525"], ["password_digest", "$2a$04$IQt.0kxJpMuq2sBu4uALtuYgMiQhVeNTLvmW4KWFRV8TqiXj6ePai"], ["updated_at", "2015-02-03 12:25:30.768525"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:30.771695"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:30.771695"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:25:30.806596"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:30.806596"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:25:30.825522"], ["score", 10], ["updated_at", "2015-02-03 12:25:30.825522"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:30.828931"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:30.828931"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-03 12:25:30.871103"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:30.871103"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:25:30.873841"], ["score", 20], ["updated_at", "2015-02-03 12:25:30.873841"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:30.884466"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:30.884466"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-03 12:25:30.886390"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:30.886390"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-03 12:25:30.888851"], ["score", 15], ["updated_at", "2015-02-03 12:25:30.888851"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:30.896296"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:30.896296"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-03 12:25:30.898404"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:30.898404"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-03 12:25:30.902548"], ["score", 7], ["updated_at", "2015-02-03 12:25:30.902548"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:30.905696"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:30.905696"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-03 12:25:30.911324"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:30.911324"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-03 12:25:30.927691"], ["score", 9], ["updated_at", "2015-02-03 12:25:30.927691"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:25:30.930339"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:25:30.930339"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-03 12:25:30.932132"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:25:30.932132"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-03 12:25:30.939654"], ["score", 25], ["updated_at", "2015-02-03 12:25:30.939654"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (5.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:30.955894"], ["password_digest", "$2a$04$uG87dOvwjsUeWFHGa.W2w.9GxNglJbgHvK7gPcNZSKxF.ifi2eApO"], ["updated_at", "2015-02-03 12:25:30.955894"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:31.096110"], ["password_digest", "$2a$04$fFN8wGr.4Tpu2ryBjQvvhudE1NJKVp.WfsrY.qZKXw2a1zMvnddjy"], ["updated_at", "2015-02-03 12:25:31.096110"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:31.140927"], ["password_digest", "$2a$04$lB1cuq5uMqZv97vK0lq8Cu/jb8MZKuNiqzNz/kJ4ZmBs6EojSyHeW"], ["updated_at", "2015-02-03 12:25:31.140927"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:31.149407"], ["password_digest", "$2a$04$c0JIxV3XQH8bW87JCh6VuuvYheOvjqjrgtSf0ss2YT.bXLcWvDMgu"], ["updated_at", "2015-02-03 12:25:31.149407"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:31.157201"], ["password_digest", "$2a$04$Wxp3czKpYjRyIMTfPJ.xJujnuybo97h9UsvEHeZJGiXaCCyW42eAS"], ["updated_at", "2015-02-03 12:25:31.157201"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:31.173011"], ["password_digest", "$2a$04$xBnRNEIe.nt6R5JRNk1eSuwyHrZmChV.5T6Bfzo.nXZr/h7HrcBoy"], ["updated_at", "2015-02-03 12:25:31.173011"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:31.183598"], ["password_digest", "$2a$04$jnX70e8.8fzX/PjOVlwoQOjAB3TLK.4fmHEH0qdQO4w4lTtiNbvQ."], ["updated_at", "2015-02-03 12:25:31.183598"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:25:31.195525"], ["password_digest", "$2a$04$tKn5N6pvWvk1aiCu0erbnebdVh9JkMhsvdJ5gRD8map10B3yqWkCy"], ["updated_at", "2015-02-03 12:25:31.195525"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:27:19 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.8ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (46.8ms)
  Rendered beers/new.html.erb within layouts/application (59.2ms)
Completed 200 OK in 153ms (Views: 121.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:20.073597"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:27:20.073597"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 14ms (ActiveRecord: 1.5ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (1.4ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (111.6ms)
Completed 500 Internal Server Error in 131ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___1202384734336453315_70222766213840'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___1202384734336453315_70222766213840'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (5.5ms)
  Rendered beers/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 10ms (Views: 8.8ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (18.0ms)
  Rendered beers/new.html.erb within layouts/application (18.3ms)
Completed 200 OK in 38ms (Views: 20.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.1ms)
Completed 200 OK in 21ms (Views: 19.6ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:20.496175"], ["name", "Koff"], ["updated_at", "2015-02-03 12:27:20.496175"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:20.499006"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:27:20.499006"], ["year", 1898]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:20.501427"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:27:20.501427"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (3.9ms)
Completed 200 OK in 24ms (Views: 5.6ms | ActiveRecord: 0.2ms)
  [1m[35m (3.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:20.548864"], ["name", "Koff"], ["updated_at", "2015-02-03 12:27:20.548864"], ["year", 1897]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:20.554810"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:27:20.554810"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:20.561927"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:27:20.561927"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.3ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (110.2ms)
Completed 200 OK in 114ms (Views: 112.3ms | ActiveRecord: 0.5ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.3ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.9ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (68.6ms)
Completed 200 OK in 82ms (Views: 78.1ms | ActiveRecord: 1.9ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:20.808714"], ["name", "Koff"], ["updated_at", "2015-02-03 12:27:20.808714"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:27:20.811841"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:20.811841"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:27:20.814360"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:20.814360"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:20.836082"], ["password_digest", "$2a$04$5TpgW78XdUeixdPbpUIpEOcTruaymkuNCPtps6c9dIHzfExqyYQZm"], ["updated_at", "2015-02-03 12:27:20.836082"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (5.2ms)
Completed 200 OK in 18ms (Views: 17.5ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 11ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:27:20 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (56.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 94ms (Views: 90.0ms | ActiveRecord: 1.5ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (19.3ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 45ms (Views: 43.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:27:21.133428"], ["score", 15], ["updated_at", "2015-02-03 12:27:21.133428"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:27:21.140339"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 12ms (ActiveRecord: 0.8ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 18.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:21.187737"], ["name", "Koff"], ["updated_at", "2015-02-03 12:27:21.187737"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:27:21.200063"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:21.200063"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:27:21.203528"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:21.203528"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:21.209768"], ["password_digest", "$2a$04$tn8JYJSWmNhb2SGZXkPRd.HW06Yz99CF1nT.VuOyBNdpiQhENjZlm"], ["updated_at", "2015-02-03 12:27:21.209768"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.2ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (38.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 75ms (Views: 66.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:27:21.422142"], ["score", 12], ["updated_at", "2015-02-03 12:27:21.422142"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:27:21.425245"], ["score", 15], ["updated_at", "2015-02-03 12:27:21.425245"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (9.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 23ms (Views: 22.1ms | ActiveRecord: 0.6ms)
  [1m[35m (7.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:21.592596"], ["password_digest", "$2a$04$kmsCDTZpVjdPgHAi/KWLn.URga3b/z04hRDRzBIk8qYgW5X0DJuSu"], ["updated_at", "2015-02-03 12:27:21.592596"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 14ms (Views: 8.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (24.7ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 44ms (ActiveRecord: 24.7ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 18ms (Views: 10.8ms | ActiveRecord: 0.4ms)
  [1m[36m (3.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:21.776054"], ["password_digest", "$2a$04$QaZ79WtfYj9P6fQeV6VoXOXu/fvBOKKZFgegENMlT3unNHrpnF3bq"], ["updated_at", "2015-02-03 12:27:21.776054"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 7ms (Views: 4.6ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.0ms)
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (3.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:21.894881"], ["password_digest", "$2a$04$rTB91oOTf0wfMn20tQ4OyeK28g6oMAynWp1J2ck2Ll8k8ZNTNwMlW"], ["updated_at", "2015-02-03 12:27:21.894881"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (9.0ms)
  Rendered users/new.html.erb within layouts/application (25.7ms)
Completed 200 OK in 66ms (Views: 64.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:27:21 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:22.241002"], ["password_digest", "$2a$04$1UsfOBjcK6VZdhh7J/FnYOKrn2iiBe51r0e3i4B5PyUYVeB1Z6NAm"], ["updated_at", "2015-02-03 12:27:22.241002"], ["username", "Brian"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 255ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:27:22 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (7.2ms)
Completed 200 OK in 12ms (Views: 9.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (30.4ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:23.209434"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:27:23.209434"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (10.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:23.447449"], ["password_digest", "$2a$04$XL8ZjB8IesD/UmrrZ9fvt./bE1F87Wa8YH9O8jpXOmIDVQ8O16PCG"], ["updated_at", "2015-02-03 12:27:23.447449"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:23.555823"], ["password_digest", "$2a$04$2JdVxoQV64u1sunofWVMcOkTRtRyVHmYKb0UKDB1uC9/7DxRzP5eu"], ["updated_at", "2015-02-03 12:27:23.555823"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 12:27:23.559623"], ["score", 10], ["updated_at", "2015-02-03 12:27:23.559623"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:27:23.570972"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 12:27:23.577906"], ["score", 20], ["updated_at", "2015-02-03 12:27:23.577906"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-03 12:27:23.582298"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:23.691977"], ["password_digest", "$2a$04$jY3JtW/NAjwleASyJp0s7.ajrvXr.epFYqm459V/wu/MKG8te8hYa"], ["updated_at", "2015-02-03 12:27:23.691977"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:23.837340"], ["password_digest", "$2a$04$l.kGJyFl0A7eB9MhsSIwOO/KwKkC6UKrw8jjST0N8897zVeVYXF32"], ["updated_at", "2015-02-03 12:27:23.837340"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:23.848275"], ["password_digest", "$2a$04$4EyohYiezBWdpsQiaL3DQOq2wCkM/rzaSfJqA8Wi6ztShpoe5p/Qm"], ["updated_at", "2015-02-03 12:27:23.848275"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (23.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:23.852429"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:27:23.852429"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:27:23.888484"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:23.888484"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:27:23.934163"], ["score", 10], ["updated_at", "2015-02-03 12:27:23.934163"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.3ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (4.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:24.088694"], ["password_digest", "$2a$04$a0XRAsZxCx6MLypHFlKpKeGcicqkyAXuICxcv0d/c5ONrtjiIwoUG"], ["updated_at", "2015-02-03 12:27:24.088694"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.091895"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:27:24.091895"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:27:24.122909"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:24.122909"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:27:24.125578"], ["score", 10], ["updated_at", "2015-02-03 12:27:24.125578"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:24.157704"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:27:24.157704"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-03 12:27:24.172781"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:24.172781"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:27:24.180786"], ["score", 20], ["updated_at", "2015-02-03 12:27:24.180786"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.187079"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:27:24.187079"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (22.9ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-03 12:27:24.190148"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:24.190148"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-03 12:27:24.215855"], ["score", 15], ["updated_at", "2015-02-03 12:27:24.215855"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:24.222874"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:27:24.222874"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-03 12:27:24.224892"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:24.224892"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-03 12:27:24.227240"], ["score", 7], ["updated_at", "2015-02-03 12:27:24.227240"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.237425"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:27:24.237425"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-03 12:27:24.241185"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:24.241185"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-03 12:27:24.244189"], ["score", 9], ["updated_at", "2015-02-03 12:27:24.244189"], ["user_id", 1]]
  [1m[36m (62.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:27:24.345985"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:27:24.345985"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-03 12:27:24.350528"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:27:24.350528"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-03 12:27:24.363338"], ["score", 25], ["updated_at", "2015-02-03 12:27:24.363338"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (2.5ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (1.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.382174"], ["password_digest", "$2a$04$N0YdKBjETlw53g9ViQMgaeSrL9rhuzsBc2bnXXflUsNV8H0T6en2."], ["updated_at", "2015-02-03 12:27:24.382174"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.455152"], ["password_digest", "$2a$04$3Ytj6EOV2aGxFlSI6iGeL.1LgHE7ZgFpkOqFDE10ywWmQ1emzq13C"], ["updated_at", "2015-02-03 12:27:24.455152"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.464066"], ["password_digest", "$2a$04$cCJeBZ/rK5OLde63mWtMcOXbArxL2DEkvmWAGqmftIG/Qr3PFzPyW"], ["updated_at", "2015-02-03 12:27:24.464066"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.474899"], ["password_digest", "$2a$04$Vf1H10h3KEpDOrOkJVkvGuK3pakmgR6lFOHd2RD4qThXkjbA6KrKe"], ["updated_at", "2015-02-03 12:27:24.474899"], ["username", "Pekka"]]
  [1m[36m (2.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.485669"], ["password_digest", "$2a$04$H7225iBC5Hj55MV4BQulceYwEvMcsfOKxkVNtPfcpBSvHUAll5fyu"], ["updated_at", "2015-02-03 12:27:24.485669"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (74.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.498589"], ["password_digest", "$2a$04$6x.tLNZzYfh8rV9Q4rmoIOsNSPmwmNnX0Mh0Xb16weSwGPm2T9Gfa"], ["updated_at", "2015-02-03 12:27:24.498589"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.580868"], ["password_digest", "$2a$04$LmG.p6Xz163LJ1avqSisIO9Ji9S1YZl8yM/yZTkNuxXKMCaKPC6v2"], ["updated_at", "2015-02-03 12:27:24.580868"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:27:24.590455"], ["password_digest", "$2a$04$6/CDYJTmOek.qIawPElRi.vC66tRRRlOSnlFcW10mUkV.vHnrvLnC"], ["updated_at", "2015-02-03 12:27:24.590455"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:29:47 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.5ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (39.0ms)
  Rendered beers/new.html.erb within layouts/application (52.3ms)
Completed 200 OK in 149ms (Views: 121.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:29:47 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:47.966008"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:29:47.966008"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 9ms (ActiveRecord: 1.1ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:29:47 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (24.5ms)
Completed 500 Internal Server Error in 33ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___1202864957147422265_70185805552160'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___1202864957147422265_70185805552160'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (5.7ms)
  Rendered beers/new.html.erb within layouts/application (6.1ms)
Completed 200 OK in 10ms (Views: 8.1ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.4ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (5.1ms)
  Rendered beers/new.html.erb within layouts/application (5.5ms)
Completed 200 OK in 13ms (Views: 6.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.2ms)
Completed 200 OK in 23ms (Views: 21.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:48.258687"], ["name", "Koff"], ["updated_at", "2015-02-03 12:29:48.258687"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:48.261513"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:29:48.261513"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:48.264176"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:29:48.264176"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 21ms (Views: 20.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:48.341551"], ["name", "Koff"], ["updated_at", "2015-02-03 12:29:48.341551"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:48.343918"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:29:48.343918"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:48.347000"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:29:48.347000"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.8ms)
Completed 200 OK in 8ms (Views: 5.5ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.5ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (120.5ms)
Completed 200 OK in 142ms (Views: 136.8ms | ActiveRecord: 1.3ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:48.518263"], ["name", "Koff"], ["updated_at", "2015-02-03 12:29:48.518263"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:29:48.522050"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:48.522050"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:29:48.535059"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:48.535059"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:48.548261"], ["password_digest", "$2a$04$aplmxjqpV5Im/Fod.wa2DeKOgkMULL8Lwd.UxnGHQQTmh/ckZWxy."], ["updated_at", "2015-02-03 12:29:48.548261"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 20ms (Views: 19.2ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (29.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 46ms (Views: 42.2ms | ActiveRecord: 1.9ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (15.3ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 31ms (Views: 29.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:29:48.744105"], ["score", 15], ["updated_at", "2015-02-03 12:29:48.744105"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:29:48.753596"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 15ms (ActiveRecord: 1.3ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 18ms (Views: 15.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:48.806899"], ["name", "Koff"], ["updated_at", "2015-02-03 12:29:48.806899"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:29:48.810196"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:48.810196"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:29:48.813235"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:48.813235"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:48.822075"], ["password_digest", "$2a$04$Wr1aG1gSfAoOwklzJfZhxu6Arb4dDZpUU7bLTdsBYsdJfCvNyJgO2"], ["updated_at", "2015-02-03 12:29:48.822075"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (6.6ms)
Completed 200 OK in 13ms (Views: 12.1ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.4ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 13ms (Views: 10.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:29:48.901412"], ["score", 12], ["updated_at", "2015-02-03 12:29:48.901412"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:29:48.903781"], ["score", 15], ["updated_at", "2015-02-03 12:29:48.903781"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:29:48 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (1.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (15.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 29ms (Views: 26.3ms | ActiveRecord: 1.6ms)
  [1m[35m (5.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:49.197388"], ["password_digest", "$2a$04$vuNpbZABpBoEhu44OqILner4Pbl/Ka4QKsp4Kulv152nIP/eaY1z2"], ["updated_at", "2015-02-03 12:29:49.197388"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:29:49 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:29:49 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:29:49 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.4ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 14ms (Views: 11.3ms | ActiveRecord: 0.8ms)
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:49.294912"], ["password_digest", "$2a$04$RSu5l9CEcILj8FoFuDqRAuWJYiTu2W9GbbBS9CY1nHYorQqocUgIm"], ["updated_at", "2015-02-03 12:29:49.294912"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:29:49 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:29:49 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:29:49 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (2.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:49.874777"], ["password_digest", "$2a$04$q7t1EyJD1/FUluf1iNi05e5PLjo8997VpDRgiY5eEaUaUhrKW2KnC"], ["updated_at", "2015-02-03 12:29:49.874777"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:29:49 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (11.6ms)
  Rendered users/new.html.erb within layouts/application (21.1ms)
Completed 200 OK in 30ms (Views: 29.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:29:50 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:50.244029"], ["password_digest", "$2a$04$pS9iEsh6ltZKYju.5rHtg.7vjRyxoxFACBI8c8IPIXUxyaiCRcMJ."], ["updated_at", "2015-02-03 12:29:50.244029"], ["username", "Brian"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 212ms (ActiveRecord: 2.3ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:29:50 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (14.2ms)
Completed 200 OK in 18ms (Views: 16.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:50.676981"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:29:50.676981"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (35.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:50.874123"], ["password_digest", "$2a$04$K8SJ3cke0syPO2WrIlKlkeTemfB8qD1kTFUMpNe.GjWrpCp1y/MWu"], ["updated_at", "2015-02-03 12:29:50.874123"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:50.883629"], ["password_digest", "$2a$04$q4wGKJM1oMa6kr0KmQVBdu.F8auVNuM5fhgP92lOoxCQg.o9g3wy."], ["updated_at", "2015-02-03 12:29:50.883629"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 12:29:50.887440"], ["score", 10], ["updated_at", "2015-02-03 12:29:50.887440"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:29:50.890776"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 12:29:50.912759"], ["score", 20], ["updated_at", "2015-02-03 12:29:50.912759"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-03 12:29:50.914467"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:50.923779"], ["password_digest", "$2a$04$/f6fqXUtLEI7Jk0UixThmuJgOvCZNgBY9swggSQGJ1rKDtatAoEb."], ["updated_at", "2015-02-03 12:29:50.923779"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:50.943063"], ["password_digest", "$2a$04$ELcUKpQj.Qi0fYnvjGUFIeKODt30tBlWVcSPCmQFqTtoXcvyw6/KG"], ["updated_at", "2015-02-03 12:29:50.943063"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:51.080338"], ["password_digest", "$2a$04$XNxZEnuolQTA6vlfqHTbruNBGirSqgUJ8/PuecqLRDzeAtY3W17kC"], ["updated_at", "2015-02-03 12:29:51.080338"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.084672"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:29:51.084672"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:29:51.125130"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:51.125130"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:29:51.128599"], ["score", 10], ["updated_at", "2015-02-03 12:29:51.128599"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.3ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:51.162206"], ["password_digest", "$2a$04$ysh0HYeW6mJb6JE4KzLEOuZ4IclCa9xTAJR5hf08ETihSYWOkD8ya"], ["updated_at", "2015-02-03 12:29:51.162206"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.165090"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:29:51.165090"], ["year", 1900]]
  [1m[36m (124.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:29:51.293030"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:51.293030"]]
  [1m[35m (1.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:29:51.298961"], ["score", 10], ["updated_at", "2015-02-03 12:29:51.298961"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:51.303680"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:29:51.303680"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-03 12:29:51.305787"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:51.305787"]]
  [1m[36m (11.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:29:51.350658"], ["score", 20], ["updated_at", "2015-02-03 12:29:51.350658"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.353993"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:29:51.353993"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-03 12:29:51.356137"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:51.356137"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-03 12:29:51.368193"], ["score", 15], ["updated_at", "2015-02-03 12:29:51.368193"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:51.374010"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:29:51.374010"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-03 12:29:51.376394"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:51.376394"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-03 12:29:51.420420"], ["score", 7], ["updated_at", "2015-02-03 12:29:51.420420"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.423279"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:29:51.423279"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-03 12:29:51.425392"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:51.425392"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-03 12:29:51.430563"], ["score", 9], ["updated_at", "2015-02-03 12:29:51.430563"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:29:51.451771"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:29:51.451771"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-03 12:29:51.454522"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:29:51.454522"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-03 12:29:51.457605"], ["score", 25], ["updated_at", "2015-02-03 12:29:51.457605"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (8.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.515509"], ["password_digest", "$2a$04$UGUKX9TMZflpuZkFBk4EaOnRO1vHHil3nbdzXxjcIdEv7EABhHjc."], ["updated_at", "2015-02-03 12:29:51.515509"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.523507"], ["password_digest", "$2a$04$RFdnAa3FEcv9Qg2XTZnONeVWvFbBPf.ziZ6JvdPNYUMcw1a0JaINu"], ["updated_at", "2015-02-03 12:29:51.523507"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.535599"], ["password_digest", "$2a$04$wU4GomwAeVo8HZXQ1z4v2eKpoT5QwX2AwrdBprG3GWevqLN2uXaAG"], ["updated_at", "2015-02-03 12:29:51.535599"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.542945"], ["password_digest", "$2a$04$A9UPKyWgy6OQ/zdTvqWjEOtTYRK0rG8YVs8RAWWbgnmTyD9f9Yqlq"], ["updated_at", "2015-02-03 12:29:51.542945"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.553683"], ["password_digest", "$2a$04$FSHxLedcnfrIFYTbUZx8CeYidRJMcvhMm.hjfInvQoI6PKvUfmeum"], ["updated_at", "2015-02-03 12:29:51.553683"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.561436"], ["password_digest", "$2a$04$8VIALeNUdicpdiBzjxE9Ae8x2oyhb9ovsvo0revE6hi354KN0gS0e"], ["updated_at", "2015-02-03 12:29:51.561436"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.571910"], ["password_digest", "$2a$04$oSBW/MjW0mn1AbkwF.VpgeV93Fmi6lwm5/Y5/y9avVJ7vcZnuwC/q"], ["updated_at", "2015-02-03 12:29:51.571910"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:29:51.652357"], ["password_digest", "$2a$04$p/hp01T9fQqSe7ujlIBDN.7PJWmSkpzp5KqZ.LEuCFq2w2lmVPekW"], ["updated_at", "2015-02-03 12:29:51.652357"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:53:28 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (2.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (269.0ms)
  Rendered beers/new.html.erb within layouts/application (281.6ms)
Completed 200 OK in 410ms (Views: 355.4ms | ActiveRecord: 2.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:29.236559"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:53:29.236559"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 10ms (ActiveRecord: 2.1ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (27.1ms)
Completed 500 Internal Server Error in 35ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb__3861693277125919529_70114249449480'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb__3861693277125919529_70114249449480'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (3.8ms)
  Rendered beers/new.html.erb within layouts/application (4.2ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (5.6ms)
  Rendered beers/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 36ms (Views: 21.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.8ms)
Completed 200 OK in 18ms (Views: 16.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.9ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:29.493458"], ["name", "Koff"], ["updated_at", "2015-02-03 12:53:29.493458"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:29.497659"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:53:29.497659"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:29.505423"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:53:29.505423"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:29.570550"], ["name", "Koff"], ["updated_at", "2015-02-03 12:53:29.570550"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:29.576064"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:53:29.576064"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:29.579065"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:53:29.579065"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (10.3ms)
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.3ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.5ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (56.4ms)
Completed 200 OK in 69ms (Views: 64.9ms | ActiveRecord: 1.5ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:29.676372"], ["name", "Koff"], ["updated_at", "2015-02-03 12:53:29.676372"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:53:29.679534"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:29.679534"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:53:29.683054"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:29.683054"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:29.734327"], ["password_digest", "$2a$04$1EP9LQ7lv7vUUbPtDWWYROM8Bc/XGakoNDaVwen4IX/KBkP0tzip6"], ["updated_at", "2015-02-03 12:53:29.734327"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:29.757790"], ["password_digest", "$2a$04$nvaqAUZvXDoYqVkLmuuhuO5pq/Gb5WtvoPPXEs8HN9WimbqoJCWES"], ["updated_at", "2015-02-03 12:53:29.757790"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 18ms (Views: 17.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 16ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (29.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 46ms (Views: 42.3ms | ActiveRecord: 1.6ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (13.3ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 31ms (Views: 29.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:53:29.959101"], ["score", 15], ["updated_at", "2015-02-03 12:53:29.959101"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:53:29.967606"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 16ms (ActiveRecord: 0.9ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:53:29 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (28.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 36ms (Views: 33.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.041009"], ["name", "Koff"], ["updated_at", "2015-02-03 12:53:30.041009"], ["year", 1900]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:53:30.058515"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:30.058515"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:53:30.062614"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:30.062614"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.068733"], ["password_digest", "$2a$04$r3fgfT1uH5dtW9Xb7BMWdO4ta.jF7kQFlcnmDIRblN4wISV8Rkxyi"], ["updated_at", "2015-02-03 12:53:30.068733"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.088178"], ["password_digest", "$2a$04$B4gS6.F9NiGuhffuXoOZeuMZRbUcIzkwKtdpQ52kG.Bj6u/aOyvKW"], ["updated_at", "2015-02-03 12:53:30.088178"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (10.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 17ms (Views: 14.9ms | ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:53:30.150034"], ["score", 12], ["updated_at", "2015-02-03 12:53:30.150034"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:53:30.152815"], ["score", 15], ["updated_at", "2015-02-03 12:53:30.152815"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (9.9ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 77ms (Views: 75.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.251313"], ["name", "Koff"], ["updated_at", "2015-02-03 12:53:30.251313"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:53:30.254796"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:30.254796"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:53:30.257626"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:30.257626"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.293314"], ["password_digest", "$2a$04$jtwxoEJIIE7p7.18E10exu94rPON3lOICwV3x5r0b9YtB4YrSz6Uu"], ["updated_at", "2015-02-03 12:53:30.293314"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.312870"], ["password_digest", "$2a$04$SKIna7FG4XfsEo1VjOrH5.qB/l6As8MV5iIWNAhcUeW9gns8LrXm."], ["updated_at", "2015-02-03 12:53:30.312870"], ["username", "Riku"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 9.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:53:30.364332"], ["score", 12], ["updated_at", "2015-02-03 12:53:30.364332"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 12:53:30.366952"], ["score", 15], ["updated_at", "2015-02-03 12:53:30.366952"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:53:30.374054"], ["score", 13], ["updated_at", "2015-02-03 12:53:30.374054"], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 31ms (Views: 28.7ms | ActiveRecord: 0.7ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.428524"], ["password_digest", "$2a$04$lV2rKCE6Z33hVZJCcAm/xe.s7s46Ku2GmiCxQdk4XAi8Nti0gZqCS"], ["updated_at", "2015-02-03 12:53:30.428524"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (8.0ms)
Completed 200 OK in 11ms (Views: 10.2ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 29ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (11.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 17ms (Views: 14.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.521007"], ["password_digest", "$2a$04$Aco6Vi8Qt219qm0e9SQCaula6yCDpEV4V2tGc.R/0jc/W.dZ4FBi2"], ["updated_at", "2015-02-03 12:53:30.521007"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (6.4ms)
Completed 200 OK in 57ms (Views: 56.5ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.616714"], ["password_digest", "$2a$04$Gpfb7drEJzRHP8JnzDjgMe5PmTJTB2LVQtdC5QAPAHUVwlACuw4ju"], ["updated_at", "2015-02-03 12:53:30.616714"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (9.3ms)
  Rendered users/new.html.erb within layouts/application (16.2ms)
Completed 200 OK in 29ms (Views: 27.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.677222"], ["password_digest", "$2a$04$KlNWm/kJ/VcFT0GEZQCivO9qQrpEpPyWEQIRnyjin1O12IInbb5HK"], ["updated_at", "2015-02-03 12:53:30.677222"], ["username", "Brian"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:53:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mRating Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (4.2ms)
Completed 200 OK in 13ms (Views: 11.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.723984"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:53:30.723984"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (2.5ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.797537"], ["password_digest", "$2a$04$HGegABHWGui4NpFgxABJnem2lehIWB5Y8R6LDKOILhnVdRuCmRpGm"], ["updated_at", "2015-02-03 12:53:30.797537"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.807260"], ["password_digest", "$2a$04$3TqqQg8RLdDp9gsaVHVMVeH3evtJ3XBuX62hnfRek582Vyl5CNaF2"], ["updated_at", "2015-02-03 12:53:30.807260"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.813633"], ["score", 10], ["updated_at", "2015-02-03 12:53:30.813633"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 12:53:30.816171"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.818535"], ["score", 20], ["updated_at", "2015-02-03 12:53:30.818535"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 12:53:30.820265"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (1.7ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.844489"], ["password_digest", "$2a$04$0rwYsnX9hG9BKNt4dacYyu/pA7zWAPcfiKAXbN0GYZ2coNMznaFIq"], ["updated_at", "2015-02-03 12:53:30.844489"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.868312"], ["password_digest", "$2a$04$QM2YruZK95GInxoX7djCguiDzRFgZwHDzdJo1pK.ytYXUvf8u./ei"], ["updated_at", "2015-02-03 12:53:30.868312"], ["username", "Pekka"]]
  [1m[35m (3.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.882878"], ["password_digest", "$2a$04$UpEWp8LAWuVTcDCQYOtQ8uxpu30PqEzL8iSjkCkBV78UALaB4ePMy"], ["updated_at", "2015-02-03 12:53:30.882878"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.886013"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:53:30.886013"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:53:30.888242"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:30.888242"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:53:30.922526"], ["score", 10], ["updated_at", "2015-02-03 12:53:30.922526"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.934569"], ["password_digest", "$2a$04$TdCZK2RcT1V/v0rfMGV8muXJksA6tuU6NwMY3kSIPZ0H2TCB/bp2W"], ["updated_at", "2015-02-03 12:53:30.934569"], ["username", "Pekka"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.965193"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:53:30.965193"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:53:30.969358"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:30.969358"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:53:30.975922"], ["score", 10], ["updated_at", "2015-02-03 12:53:30.975922"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.978828"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:53:30.978828"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 12:53:30.980756"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:30.980756"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 12:53:30.983308"], ["score", 20], ["updated_at", "2015-02-03 12:53:30.983308"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:30.986230"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:53:30.986230"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 12:53:30.988259"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:30.988259"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 12:53:30.993296"], ["score", 15], ["updated_at", "2015-02-03 12:53:30.993296"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:30.996238"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:53:30.996238"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 12:53:30.998105"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:30.998105"]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 12:53:31.008259"], ["score", 7], ["updated_at", "2015-02-03 12:53:31.008259"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:31.014945"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:53:31.014945"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 12:53:31.018053"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:31.018053"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 12:53:31.033243"], ["score", 9], ["updated_at", "2015-02-03 12:53:31.033243"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:53:31.036179"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:53:31.036179"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 12:53:31.040899"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:53:31.040899"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 12:53:31.043756"], ["score", 25], ["updated_at", "2015-02-03 12:53:31.043756"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:31.067908"], ["password_digest", "$2a$04$OdklZUiYtnFme1g74zacaOyKwFcNgRpZsjgNK/SzHO4tkNAu3qEIq"], ["updated_at", "2015-02-03 12:53:31.067908"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:31.083894"], ["password_digest", "$2a$04$J6acpJ6Ho0bBf7L6KdhzfOOfpG2mnx4n.auaHc1ghRZpx4j/vRZ5S"], ["updated_at", "2015-02-03 12:53:31.083894"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:31.108732"], ["password_digest", "$2a$04$oDzTPWR63s1pCKsxksPp/OFSGGOZRKZkBOltFDxWDkR.S924KhmvK"], ["updated_at", "2015-02-03 12:53:31.108732"], ["username", "Pekka"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:31.121357"], ["password_digest", "$2a$04$WJH9D2GSHoI5augDckeSq.IW9x6PmsWLhBJhworDf/Qc4JAonG7nG"], ["updated_at", "2015-02-03 12:53:31.121357"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (4.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:31.141870"], ["password_digest", "$2a$04$xkmyLvLugKe2zRbfgGWTo.OF7EOzG2IITy27Xppy8TfH1HlnkI2xq"], ["updated_at", "2015-02-03 12:53:31.141870"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:31.149919"], ["password_digest", "$2a$04$U5gZjJTey8nuYvoi54pUNOHXsD3nZT0x66HuGTswEvI4kAvXKs.LS"], ["updated_at", "2015-02-03 12:53:31.149919"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:31.159085"], ["password_digest", "$2a$04$u.bNTalMKjPrFKAWUF8TfeSSUh7CIQbhVfy9RPY/lv2gzXYP0cYd2"], ["updated_at", "2015-02-03 12:53:31.159085"], ["username", "Pekka"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:53:31.179254"], ["password_digest", "$2a$04$.SyfC1w50IL5GUEmdeQUtuK8yVMOAbttpxCYGWgYlI4q4KVyMmQ5O"], ["updated_at", "2015-02-03 12:53:31.179254"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:54:12 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (37.6ms)
  Rendered beers/new.html.erb within layouts/application (84.1ms)
Completed 200 OK in 176ms (Views: 149.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:54:12 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:12.405895"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:54:12.405895"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:54:12 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (64.0ms)
Completed 500 Internal Server Error in 77ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb__4494373570514454713_70179278539980'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb__4494373570514454713_70179278539980'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:54:12 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.9ms)
  Rendered beers/new.html.erb within layouts/application (18.5ms)
Completed 200 OK in 41ms (Views: 39.7ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:54:12 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (4.7ms)
  Rendered beers/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 11ms (Views: 6.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:54:12 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 17ms (Views: 15.4ms | ActiveRecord: 0.6ms)
  [1m[36m (7.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:12.760551"], ["name", "Koff"], ["updated_at", "2015-02-03 12:54:12.760551"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:12.766965"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:54:12.766965"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:12.769925"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:54:12.769925"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:54:12 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.4ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (6.5ms)
Completed 200 OK in 12ms (Views: 10.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:12.810138"], ["name", "Koff"], ["updated_at", "2015-02-03 12:54:12.810138"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:12.812678"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:54:12.812678"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:12.815041"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:54:12.815041"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:54:12 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 9ms (Views: 7.8ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:54:12 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.5ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (67.9ms)
Completed 200 OK in 93ms (Views: 89.3ms | ActiveRecord: 1.4ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:12.935343"], ["name", "Koff"], ["updated_at", "2015-02-03 12:54:12.935343"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:54:12.939587"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:12.939587"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:54:12.943999"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:12.943999"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:12.958133"], ["password_digest", "$2a$04$SpTmrw15FG04eUs.WsL8PO2TMEAmnC/vjMigrPZ9ZV68dQWr1JARm"], ["updated_at", "2015-02-03 12:54:12.958133"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:12.965018"], ["password_digest", "$2a$04$iEX.bHET5ogGdtihKuI.gOWsH2d2Izk0UvP62b8ey9lB1FjX.qKI2"], ["updated_at", "2015-02-03 12:54:12.965018"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:54:12 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 18ms (Views: 17.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (35.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 52ms (Views: 48.3ms | ActiveRecord: 1.8ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (13.3ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 32ms (Views: 30.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:54:13.193422"], ["score", 15], ["updated_at", "2015-02-03 12:54:13.193422"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:54:13.200556"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 13ms (ActiveRecord: 0.9ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (26.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 33ms (Views: 30.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:13.261892"], ["name", "Koff"], ["updated_at", "2015-02-03 12:54:13.261892"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:54:13.269509"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:13.269509"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:54:13.272775"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:13.272775"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:13.281599"], ["password_digest", "$2a$04$jt3y0UgNPQ2FQDpaqmy/jODO3wdxcbHCUQJQdvhKyazpF8diIO8iC"], ["updated_at", "2015-02-03 12:54:13.281599"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.9ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:13.317988"], ["password_digest", "$2a$04$yBLiUUevQ/QDwIQy3cHwcey0oZv2PrP5e6OcMn4gdSa5SqwuiZmsW"], ["updated_at", "2015-02-03 12:54:13.317988"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.2ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 16ms (Views: 14.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:54:13.372911"], ["score", 12], ["updated_at", "2015-02-03 12:54:13.372911"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:54:13.378651"], ["score", 15], ["updated_at", "2015-02-03 12:54:13.378651"], ["user_id", 1]]
  [1m[35m (1.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (7.1ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 26ms (Views: 24.8ms | ActiveRecord: 0.9ms)
  [1m[35m (17.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:13.441663"], ["name", "Koff"], ["updated_at", "2015-02-03 12:54:13.441663"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:54:13.444592"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:13.444592"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:54:13.448388"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:13.448388"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:13.461589"], ["password_digest", "$2a$04$k763asGvJ.0F7yqrAsB2huQuriJD8XgmBrJbAtsnQc/DsAdAl1M8q"], ["updated_at", "2015-02-03 12:54:13.461589"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:13.466666"], ["password_digest", "$2a$04$UaNsI1wZzzqltaEBdhhsne6Sy0hBc9effGZNa0F4zbh2EtFFR8lI2"], ["updated_at", "2015-02-03 12:54:13.466666"], ["username", "Riku"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 16.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:54:13.543079"], ["score", 12], ["updated_at", "2015-02-03 12:54:13.543079"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 12:54:13.546118"], ["score", 15], ["updated_at", "2015-02-03 12:54:13.546118"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:54:13.549734"], ["score", 13], ["updated_at", "2015-02-03 12:54:13.549734"], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 22ms (Views: 18.7ms | ActiveRecord: 0.7ms)
  [1m[36m (6.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:13.599238"], ["password_digest", "$2a$04$368fRMLa8Sm.LLj8szN89epUItAXyfAai84PblRuYcIi4ZtZ042F6"], ["updated_at", "2015-02-03 12:54:13.599238"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 19ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 8.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:13.683946"], ["password_digest", "$2a$04$Eap5.gDNi0Ks0FUJg6Tth.rHbZ7KSlb/5vmvc0qR9NjRB7AuQZsqi"], ["updated_at", "2015-02-03 12:54:13.683946"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 3ms (Views: 2.9ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:13.748253"], ["password_digest", "$2a$04$JRX3S2pLc85YIazjlcCyOut5lqG.ETWUdWVGhPs6igOsKln.L8vzC"], ["updated_at", "2015-02-03 12:54:13.748253"], ["username", "Pekka"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (6.9ms)
  Rendered users/new.html.erb within layouts/application (13.5ms)
Completed 200 OK in 33ms (Views: 32.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (1.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:13.827213"], ["password_digest", "$2a$04$KPk/UGtknNCwuw8MOMUT7e91mPca5d.Ej.vImj9Zu/DjmEBtFA0lq"], ["updated_at", "2015-02-03 12:54:13.827213"], ["username", "Brian"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 32ms (ActiveRecord: 1.9ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:54:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mBeerClub Exists (0.2ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:13.879902"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:54:13.879902"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:13.954099"], ["password_digest", "$2a$04$4zkaLnp3tZZPSlY5t.DT2.pPvb7qIkf28ULXRfiZ8ge8EKLaOHKjK"], ["updated_at", "2015-02-03 12:54:13.954099"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:13.973840"], ["password_digest", "$2a$04$sCN/xZs57jDlQ4a4PMyBcO0n297yHssqEtfwxWe3jDzBzKCRr2CAO"], ["updated_at", "2015-02-03 12:54:13.973840"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:13.979935"], ["score", 10], ["updated_at", "2015-02-03 12:54:13.979935"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 12:54:13.982904"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:13.987582"], ["score", 20], ["updated_at", "2015-02-03 12:54:13.987582"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 12:54:13.990613"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (5.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.025847"], ["password_digest", "$2a$04$qVrQ2/0O8YNQPLIl9px/GOW2afF5ojHR8tbNp9Xlh.BLnTfZ/rzue"], ["updated_at", "2015-02-03 12:54:14.025847"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.056093"], ["password_digest", "$2a$04$sH7rNNwONhAeQ.v4TITr9OUvXztVW0KC/9KDl76iVSXnFYd7rsDBi"], ["updated_at", "2015-02-03 12:54:14.056093"], ["username", "Pekka"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:14.079500"], ["password_digest", "$2a$04$Mmn/iYg/lYgubmbTjs6Q1eTWx2Lrc8rbGBIBJJaSEXWsd5jwgAAIm"], ["updated_at", "2015-02-03 12:54:14.079500"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.084404"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:54:14.084404"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:54:14.087554"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:14.087554"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:54:14.091926"], ["score", 10], ["updated_at", "2015-02-03 12:54:14.091926"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (7.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:14.115702"], ["password_digest", "$2a$04$6FpeEGWstQm0pU3szmME.OYA2./qBdkuA51nx3vXzUnJx4HOZrGgW"], ["updated_at", "2015-02-03 12:54:14.115702"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.119989"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:54:14.119989"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:54:14.123015"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:14.123015"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:54:14.127168"], ["score", 10], ["updated_at", "2015-02-03 12:54:14.127168"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:14.154381"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:54:14.154381"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 12:54:14.158728"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:14.158728"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 12:54:14.161565"], ["score", 20], ["updated_at", "2015-02-03 12:54:14.161565"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.167268"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:54:14.167268"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 12:54:14.169118"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:14.169118"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 12:54:14.180154"], ["score", 15], ["updated_at", "2015-02-03 12:54:14.180154"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:14.185134"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:54:14.185134"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 12:54:14.192921"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:14.192921"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 12:54:14.196154"], ["score", 7], ["updated_at", "2015-02-03 12:54:14.196154"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.198389"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:54:14.198389"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 12:54:14.200210"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:14.200210"]]
  [1m[36m (139.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 12:54:14.342499"], ["score", 9], ["updated_at", "2015-02-03 12:54:14.342499"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:54:14.344829"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:54:14.344829"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 12:54:14.346433"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:54:14.346433"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 12:54:14.349679"], ["score", 25], ["updated_at", "2015-02-03 12:54:14.349679"], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.378035"], ["password_digest", "$2a$04$f70G7YKsxMZXjz.UY5PKteXfq7.tWWQFmm8uC5/I/.EMeSNQMiSbm"], ["updated_at", "2015-02-03 12:54:14.378035"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.386379"], ["password_digest", "$2a$04$puI/Jw7fu4wVlRQGzHlZj.WyBc3JhnI7EYFhR/pmi4Aq7b1CZgkr."], ["updated_at", "2015-02-03 12:54:14.386379"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.394517"], ["password_digest", "$2a$04$is8QeFj66acuFJ/KaTaHCuJaGTF13j8ho3gz/5QijEQEjx8a40NfG"], ["updated_at", "2015-02-03 12:54:14.394517"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.405627"], ["password_digest", "$2a$04$5EAB/GfBrotnHwUXyAR8IeVcmj8tftrIQ5yLwrP3w17IFwta7R1kG"], ["updated_at", "2015-02-03 12:54:14.405627"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (3.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.436101"], ["password_digest", "$2a$04$Yv5G8Jt0BIWdAdj1HPeFn.THcKEXTZZ/Oxy1zy.uBsrkjauyOsr5G"], ["updated_at", "2015-02-03 12:54:14.436101"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.452058"], ["password_digest", "$2a$04$6gB93Ri6Hm3JC5CnqXtHPuqyGf/C6P2SOdhKWSp86m6rOD6MLBZw2"], ["updated_at", "2015-02-03 12:54:14.452058"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.459825"], ["password_digest", "$2a$04$QFU.5ZPTibPrAdV6jxNciupTOgpRb6V.J41yFzXcMB0pkVRDtx28u"], ["updated_at", "2015-02-03 12:54:14.459825"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:54:14.468469"], ["password_digest", "$2a$04$sr3rdjQHYFtOFw4.KYSBm.gAgU6OQ3y10Y16oc3rITsK8QjK14Rbu"], ["updated_at", "2015-02-03 12:54:14.468469"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (34.1ms)
  Rendered beers/new.html.erb within layouts/application (52.2ms)
Completed 200 OK in 140ms (Views: 114.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:34.339290"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:55:34.339290"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (41.3ms)
Completed 500 Internal Server Error in 50ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb__3576487282261178980_70154746361820'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb__3576487282261178980_70154746361820'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (1.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (8.5ms)
  Rendered beers/new.html.erb within layouts/application (9.1ms)
Completed 200 OK in 18ms (Views: 16.6ms | ActiveRecord: 1.1ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (4.7ms)
  Rendered beers/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 22ms (Views: 8.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (11.3ms)
Completed 200 OK in 29ms (Views: 23.6ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:34.634193"], ["name", "Koff"], ["updated_at", "2015-02-03 12:55:34.634193"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:34.639499"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:55:34.639499"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:34.643025"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:55:34.643025"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (9.0ms)
Completed 200 OK in 12ms (Views: 10.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:34.700617"], ["name", "Koff"], ["updated_at", "2015-02-03 12:55:34.700617"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:34.708509"], ["name", "Karjala"], ["updated_at", "2015-02-03 12:55:34.708509"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:34.711253"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 12:55:34.711253"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (1.1ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (54.5ms)
Completed 200 OK in 107ms (Views: 102.6ms | ActiveRecord: 1.9ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:34.843677"], ["name", "Koff"], ["updated_at", "2015-02-03 12:55:34.843677"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:55:34.846700"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:34.846700"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:55:34.849280"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:34.849280"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:34.865533"], ["password_digest", "$2a$04$T3U1Kmro6SM05IkcEP34Nud6INnbl1Q/INjEpa5Y0BUHrSQuMFy3."], ["updated_at", "2015-02-03 12:55:34.865533"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:34.871980"], ["password_digest", "$2a$04$gsKhAojCJc82vNl5371h3euLsVxM72XrPLRKrJxwLIZ.Lharn3KZq"], ["updated_at", "2015-02-03 12:55:34.871980"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 25ms (Views: 23.4ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 12ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:55:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (33.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 49ms (Views: 45.5ms | ActiveRecord: 2.3ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (16.6ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 33ms (Views: 31.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:55:35.151779"], ["score", 15], ["updated_at", "2015-02-03 12:55:35.151779"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 12:55:35.160209"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 14ms (ActiveRecord: 1.5ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (13.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 17.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.7ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.208192"], ["name", "Koff"], ["updated_at", "2015-02-03 12:55:35.208192"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:55:35.211280"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:35.211280"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:55:35.213915"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:35.213915"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.220899"], ["password_digest", "$2a$04$RcXmMyL3blOA0BtaAWnRruhHyefU9KJbHdNrU0LWrP7aDf3eAhQd6"], ["updated_at", "2015-02-03 12:55:35.220899"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.226795"], ["password_digest", "$2a$04$WMGYJVtRGWwJHQOsH8PCz.U9yZyjzUIAR7rbajnlEOIT/7PYh5B0K"], ["updated_at", "2015-02-03 12:55:35.226795"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 14ms (Views: 11.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 12:55:35.306548"], ["score", 12], ["updated_at", "2015-02-03 12:55:35.306548"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 12:55:35.309220"], ["score", 15], ["updated_at", "2015-02-03 12:55:35.309220"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (7.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 21ms (Views: 19.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.348837"], ["name", "Koff"], ["updated_at", "2015-02-03 12:55:35.348837"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:55:35.352654"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:35.352654"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 12:55:35.356063"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:35.356063"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.363870"], ["password_digest", "$2a$04$3iyXDuFD7A1Eb0CkAE2af.95a3mGc0wyB5E2mA.yd03aqITGaKckG"], ["updated_at", "2015-02-03 12:55:35.363870"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.374856"], ["password_digest", "$2a$04$OEiSpL8FAv3QEAavJw5.G.GK5Z.56pFCL4Prq.uH7DwbiArtAne7e"], ["updated_at", "2015-02-03 12:55:35.374856"], ["username", "Riku"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.2ms)
  [1m[36mCACHE (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 9.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:55:35.444121"], ["score", 12], ["updated_at", "2015-02-03 12:55:35.444121"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 12:55:35.446954"], ["score", 15], ["updated_at", "2015-02-03 12:55:35.446954"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:55:35.451491"], ["score", 13], ["updated_at", "2015-02-03 12:55:35.451491"], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.4ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (11.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 18ms (Views: 15.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.486685"], ["password_digest", "$2a$04$Hhj1acFaHI0kD.M/AWsgO.n.G3t5OgU4uX4jFu2doMvZkkOZvS8Cu"], ["updated_at", "2015-02-03 12:55:35.486685"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 31ms (Views: 27.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.553599"], ["password_digest", "$2a$04$mDq3eB0LmNH6zAloRpx.5.bWnRI1TaJNVxnPfyyOxlH7vxvHHCeDC"], ["updated_at", "2015-02-03 12:55:35.553599"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.611191"], ["password_digest", "$2a$04$XqbJA3b76e3Dgy7tcM4J3OJg64s68zMbYTKab6BCPEun3TiIQxIIC"], ["updated_at", "2015-02-03 12:55:35.611191"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (6.3ms)
  Rendered users/new.html.erb within layouts/application (13.8ms)
Completed 200 OK in 23ms (Views: 22.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.666453"], ["password_digest", "$2a$04$eUbhS6tV7qOTSrqgzJZrKO.SxTzjR57T0VyGqfroGelrL15sOSpiO"], ["updated_at", "2015-02-03 12:55:35.666453"], ["username", "Brian"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 14:55:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mBeerClub Exists (0.4ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (5.4ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (4.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.746373"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 12:55:35.746373"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (1.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.832209"], ["password_digest", "$2a$04$YG/2u6Ql0kC0ysNoPVm1HO5vXh4laND2JjQ8mGStvpcnt0BP7pfcS"], ["updated_at", "2015-02-03 12:55:35.832209"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.845821"], ["password_digest", "$2a$04$Ud.soosUUcuAEXB3Nc1zzuwly/G/hEaS/YL/qlHUR7Op1FTW8Ej0C"], ["updated_at", "2015-02-03 12:55:35.845821"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.849486"], ["score", 10], ["updated_at", "2015-02-03 12:55:35.849486"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 12:55:35.853337"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.855630"], ["score", 20], ["updated_at", "2015-02-03 12:55:35.855630"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 12:55:35.857298"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.893838"], ["password_digest", "$2a$04$U6WqgH.0Ax402seIBRvjLuPQT6yvdo.xKmevyqv5qdZ7pETlZWz2W"], ["updated_at", "2015-02-03 12:55:35.893838"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.904744"], ["password_digest", "$2a$04$4nS8zn7yR.UF/o7SCPMUF.UYer.vsE9ePRQmpsU1d5cBhUvo01Au2"], ["updated_at", "2015-02-03 12:55:35.904744"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.912995"], ["password_digest", "$2a$04$LfgeUsb.wKmJmu2q5Q4rEeVk7rmG3kcwBPLj9DtX/aex7QtRJlezG"], ["updated_at", "2015-02-03 12:55:35.912995"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (13.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.915832"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:55:35.915832"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (8.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:55:35.939570"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:35.939570"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:55:35.942479"], ["score", 10], ["updated_at", "2015-02-03 12:55:35.942479"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.4ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.953676"], ["password_digest", "$2a$04$HVOVs8HRqdqmESDi/SPx.uBj86aLuUYI9TXB4KgQ2KDYEYJQWy9My"], ["updated_at", "2015-02-03 12:55:35.953676"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.956864"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:55:35.956864"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 12:55:35.960380"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:35.960380"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 12:55:35.962923"], ["score", 10], ["updated_at", "2015-02-03 12:55:35.962923"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.966327"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:55:35.966327"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 12:55:35.968215"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:35.968215"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 12:55:35.970646"], ["score", 20], ["updated_at", "2015-02-03 12:55:35.970646"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:35.973278"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:55:35.973278"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 12:55:35.975063"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:35.975063"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 12:55:35.977863"], ["score", 15], ["updated_at", "2015-02-03 12:55:35.977863"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:35.981707"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:55:35.981707"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 12:55:35.983439"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:35.983439"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 12:55:35.985645"], ["score", 7], ["updated_at", "2015-02-03 12:55:35.985645"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:36.001184"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:55:36.001184"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 12:55:36.003784"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:36.003784"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 12:55:36.006261"], ["score", 9], ["updated_at", "2015-02-03 12:55:36.006261"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 12:55:36.008977"], ["name", "anonymous"], ["updated_at", "2015-02-03 12:55:36.008977"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 12:55:36.010973"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 12:55:36.010973"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 12:55:36.013373"], ["score", 25], ["updated_at", "2015-02-03 12:55:36.013373"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:36.023772"], ["password_digest", "$2a$04$W3.ZiHdpfjEwvFSDBFDYdO1AZKW8s8Gp2fnpSYN1iiZg8Z/2qcEoy"], ["updated_at", "2015-02-03 12:55:36.023772"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:36.033112"], ["password_digest", "$2a$04$oLUoVdwQt2GkJPTzUPCLrO/1HXbH6z3gtre0Fpl.NVYWwTj1koPuC"], ["updated_at", "2015-02-03 12:55:36.033112"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:36.048341"], ["password_digest", "$2a$04$aIsTW/jCz3Ey6NlxwpgZ5OFgLoHwDBRQVaZXvrgRHngkR1dIABvi2"], ["updated_at", "2015-02-03 12:55:36.048341"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:36.078286"], ["password_digest", "$2a$04$K5443bPSue3WnUuF.2zJHOejlrG3Sm1uOtY00fF6qhhG4LHIhgHV2"], ["updated_at", "2015-02-03 12:55:36.078286"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:36.085516"], ["password_digest", "$2a$04$Z2PNk2erNPsCVUPYmfYjWOslrSgBaUty2.2fr8K.QBXvqhiwRT7Wy"], ["updated_at", "2015-02-03 12:55:36.085516"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:36.094665"], ["password_digest", "$2a$04$AypwyFQ2EY7gw6HMoIiw9OQBvhnW4HCJOjR8pKCwZnkHvib78exGa"], ["updated_at", "2015-02-03 12:55:36.094665"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:36.102335"], ["password_digest", "$2a$04$7Tj5D2dDFtZiwSM6LYzyE.aYr6BHmWlJdFrnEU4spYuQZ4JTz5jXm"], ["updated_at", "2015-02-03 12:55:36.102335"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 12:55:36.111493"], ["password_digest", "$2a$04$/KFAjqQyVSKUTmIUi5bEv.JgMzBQDw0glCPpgboFWvqVOEFOR6rFG"], ["updated_at", "2015-02-03 12:55:36.111493"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (38.5ms)
  Rendered beers/new.html.erb within layouts/application (50.4ms)
Completed 200 OK in 150ms (Views: 123.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:12.247534"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 13:04:12.247534"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.7ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (64.5ms)
Completed 500 Internal Server Error in 74ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb__4060448653786132459_70294323848720'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb__4060448653786132459_70294323848720'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (5.2ms)
  Rendered beers/new.html.erb within layouts/application (5.5ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (41.1ms)
  Rendered beers/new.html.erb within layouts/application (41.5ms)
Completed 200 OK in 48ms (Views: 43.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.2ms)
Completed 200 OK in 27ms (Views: 25.4ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:12.570114"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:12.570114"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:12.572712"], ["name", "Karjala"], ["updated_at", "2015-02-03 13:04:12.572712"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:12.575007"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 13:04:12.575007"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (7.8ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.2ms)
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:12.610793"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:12.610793"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:12.613698"], ["name", "Karjala"], ["updated_at", "2015-02-03 13:04:12.613698"], ["year", 1898]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:12.617843"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 13:04:12.617843"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (19.7ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.3ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (32.4ms)
Completed 200 OK in 35ms (Views: 14.5ms | ActiveRecord: 19.9ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.7ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (55.6ms)
Completed 200 OK in 73ms (Views: 69.1ms | ActiveRecord: 1.6ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:12.747894"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:12.747894"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:12.751623"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:12.751623"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:12.754447"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:12.754447"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:12.772554"], ["password_digest", "$2a$04$HmUWa304ho1HY33NrSkuVeDvDJqYpgsxhMyimyUfpMIjaP6JK3YOm"], ["updated_at", "2015-02-03 13:04:12.772554"], ["username", "Pekka"]]
  [1m[36m (1.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:12.815038"], ["password_digest", "$2a$04$DpzMPGTF2YUK8YXoES.L1eEIJc1RQPJS2sC0Z0qqMUKtgjOjG498W"], ["updated_at", "2015-02-03 13:04:12.815038"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 15ms (Views: 14.4ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (37.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 60ms (Views: 55.9ms | ActiveRecord: 2.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 15:04:12 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (15.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 38ms (Views: 35.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:04:13.008785"], ["score", 15], ["updated_at", "2015-02-03 13:04:13.008785"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 13:04:13.016700"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 22ms (ActiveRecord: 0.9ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.6ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (16.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 23ms (Views: 20.4ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.068514"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:13.068514"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:13.071215"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:13.071215"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:13.073728"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:13.073728"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.081203"], ["password_digest", "$2a$04$BzgFNCPqxSCP0fFKRS6erumHKpCj25khfWBhDOz/VZiS3d6OH41Hy"], ["updated_at", "2015-02-03 13:04:13.081203"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.087603"], ["password_digest", "$2a$04$4SuDu1Xg5Hdxw7EjFIj8fuq0X/hMmLmnFDWwvQm3zk.eP8HeSxnAa"], ["updated_at", "2015-02-03 13:04:13.087603"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 15ms (Views: 12.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 13:04:13.168748"], ["score", 12], ["updated_at", "2015-02-03 13:04:13.168748"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 13:04:13.172026"], ["score", 15], ["updated_at", "2015-02-03 13:04:13.172026"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (6.5ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 18.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:13.207946"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:13.207946"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:13.212267"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:13.212267"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:13.215187"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:13.215187"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:13.220574"], ["password_digest", "$2a$04$VclG8GOW9.SfxMatlLB1HeJcWfbJnBok7yUKIxSyK1CbkfPXoGvHC"], ["updated_at", "2015-02-03 13:04:13.220574"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:13.236054"], ["password_digest", "$2a$04$8vrHJsV1bTF26csF3liXhO2gXkEDprN2e7ANQFlKYKhNUEDEhmR0y"], ["updated_at", "2015-02-03 13:04:13.236054"], ["username", "Riku"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 15ms (Views: 12.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:04:13.292380"], ["score", 12], ["updated_at", "2015-02-03 13:04:13.292380"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 13:04:13.295360"], ["score", 15], ["updated_at", "2015-02-03 13:04:13.295360"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:04:13.297688"], ["score", 13], ["updated_at", "2015-02-03 13:04:13.297688"], ["user_id", 2]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (9.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 18ms (Views: 15.5ms | ActiveRecord: 0.9ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.340439"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:13.340439"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:13.343810"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:13.343810"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:13.346473"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:13.346473"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.353443"], ["password_digest", "$2a$04$sxZGlyOSElH.kiwVsW8l3.1K.QcZYl.hWqqj96olHo1ODEJatSvqG"], ["updated_at", "2015-02-03 13:04:13.353443"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.365299"], ["password_digest", "$2a$04$HSPwzXu0dlDJe.4GMYspAObBB07aynV3x8pTKQUgiDJ.B1ok4mEcy"], ["updated_at", "2015-02-03 13:04:13.365299"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (12.2ms)
Completed 200 OK in 22ms (Views: 21.1ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 14ms (Views: 11.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 13:04:13.431014"], ["score", 12], ["updated_at", "2015-02-03 13:04:13.431014"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.444125"], ["password_digest", "$2a$04$OWj87BD9Lx3IV6Q/UNvaX.nbDLZBnu4uqPB0p5WUUw3wAQLy5oEbW"], ["updated_at", "2015-02-03 13:04:13.444125"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.9ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (27.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 34ms (Views: 32.5ms | ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:13.522775"], ["password_digest", "$2a$04$3vuY5PjmzJTTKIWK7bHoDevof.lTW4jg./xMYbRsH6dKOkNE5NmyS"], ["updated_at", "2015-02-03 13:04:13.522775"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.9ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (26.8ms)
Completed 200 OK in 35ms (Views: 34.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.608708"], ["password_digest", "$2a$04$9eIlU3RWV2KAsq3IXzcgXu.TybDMEtnzVrJ5t0WmJT41NCqQ0imci"], ["updated_at", "2015-02-03 13:04:13.608708"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (7.4ms)
  Rendered users/new.html.erb within layouts/application (17.8ms)
Completed 200 OK in 34ms (Views: 33.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:13.682669"], ["password_digest", "$2a$04$eoXvvYRAv.tDFqO8bfVOc.IaeaCK3x1N8LTbNdIttisYc2bnOyTnC"], ["updated_at", "2015-02-03 13:04:13.682669"], ["username", "Brian"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 21ms (ActiveRecord: 1.3ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 15:04:13 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (4.5ms)
Completed 200 OK in 10ms (Views: 6.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:13.745537"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 13:04:13.745537"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:13.865665"], ["password_digest", "$2a$04$C0jNqZIXXLSzZiSrSBW05OnWAZxsH9s8gvTxSDZBFfEQs9DPL0/UC"], ["updated_at", "2015-02-03 13:04:13.865665"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:13.879846"], ["password_digest", "$2a$04$kwMlkFfBWUSeV1.is9LyZu5lgVfAxdion4srUY0NcDm6aFAJ6ekA6"], ["updated_at", "2015-02-03 13:04:13.879846"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 13:04:13.882807"], ["score", 10], ["updated_at", "2015-02-03 13:04:13.882807"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 13:04:13.885310"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 13:04:13.887241"], ["score", 20], ["updated_at", "2015-02-03 13:04:13.887241"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-03 13:04:13.888773"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (4.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.932845"], ["password_digest", "$2a$04$VingrRPrQ0iWlJA091r7lOvzCtQuSiC4uRrbX3kc4H7k3JmNmbuea"], ["updated_at", "2015-02-03 13:04:13.932845"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.947518"], ["password_digest", "$2a$04$JiSUCXhQulTIWqA58sbko.4lb.cehzG1.g2hG1swehpoDsOeG1o4C"], ["updated_at", "2015-02-03 13:04:13.947518"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:13.956304"], ["password_digest", "$2a$04$MLINPQ7lGE/QZ5yR1unZkOqjfUThh6scH1p.wXVLVfENPT6S0BzYm"], ["updated_at", "2015-02-03 13:04:13.956304"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:13.960755"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:13.960755"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:13.963842"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:13.963842"]]
  [1m[35m (6.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 13:04:13.997716"], ["score", 10], ["updated_at", "2015-02-03 13:04:13.997716"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.5ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:14.013686"], ["password_digest", "$2a$04$AdY32j71HRohlD2MPUmVBe9JTzaJLa7stqf3heXG0f/eW2FKpADWa"], ["updated_at", "2015-02-03 13:04:14.013686"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.018165"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:14.018165"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:14.020970"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:14.020970"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 13:04:14.023916"], ["score", 10], ["updated_at", "2015-02-03 13:04:14.023916"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:14.027210"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:14.027210"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-03 13:04:14.029005"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:14.029005"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 13:04:14.031887"], ["score", 20], ["updated_at", "2015-02-03 13:04:14.031887"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.034398"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:14.034398"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-03 13:04:14.036178"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:14.036178"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-03 13:04:14.038305"], ["score", 15], ["updated_at", "2015-02-03 13:04:14.038305"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:14.067060"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:14.067060"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-03 13:04:14.070269"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:14.070269"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-03 13:04:14.072799"], ["score", 7], ["updated_at", "2015-02-03 13:04:14.072799"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.082814"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:14.082814"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-03 13:04:14.086263"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:14.086263"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-03 13:04:14.088740"], ["score", 9], ["updated_at", "2015-02-03 13:04:14.088740"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:14.092667"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:14.092667"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-03 13:04:14.097317"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:14.097317"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-03 13:04:14.100544"], ["score", 25], ["updated_at", "2015-02-03 13:04:14.100544"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.2ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.128861"], ["password_digest", "$2a$04$Fjez7BzB3l.xiN4DAA98ZeqSJESSYSL1YuVsRQLPObZhbk5oB643u"], ["updated_at", "2015-02-03 13:04:14.128861"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.136636"], ["password_digest", "$2a$04$e8.Qs7rJCieAi4qpL5ZVfe/ZiojwzxQQC0wyS93UXNM4rTyjyT3wS"], ["updated_at", "2015-02-03 13:04:14.136636"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.162268"], ["password_digest", "$2a$04$06coBlCuondIyoAY4lXMjub.zDJTIPXJIgjfrD54HpgchXBGQv9Hi"], ["updated_at", "2015-02-03 13:04:14.162268"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.170299"], ["password_digest", "$2a$04$inLLEXDmzsjVV76Hp8c1EOmL6mkrsxc006ZhdK1fn/MM7Qxpktuhy"], ["updated_at", "2015-02-03 13:04:14.170299"], ["username", "Pekka"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (7.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.186756"], ["password_digest", "$2a$04$AJtIBesLk/q0Mb7.ottQButCHekM9SRX4wk/Kh9a.anWiIT.OlLRy"], ["updated_at", "2015-02-03 13:04:14.186756"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.197034"], ["password_digest", "$2a$04$MPjIpWQoLx1zV9zD9QSCvOqjGt/NjScmgYMxgTlABTKO.T3wINosq"], ["updated_at", "2015-02-03 13:04:14.197034"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (21.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.239227"], ["password_digest", "$2a$04$BPCobKxEKXUHTR9KQnOSbOglkvQvAWOtFti3xmLrQuAL8Y5YminCm"], ["updated_at", "2015-02-03 13:04:14.239227"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (12.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:14.263870"], ["password_digest", "$2a$04$GZSW10w1/MC.737lUfzoDu20u5XHR3Qz8hoeF34B/Jj4/dzIUvHnu"], ["updated_at", "2015-02-03 13:04:14.263870"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (36.7ms)
  Rendered beers/new.html.erb within layouts/application (52.3ms)
Completed 200 OK in 165ms (Views: 136.1ms | ActiveRecord: 1.4ms)
  [1m[35m (8.8ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:37.445276"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 13:04:37.445276"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 12ms (ActiveRecord: 1.9ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.3ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (31.3ms)
Completed 500 Internal Server Error in 92ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb__2631180835567577116_70238279555540'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb__2631180835567577116_70238279555540'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (7.8ms)
  Rendered beers/new.html.erb within layouts/application (8.2ms)
Completed 200 OK in 11ms (Views: 9.9ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (5.4ms)
  Rendered beers/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 13ms (Views: 8.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 16ms (Views: 14.5ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:37.743769"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:37.743769"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:37.746876"], ["name", "Karjala"], ["updated_at", "2015-02-03 13:04:37.746876"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:37.750159"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 13:04:37.750159"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (5.3ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (9.6ms)
Completed 200 OK in 12ms (Views: 6.1ms | ActiveRecord: 5.4ms)
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:37.782096"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:37.782096"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:37.784306"], ["name", "Karjala"], ["updated_at", "2015-02-03 13:04:37.784306"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:37.786430"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 13:04:37.786430"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.8ms)
Completed 200 OK in 11ms (Views: 10.7ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.6ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (55.9ms)
Completed 200 OK in 66ms (Views: 61.0ms | ActiveRecord: 2.1ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:37.879396"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:37.879396"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:37.882544"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:37.882544"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:37.886323"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:37.886323"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:37.902887"], ["password_digest", "$2a$04$AK7EV78AHITL7WvJmWEWyOmGB.bnfF59bSUDivC9cSex/INvM0oZi"], ["updated_at", "2015-02-03 13:04:37.902887"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:37.908236"], ["password_digest", "$2a$04$fS3ZrWDcg2HEx9nVL8Uum.7vQjhFBsjlt5H1rU1WeBsrJVTIrjgGe"], ["updated_at", "2015-02-03 13:04:37.908236"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 15ms (Views: 14.5ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 12ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:37 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (38.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 54ms (Views: 45.7ms | ActiveRecord: 6.6ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (17.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 35ms (Views: 32.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:04:38.085824"], ["score", 15], ["updated_at", "2015-02-03 13:04:38.085824"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 13:04:38.092041"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 11ms (ActiveRecord: 0.9ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (21.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 30ms (Views: 27.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:38.158609"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:38.158609"], ["year", 1900]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:38.161483"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:38.161483"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:38.166936"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:38.166936"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:38.179962"], ["password_digest", "$2a$04$45/MoMde2tefzed/3D4bQ.m/5cparCqjo3dqBlF0ZMr1Nc4GhezP2"], ["updated_at", "2015-02-03 13:04:38.179962"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:38.185597"], ["password_digest", "$2a$04$RSbLAeR6pwDwCOfXEtCJaeJt.xNAGjCwx.bXpUi.ZBJV35qiIWSoi"], ["updated_at", "2015-02-03 13:04:38.185597"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 12ms (Views: 8.7ms | ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 13:04:38.263374"], ["score", 12], ["updated_at", "2015-02-03 13:04:38.263374"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 13:04:38.265686"], ["score", 15], ["updated_at", "2015-02-03 13:04:38.265686"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (10.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 27ms (Views: 24.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:38.314423"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:38.314423"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:38.318907"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:38.318907"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:38.321789"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:38.321789"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:38.336782"], ["password_digest", "$2a$04$9sOTniS4fj6yCceyCVBKI.qbKXiQYQyL8Ipr6mm35Rdg0cF2caMY6"], ["updated_at", "2015-02-03 13:04:38.336782"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:38.348093"], ["password_digest", "$2a$04$CgIkRXNsXbOakTxQ72u3Lu/sxKkKgAjhpL/KTLc2QYsYk5fs3RfOO"], ["updated_at", "2015-02-03 13:04:38.348093"], ["username", "Riku"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 8.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:04:38.392500"], ["score", 12], ["updated_at", "2015-02-03 13:04:38.392500"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 13:04:38.395073"], ["score", 15], ["updated_at", "2015-02-03 13:04:38.395073"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:04:38.397478"], ["score", 13], ["updated_at", "2015-02-03 13:04:38.397478"], ["user_id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (10.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 15ms (Views: 13.2ms | ActiveRecord: 0.6ms)
  [1m[36m (2.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:38.428222"], ["name", "Koff"], ["updated_at", "2015-02-03 13:04:38.428222"], ["year", 1900]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:38.430679"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:38.430679"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:38.433283"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:38.433283"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:38.439220"], ["password_digest", "$2a$04$KusMEFeVPStMiIUkFwMK1O0N/1MoPNamCke9XBAwl6D.dlc3g6OMS"], ["updated_at", "2015-02-03 13:04:38.439220"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:38.449237"], ["password_digest", "$2a$04$6LZhRIge0Px.cDbRojLIFetiJrAu6jsxclqX.SFyeNUkQzRZRXhXC"], ["updated_at", "2015-02-03 13:04:38.449237"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 13:04:38.484381"], ["score", 12], ["updated_at", "2015-02-03 13:04:38.484381"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 13ms (Views: 11.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35m (2.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:38.537956"], ["password_digest", "$2a$04$1Afoh6ucMs24IUIliSwfdebDTw3fcqkjPAbJpyBZEk5QVxxnl03FG"], ["updated_at", "2015-02-03 13:04:38.537956"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 13ms (Views: 11.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:38.602607"], ["password_digest", "$2a$04$AxeSMGiiUcww.88pLd2d2u20ktG4tQQhelrBrNht7kdWva4/BTTDG"], ["updated_at", "2015-02-03 13:04:38.602607"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:38.649718"], ["password_digest", "$2a$04$9.mGKIPyFM1JhYVY6U182O12g5n6Vfw9GSZ9A6DIfbpIy3lJSGmvK"], ["updated_at", "2015-02-03 13:04:38.649718"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (7.4ms)
  Rendered users/new.html.erb within layouts/application (14.4ms)
Completed 200 OK in 23ms (Views: 22.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:38.711897"], ["password_digest", "$2a$04$7Q1U4njPuhDnCHOiG/7vRO7ZAKzvlqAaVEBlH2the/nkbVOLcHRdu"], ["updated_at", "2015-02-03 13:04:38.711897"], ["username", "Brian"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 12ms (ActiveRecord: 0.9ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 15:04:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:38.814734"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 13:04:38.814734"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:38.905749"], ["password_digest", "$2a$04$l.Q5wfYa8rFY2N5ioEecm.PI/tXPe2Qb4xSJSvzILHTMEbkK8zsjW"], ["updated_at", "2015-02-03 13:04:38.905749"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:38.922006"], ["password_digest", "$2a$04$30XPfVZEx.56qtHMiLB5dusnYoFf9rXTK2Onb0GnCPj6HElPky8r."], ["updated_at", "2015-02-03 13:04:38.922006"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 13:04:38.925833"], ["score", 10], ["updated_at", "2015-02-03 13:04:38.925833"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 13:04:38.928541"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-03 13:04:38.931517"], ["score", 20], ["updated_at", "2015-02-03 13:04:38.931517"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-03 13:04:38.933358"], ["user_id", 1]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.5ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:38.983411"], ["password_digest", "$2a$04$Lt7P.PUgFj2bL0syVY91DOA82cM4UAdUVQKTxIdQ/V5SGe7TGfkJq"], ["updated_at", "2015-02-03 13:04:38.983411"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:38.995122"], ["password_digest", "$2a$04$hCXpx8/b08mEg5NK4CwfT.ggn4jxeZQ9HovJf5RG82HoKm8vNbrmm"], ["updated_at", "2015-02-03 13:04:38.995122"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:39.005353"], ["password_digest", "$2a$04$xEhYn06TkbBvkAckgXKvnuda0JDS/L8Qwd9dwiS6p8L7bzc/2Shdi"], ["updated_at", "2015-02-03 13:04:39.005353"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.015044"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:39.015044"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:39.032602"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:39.032602"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 13:04:39.040799"], ["score", 10], ["updated_at", "2015-02-03 13:04:39.040799"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.3ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:39.051683"], ["password_digest", "$2a$04$PCYsSL.ce5WNc4FNCotyYe8gePrUv8.Jj2LFS4FRJ3e5Td/vJvFCm"], ["updated_at", "2015-02-03 13:04:39.051683"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.054304"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:39.054304"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:04:39.064204"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:39.064204"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 13:04:39.068468"], ["score", 10], ["updated_at", "2015-02-03 13:04:39.068468"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:39.071779"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:39.071779"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-03 13:04:39.073492"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:39.073492"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 13:04:39.077886"], ["score", 20], ["updated_at", "2015-02-03 13:04:39.077886"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.080182"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:39.080182"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-03 13:04:39.082177"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:39.082177"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-03 13:04:39.084837"], ["score", 15], ["updated_at", "2015-02-03 13:04:39.084837"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:39.087660"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:39.087660"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-03 13:04:39.089693"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:39.089693"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-03 13:04:39.091976"], ["score", 7], ["updated_at", "2015-02-03 13:04:39.091976"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.095015"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:39.095015"], ["year", 1900]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-03 13:04:39.096873"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:39.096873"]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-03 13:04:39.107677"], ["score", 9], ["updated_at", "2015-02-03 13:04:39.107677"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:04:39.110913"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:04:39.110913"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-03 13:04:39.113333"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:04:39.113333"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-03 13:04:39.116883"], ["score", 25], ["updated_at", "2015-02-03 13:04:39.116883"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.6ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.130434"], ["password_digest", "$2a$04$MHFwafhv8/f3BxAxni1jXuBVeWrcyBoaW/W/vkMJupfftfm713Bx6"], ["updated_at", "2015-02-03 13:04:39.130434"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.151643"], ["password_digest", "$2a$04$fpiR2hjQb8mllRfqCbvUMOy.Kld9hiNOV1ND2iyeSVQIAG3/W2sEO"], ["updated_at", "2015-02-03 13:04:39.151643"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.161884"], ["password_digest", "$2a$04$CLMpzSIpY9LAC3TDTZP6gOU7YpHkonSAsgj7ilJYDX7YZLpZa4aNe"], ["updated_at", "2015-02-03 13:04:39.161884"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.169305"], ["password_digest", "$2a$04$ZtaELjbEMXfBq4RxjPqNguLMzz3tLYs8KDxHbRso/dN.823uIwtVi"], ["updated_at", "2015-02-03 13:04:39.169305"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.178634"], ["password_digest", "$2a$04$nSoqHa9hkwX1p8jqNLxY/OPk.bga1OOAVKzFLXp4oEizF1GI8xia6"], ["updated_at", "2015-02-03 13:04:39.178634"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (6.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.205159"], ["password_digest", "$2a$04$RptPrELTyakUACl27DHZCOSfsHYgLkQ8ty0ROjNUp3xHt7u7XOW0y"], ["updated_at", "2015-02-03 13:04:39.205159"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.220881"], ["password_digest", "$2a$04$bXAcNikN0KdpQ8kj.B.z3eAIc78/2rRnlaYAhr4VjN4NWg3xJsNFe"], ["updated_at", "2015-02-03 13:04:39.220881"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:04:39.230913"], ["password_digest", "$2a$04$mHgCsE2yCZxzj84HrYV7kOL45xc21bbqyGGH.eJqeO0lXO3omA7y2"], ["updated_at", "2015-02-03 13:04:39.230913"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 15:10:06 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (46.6ms)
  Rendered beers/new.html.erb within layouts/application (61.0ms)
Completed 200 OK in 167ms (Views: 143.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 15:10:06 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:06.478268"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 13:10:06.478268"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 15:10:06 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (68.1ms)
Completed 500 Internal Server Error in 79ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___3988702396379763198_70357604228440'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___3988702396379763198_70357604228440'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.0.0) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 15:10:06 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (4.8ms)
  Rendered beers/new.html.erb within layouts/application (5.3ms)
Completed 200 OK in 11ms (Views: 8.5ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 15:10:06 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (7.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (13.1ms)
  Rendered beers/new.html.erb within layouts/application (13.5ms)
Completed 200 OK in 46ms (Views: 8.7ms | ActiveRecord: 7.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 15:10:06 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 18ms (Views: 16.9ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:06.828746"], ["name", "Koff"], ["updated_at", "2015-02-03 13:10:06.828746"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:06.831935"], ["name", "Karjala"], ["updated_at", "2015-02-03 13:10:06.831935"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:06.834204"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 13:10:06.834204"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 15:10:06 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (12.1ms)
Completed 200 OK in 14ms (Views: 13.1ms | ActiveRecord: 0.8ms)
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:06.901304"], ["name", "Koff"], ["updated_at", "2015-02-03 13:10:06.901304"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:06.903877"], ["name", "Karjala"], ["updated_at", "2015-02-03 13:10:06.903877"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:06.906982"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 13:10:06.906982"], ["year", 1899]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 15:10:06 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.3ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 15:10:06 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.4ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (68.5ms)
Completed 200 OK in 79ms (Views: 75.3ms | ActiveRecord: 1.5ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:07.011715"], ["name", "Koff"], ["updated_at", "2015-02-03 13:10:07.011715"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:10:07.015453"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:07.015453"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:10:07.017935"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:07.017935"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:07.032423"], ["password_digest", "$2a$04$CZ0W9cp69JNxYpkLuThRUOnLa7r.EAcCi0lsUM2GokxUXeIq6yoYy"], ["updated_at", "2015-02-03 13:10:07.032423"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:07.038397"], ["password_digest", "$2a$04$jycACONsPdUGtTBaM20ZyOSHNm/7lX/JdnesprbtwwhhAbcxxoOtK"], ["updated_at", "2015-02-03 13:10:07.038397"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 24ms (Views: 23.6ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 13ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (97.0ms)
  [1m[35mCACHE (1.8ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 115ms (Views: 109.4ms | ActiveRecord: 4.2ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (16.3ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 33ms (Views: 31.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:10:07.309845"], ["score", 15], ["updated_at", "2015-02-03 13:10:07.309845"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 13:10:07.317170"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 12ms (ActiveRecord: 0.9ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 18ms (Views: 15.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:07.356098"], ["name", "Koff"], ["updated_at", "2015-02-03 13:10:07.356098"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:10:07.358748"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:07.358748"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:10:07.361764"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:07.361764"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:07.369270"], ["password_digest", "$2a$04$ajkrGt.dvVvLRtElRMoFje35jtYYdEAPw2DzbfnjGWBJCwwxNbQaS"], ["updated_at", "2015-02-03 13:10:07.369270"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (4.8ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:07.381516"], ["password_digest", "$2a$04$sOL7SK6/zqqdEu8qrvew4uosHrEpNyMNzovjGsTGCUTHjKObuPrce"], ["updated_at", "2015-02-03 13:10:07.381516"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (12.7ms)
Completed 200 OK in 26ms (Views: 25.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 64ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 16ms (Views: 10.8ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 13:10:07.511165"], ["score", 12], ["updated_at", "2015-02-03 13:10:07.511165"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 13:10:07.514898"], ["score", 15], ["updated_at", "2015-02-03 13:10:07.514898"], ["user_id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (13.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 27ms (Views: 25.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:07.556995"], ["name", "Koff"], ["updated_at", "2015-02-03 13:10:07.556995"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:10:07.559750"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:07.559750"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:10:07.562263"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:07.562263"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:07.582371"], ["password_digest", "$2a$04$V8qTdC82JFtUoqXPmd/Ise.vHNVbrCdvG287.2ZkxGgv4.8fJEeIq"], ["updated_at", "2015-02-03 13:10:07.582371"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:07.588231"], ["password_digest", "$2a$04$ruXOWkTX.F.bVNetstilw.oJHZAseXE0Uj9pCDXZSgxFFGBg.0WaC"], ["updated_at", "2015-02-03 13:10:07.588231"], ["username", "Riku"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 17ms (Views: 15.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:10:07.663544"], ["score", 12], ["updated_at", "2015-02-03 13:10:07.663544"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 13:10:07.667078"], ["score", 15], ["updated_at", "2015-02-03 13:10:07.667078"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:10:07.669588"], ["score", 13], ["updated_at", "2015-02-03 13:10:07.669588"], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 17ms (Views: 14.9ms | ActiveRecord: 1.0ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:07.705460"], ["name", "Koff"], ["updated_at", "2015-02-03 13:10:07.705460"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 13:10:07.708254"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:07.708254"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:10:07.710815"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:07.710815"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:07.716851"], ["password_digest", "$2a$04$zDYtD82BbS7HKNP3RsPoxuQ6V.UxTVkA3sFahwOaCDezf7DYQu.9y"], ["updated_at", "2015-02-03 13:10:07.716851"], ["username", "Pekka"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:07.722470"], ["password_digest", "$2a$04$CUQgl6OAgsd.pbtHz9Ju9ukYN7GMKFVY1rONQORhs9PchsLVny1rW"], ["updated_at", "2015-02-03 13:10:07.722470"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.2ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (13.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 18ms (Views: 16.5ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 13:10:07.789894"], ["score", 12], ["updated_at", "2015-02-03 13:10:07.789894"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (10.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 17ms (Views: 15.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 1.3ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 17ms (Views: 15.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:07.863123"], ["password_digest", "$2a$04$4xGLNtkp5ypc0Zx4exTPo.hKyo2TWjCv9zcmiQHTTy35ZyqcedOd6"], ["updated_at", "2015-02-03 13:10:07.863123"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
Completed 200 OK in 12ms (Views: 5.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 14ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 39ms (Views: 25.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:07.973870"], ["password_digest", "$2a$04$cIfBg2rx/jtLH2CTxrwTn.zXHKZlKdtWeipFnBJNIzNi.PnfcTpDW"], ["updated_at", "2015-02-03 13:10:07.973870"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.9ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 15:10:07 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 8ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 15:10:08 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (2.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:08.075481"], ["password_digest", "$2a$04$ulBNZqfdWpz78HPljQRPqeRrJwgN.8r4r/TiQD7Ix9MQ9v3.XjxgG"], ["updated_at", "2015-02-03 13:10:08.075481"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 15:10:08 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (21.4ms)
  Rendered users/new.html.erb within layouts/application (31.9ms)
Completed 200 OK in 57ms (Views: 56.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 15:10:08 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.179754"], ["password_digest", "$2a$04$5Vw4ZjCXzAOHf75qdSVuhe6mJlo7cMHCqE4kZ/jkPnnQ/i4jbLpIS"], ["updated_at", "2015-02-03 13:10:08.179754"], ["username", "Brian"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 13ms (ActiveRecord: 0.9ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 15:10:08 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (5.5ms)
Completed 200 OK in 9ms (Views: 7.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.223271"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 13:10:08.223271"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.288449"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 13:10:08.288449"], ["year", 1674]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:08.371903"], ["password_digest", "$2a$04$OUf1BqZ1afd8.6pTYi8Z.u2EvYEjSmgEx3omB1ijLV3GAMC0qifQO"], ["updated_at", "2015-02-03 13:10:08.371903"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:08.385607"], ["password_digest", "$2a$04$uRM13kgFqkTlnz9/rzBbw.iJ1St47N9B.kkiXMMGW/.X7TlNSY84."], ["updated_at", "2015-02-03 13:10:08.385607"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.388837"], ["score", 10], ["updated_at", "2015-02-03 13:10:08.388837"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 13:10:08.391482"], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.393546"], ["score", 20], ["updated_at", "2015-02-03 13:10:08.393546"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 13:10:08.395100"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (1.7ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.410765"], ["password_digest", "$2a$04$Apvf9xnlx6Igjm/PYesc2umFe9N87EIO5mD9mbmr0M4G7VmlIf7ty"], ["updated_at", "2015-02-03 13:10:08.410765"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.436944"], ["password_digest", "$2a$04$x8oMUBNaG/GrtyFkjZ2SM./ugXxmMoyJ5YP2sdvYC2nYi3AZj7NdS"], ["updated_at", "2015-02-03 13:10:08.436944"], ["username", "Pekka"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:08.448003"], ["password_digest", "$2a$04$QjjKhFU8kV.RktlC2UtuV.pLBsD.W2dwFEoscsAShDJfDYiCeYOHO"], ["updated_at", "2015-02-03 13:10:08.448003"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.452647"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:10:08.452647"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:10:08.455602"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:08.455602"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:10:08.460026"], ["score", 10], ["updated_at", "2015-02-03 13:10:08.460026"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.6ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:08.477120"], ["password_digest", "$2a$04$Qwc4SlI9vVRhmghAyQwkvOIf.3HqSJzbTgYoOROHlX6zdrt3UmMEq"], ["updated_at", "2015-02-03 13:10:08.477120"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.482414"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:10:08.482414"], ["year", 1900]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.4ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 13:10:08.492427"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:08.492427"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 13:10:08.501090"], ["score", 10], ["updated_at", "2015-02-03 13:10:08.501090"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:08.503965"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:10:08.503965"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 13:10:08.506080"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:08.506080"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 13:10:08.508469"], ["score", 20], ["updated_at", "2015-02-03 13:10:08.508469"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.511180"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:10:08.511180"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 13:10:08.512757"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:08.512757"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 13:10:08.514970"], ["score", 15], ["updated_at", "2015-02-03 13:10:08.514970"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:08.517130"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:10:08.517130"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 13:10:08.518794"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:08.518794"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 13:10:08.521135"], ["score", 7], ["updated_at", "2015-02-03 13:10:08.521135"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.523451"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:10:08.523451"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 13:10:08.525277"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:08.525277"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 13:10:08.528148"], ["score", 9], ["updated_at", "2015-02-03 13:10:08.528148"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 13:10:08.530368"], ["name", "anonymous"], ["updated_at", "2015-02-03 13:10:08.530368"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 13:10:08.531926"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 13:10:08.531926"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 13:10:08.538191"], ["score", 25], ["updated_at", "2015-02-03 13:10:08.538191"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (5.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.573152"], ["password_digest", "$2a$04$mJ3rW/hBRnlo4S/so11CeuDWUObAnHBZ7T1PFcgH/SizBZQhl3H/u"], ["updated_at", "2015-02-03 13:10:08.573152"], ["username", "Pekka"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.585901"], ["password_digest", "$2a$04$MvlxxOsaUkG4fj03VsWF/e.Be2JrDtZmpIebWaegmbgUV/1yzU7QG"], ["updated_at", "2015-02-03 13:10:08.585901"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.593541"], ["password_digest", "$2a$04$MK20vd240NYo46pBIvI9GuEdSziya/anvGqkA2nMEMx6qEuTxmhf2"], ["updated_at", "2015-02-03 13:10:08.593541"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.612372"], ["password_digest", "$2a$04$Qn5pjOHhFeYxUkbH47eteOp6LJXLSuIWtE4fn27HVDJxC3DTiVMEu"], ["updated_at", "2015-02-03 13:10:08.612372"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.635023"], ["password_digest", "$2a$04$nRRIUKbnip1PAyRchfL.Ke2lzo7lMy6zXtjh96NjFXfEJytOKSsfu"], ["updated_at", "2015-02-03 13:10:08.635023"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.9ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.645613"], ["password_digest", "$2a$04$Gks2.uvWHEM81XMSFE4xM.VZ4XrNdtcWf3XUnBlWsLNlkLYQI5Y6."], ["updated_at", "2015-02-03 13:10:08.645613"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.653792"], ["password_digest", "$2a$04$i3fil3bGbcWN4N7OpKnjQ.Ji.61ledER5v7DqYQFfvVYxSl5usS4m"], ["updated_at", "2015-02-03 13:10:08.653792"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 13:10:08.667034"], ["password_digest", "$2a$04$fghIbV5LkWyFBpl/QokJeu2iJoHFB1UbKmmCfsjiGfgadFvZXUY4i"], ["updated_at", "2015-02-03 13:10:08.667034"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 16:09:32 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (38.8ms)
  Rendered beers/new.html.erb within layouts/application (50.6ms)
Completed 200 OK in 4109ms (Views: 4064.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 16:09:36 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:36.991786"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 14:09:36.991786"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 14ms (ActiveRecord: 2.1ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.2ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (33.6ms)
Completed 500 Internal Server Error in 57ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb___1802893043220809508_70129358181660'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb___1802893043220809508_70129358181660'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.2ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (7.1ms)
  Rendered beers/new.html.erb within layouts/application (7.6ms)
Completed 200 OK in 17ms (Views: 16.0ms | ActiveRecord: 0.2ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (19.1ms)
  Rendered beers/new.html.erb within layouts/application (19.9ms)
Completed 200 OK in 38ms (Views: 27.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (29.3ms)
Completed 200 OK in 66ms (Views: 63.5ms | ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:37.381978"], ["name", "Koff"], ["updated_at", "2015-02-03 14:09:37.381978"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:37.385121"], ["name", "Karjala"], ["updated_at", "2015-02-03 14:09:37.385121"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:37.388763"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 14:09:37.388763"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (8.6ms)
Completed 200 OK in 19ms (Views: 11.4ms | ActiveRecord: 0.3ms)
  [1m[35m (2.6ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:37.438220"], ["name", "Koff"], ["updated_at", "2015-02-03 14:09:37.438220"], ["year", 1897]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:37.445076"], ["name", "Karjala"], ["updated_at", "2015-02-03 14:09:37.445076"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:37.448878"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 14:09:37.448878"], ["year", 1899]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.9ms)
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.2ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.5ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (66.4ms)
Completed 200 OK in 80ms (Views: 75.1ms | ActiveRecord: 1.8ms)
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:37.557586"], ["name", "Koff"], ["updated_at", "2015-02-03 14:09:37.557586"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 14:09:37.577942"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:37.577942"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 14:09:37.581941"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:37.581941"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:37.604158"], ["password_digest", "$2a$04$LWY4.RC8F39I9tp5UuVcF.sMCcYgZ/Wv8HX2Q1BNzlJXRngNORhuG"], ["updated_at", "2015-02-03 14:09:37.604158"], ["username", "Pekka"]]
  [1m[36m (3.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:37.618122"], ["password_digest", "$2a$04$1m57SEbKPkubi2/u7OTeEur8BrfPrhxCRza.i0jAqyslt1k1a3.cu"], ["updated_at", "2015-02-03 14:09:37.618122"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 19ms (Views: 18.1ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 12ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (33.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 50ms (Views: 46.9ms | ActiveRecord: 1.7ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (14.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 31ms (Views: 29.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 14:09:37.797549"], ["score", 15], ["updated_at", "2015-02-03 14:09:37.797549"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 14:09:37.804886"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 14ms (ActiveRecord: 2.4ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 21ms (Views: 18.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:37.848782"], ["name", "Koff"], ["updated_at", "2015-02-03 14:09:37.848782"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 14:09:37.852095"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:37.852095"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 14:09:37.857048"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:37.857048"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:37.872210"], ["password_digest", "$2a$04$Zao./yAi4Oy/msfRCn/GT.OIeJCp6e21ybyR8xeEnw4pxng2fcgXu"], ["updated_at", "2015-02-03 14:09:37.872210"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:37.878815"], ["password_digest", "$2a$04$6PGxMKVbaMjkmi7IpeOPyejmvGI8.kR2vSIPvnIqMpgVP0gJmX3Re"], ["updated_at", "2015-02-03 14:09:37.878815"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (40.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 48ms (Views: 44.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 14:09:37.962950"], ["score", 12], ["updated_at", "2015-02-03 14:09:37.962950"], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 14:09:37.966065"], ["score", 15], ["updated_at", "2015-02-03 14:09:37.966065"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 16:09:37 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (6.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 17ms (Views: 15.7ms | ActiveRecord: 0.6ms)
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:38.008029"], ["name", "Koff"], ["updated_at", "2015-02-03 14:09:38.008029"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 14:09:38.023119"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:38.023119"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 14:09:38.032233"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:38.032233"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:38.066347"], ["password_digest", "$2a$04$SJIlVq0hIRVxpszx3jZF7.fAkvzGYk7jLvZ4DjNQ6R9aYFR8I1PdG"], ["updated_at", "2015-02-03 14:09:38.066347"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:38.072310"], ["password_digest", "$2a$04$OMTXdLWJLON75VCGm92fNOzEnLDGX8lF.iu5OSSFIdQX/U4HBGGcm"], ["updated_at", "2015-02-03 14:09:38.072310"], ["username", "Riku"]]
  [1m[35m (3.4ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 13ms (Views: 11.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 14:09:38.121028"], ["score", 12], ["updated_at", "2015-02-03 14:09:38.121028"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 14:09:38.124113"], ["score", 15], ["updated_at", "2015-02-03 14:09:38.124113"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 14:09:38.127859"], ["score", 13], ["updated_at", "2015-02-03 14:09:38.127859"], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 22ms (Views: 18.8ms | ActiveRecord: 1.0ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:38.223626"], ["name", "Koff"], ["updated_at", "2015-02-03 14:09:38.223626"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 14:09:38.228650"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:38.228650"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 14:09:38.232446"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:38.232446"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:38.241766"], ["password_digest", "$2a$04$jjZJLwok2a3HANQNE.nkUeXwj1OIUsdprlmniM5ox56l7qvuBxsoi"], ["updated_at", "2015-02-03 14:09:38.241766"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:38.248006"], ["password_digest", "$2a$04$LsBQgI1DUNh5FtmTTP3tceD8FTPr1rRDM7.J9291HmFKBe0Hhd3vi"], ["updated_at", "2015-02-03 14:09:38.248006"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 6ms (Views: 3.6ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 13ms (ActiveRecord: 0.5ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.3ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (10.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 25ms (Views: 20.8ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 14:09:38.335913"], ["score", 12], ["updated_at", "2015-02-03 14:09:38.335913"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (21.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 35ms (Views: 32.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 12ms (Views: 8.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:38.437221"], ["password_digest", "$2a$04$H.actrkke2wbBv9DyHqV4eYOSIYdak8TxM70fWU8fXZzwSSraSx7G"], ["updated_at", "2015-02-03 14:09:38.437221"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (1.3ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (21.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 33ms (Views: 27.7ms | ActiveRecord: 2.0ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:38.516892"], ["password_digest", "$2a$04$xy13cT5PIgZEzbsvAnxqPOmJYLageg6zC3GlFgGmqASSYa1zPUWSG"], ["updated_at", "2015-02-03 14:09:38.516892"], ["username", "Pekka"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 11ms (ActiveRecord: 0.3ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:38.593245"], ["password_digest", "$2a$04$nPG8eASJLz6gx8OrPF5Q0.m01QIg1SIAYcfMXNGcw4z/CBpv3.WPC"], ["updated_at", "2015-02-03 14:09:38.593245"], ["username", "Pekka"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (21.8ms)
  Rendered users/new.html.erb within layouts/application (32.1ms)
Completed 200 OK in 48ms (Views: 45.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:38.684773"], ["password_digest", "$2a$04$7YkHm0aulLxPjWXy1L37COGSZXk.4m1bkRxiQvmCkljjannzP8C1m"], ["updated_at", "2015-02-03 14:09:38.684773"], ["username", "Brian"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 20ms (ActiveRecord: 1.7ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 16:09:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (9.5ms)
Completed 200 OK in 16ms (Views: 12.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:38.850673"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 14:09:38.850673"]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (5.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:38.865500"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 14:09:38.865500"], ["year", 1674]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (19.9ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:39.097251"], ["password_digest", "$2a$04$RNDuFcS0NJHwyoebesgdtOg7pVBlBE2z6C/11ed.vSBOeRP/OGIUG"], ["updated_at", "2015-02-03 14:09:39.097251"], ["username", "Pekka"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:39.132919"], ["password_digest", "$2a$04$O1PGYBWkzPVH1cY6kbof4.1qKysJBq9RkNi/rCJlMRFOkLI5P0D1S"], ["updated_at", "2015-02-03 14:09:39.132919"], ["username", "Pekka"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.136532"], ["score", 10], ["updated_at", "2015-02-03 14:09:39.136532"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 14:09:39.139879"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.153695"], ["score", 20], ["updated_at", "2015-02-03 14:09:39.153695"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 14:09:39.156681"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.175675"], ["password_digest", "$2a$04$4xdjZqN/BTwqsYc26Zvyf.tbrh6JVALvRVXKD1jHI7Rcg1/DLteaC"], ["updated_at", "2015-02-03 14:09:39.175675"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.237154"], ["password_digest", "$2a$04$RABZjY6vAgkaTO4.z/QrhOhYv1aeT9yNkRcBX.llIqoWqCtujUlz."], ["updated_at", "2015-02-03 14:09:39.237154"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (4.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:39.252183"], ["password_digest", "$2a$04$0BSYqnLmW0KHjKXWSoQjiuiVfa5XiD65dc00wMNev2VBrt7QthyP."], ["updated_at", "2015-02-03 14:09:39.252183"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.256889"], ["name", "anonymous"], ["updated_at", "2015-02-03 14:09:39.256889"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 14:09:39.259907"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:39.259907"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 14:09:39.312805"], ["score", 10], ["updated_at", "2015-02-03 14:09:39.312805"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:39.337526"], ["password_digest", "$2a$04$wVn02gQvjDUWntPnGc4bqOrfXTcO2d9fmrVGMDJmaInUBPnMJNHfq"], ["updated_at", "2015-02-03 14:09:39.337526"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.340998"], ["name", "anonymous"], ["updated_at", "2015-02-03 14:09:39.340998"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 14:09:39.350075"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:39.350075"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 14:09:39.353200"], ["score", 10], ["updated_at", "2015-02-03 14:09:39.353200"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:39.356555"], ["name", "anonymous"], ["updated_at", "2015-02-03 14:09:39.356555"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 14:09:39.358817"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:39.358817"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 14:09:39.364047"], ["score", 20], ["updated_at", "2015-02-03 14:09:39.364047"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.395968"], ["name", "anonymous"], ["updated_at", "2015-02-03 14:09:39.395968"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 14:09:39.398441"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:39.398441"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 14:09:39.401401"], ["score", 15], ["updated_at", "2015-02-03 14:09:39.401401"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:39.404152"], ["name", "anonymous"], ["updated_at", "2015-02-03 14:09:39.404152"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 14:09:39.413301"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:39.413301"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 14:09:39.429378"], ["score", 7], ["updated_at", "2015-02-03 14:09:39.429378"], ["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.432748"], ["name", "anonymous"], ["updated_at", "2015-02-03 14:09:39.432748"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 14:09:39.435149"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:39.435149"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 14:09:39.438652"], ["score", 9], ["updated_at", "2015-02-03 14:09:39.438652"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 14:09:39.447213"], ["name", "anonymous"], ["updated_at", "2015-02-03 14:09:39.447213"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 14:09:39.449687"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 14:09:39.449687"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 14:09:39.452455"], ["score", 25], ["updated_at", "2015-02-03 14:09:39.452455"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.467679"], ["password_digest", "$2a$04$Dxn48xMLzPNVdIKXOgBz3.4/Eax6JFgIZV18UGNomvYy1GoCzL7zi"], ["updated_at", "2015-02-03 14:09:39.467679"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.484533"], ["password_digest", "$2a$04$DwXEVi1Qeu83V.82lpUIs.TS/lpcOeOfTq/qHE/uos4rX5T5M6FHe"], ["updated_at", "2015-02-03 14:09:39.484533"], ["username", "Pekka"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (5.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.515791"], ["password_digest", "$2a$04$XtBqwvy1AYJsOvhigecC/.Hw2RgCBnxH5oXoj9XebcLA6fVVQsgTC"], ["updated_at", "2015-02-03 14:09:39.515791"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.538034"], ["password_digest", "$2a$04$pfTcHlJbQO0YlFXi4kLXHeBX.zm14NQrMQmItXRF6AN5Lh2GEqssS"], ["updated_at", "2015-02-03 14:09:39.538034"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.577041"], ["password_digest", "$2a$04$mAkyOD9a0UN47txdqhljFuW2PTWUhCU8ObFASZcPyVHquoyUh2bFO"], ["updated_at", "2015-02-03 14:09:39.577041"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.600883"], ["password_digest", "$2a$04$T3.S4Qn1P53DTa8ktQjAQeyYLtkIabt0SolewUAhk5RcMOfGPNmeS"], ["updated_at", "2015-02-03 14:09:39.600883"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.613295"], ["password_digest", "$2a$04$Tzj3ffxv8yOFZlcKZoaTm.21Yqbq4uM518AJXt21NI7n86ULxx6Wq"], ["updated_at", "2015-02-03 14:09:39.613295"], ["username", "Pekka"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 14:09:39.622743"], ["password_digest", "$2a$04$jAQeP7wN.GdgkdesUGoc.uXCyAg3Cpo5lBK5.6O4qfwdPlEx9FkBa"], ["updated_at", "2015-02-03 14:09:39.622743"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 18:25:38 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.6ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (43.5ms)
  Rendered beers/new.html.erb within layouts/application (56.6ms)
Completed 200 OK in 454ms (Views: 430.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-03 18:25:38 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"Olut", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:38.790284"], ["name", "Olut"], ["style", "Weizen"], ["updated_at", "2015-02-03 16:25:38.790284"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 14ms (ActiveRecord: 2.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-03 18:25:38 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (17.5ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (127.0ms)
Completed 500 Internal Server Error in 137ms

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/beers/index.html.erb:18:in `block in _app_views_beers_index_html_erb__440143348776560387_70210085818840'
  activerecord (4.1.5) lib/active_record/relation/delegation.rb:46:in `each'
  app/views/beers/index.html.erb:14:in `_app_views_beers_index_html_erb__440143348776560387_70210085818840'
  actionview (4.1.5) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.1.5) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:339:in `instrument'
  actionview (4.1.5) lib/action_view/template.rb:143:in `render'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.5) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.5) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.5) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.5) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.5) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.1.5) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.5) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.5) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.5) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.5) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.5) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.1.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.1.5) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.5) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.5) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.5) lib/action_controller/metal.rb:232:in `block in action'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:50:in `call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.5) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.5) lib/action_dispatch/routing/route_set.rb:678:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.1.5) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.1.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.5) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'
  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.5) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.5) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.5) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.5) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
  actionpack (4.1.5) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.5) lib/rails/engine.rb:514:in `call'
  railties (4.1.5) lib/rails/application.rb:144:in `call'
  rack (1.5.2) lib/rack/builder.rb:138:in `call'
  rack (1.5.2) lib/rack/urlmap.rb:65:in `block in call'
  rack (1.5.2) lib/rack/urlmap.rb:50:in `call'
  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'
  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'
  rack-test (0.6.3) lib/rack/test.rb:58:in `get'
  /Users/riku/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/forwardable.rb:183:in `get'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:60:in `process'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:38:in `block in process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:37:in `process_and_follow_redirects'
  capybara (2.4.4) lib/capybara/rack_test/browser.rb:26:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/form.rb:75:in `submit'
  capybara (2.4.4) lib/capybara/rack_test/node.rb:60:in `click'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `block in click'
  capybara (2.4.4) lib/capybara/node/base.rb:84:in `synchronize'
  capybara (2.4.4) lib/capybara/node/element.rb:133:in `click'
  capybara (2.4.4) lib/capybara/node/actions.rb:37:in `click_button'
  capybara (2.4.4) lib/capybara/session.rb:676:in `block (2 levels) in <class:Session>'
  capybara (2.4.4) lib/capybara/dsl.rb:51:in `block (2 levels) in <module:DSL>'
  spec/features/beers_spec.rb:15:in `block (3 levels) in <top (required)>'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:310:in `perform_change'
  rspec-expectations (3.1.2) lib/rspec/matchers/built_in/change.rb:165:in `matches?'
  rspec-expectations (3.1.2) lib/rspec/expectations/handler.rb:48:in `handle_matcher'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:54:in `to'
  rspec-expectations (3.1.2) lib/rspec/expectations/expectation_target.rb:87:in `to'
  spec/features/beers_spec.rb:14:in `block (2 levels) in <top (required)>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:152:in `block in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-rails (3.1.0) lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>'
  rspec-core (3.1.7) lib/rspec/core/example.rb:322:in `instance_exec'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:380:in `execute_with'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:446:in `block (2 levels) in run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:222:in `call'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:447:in `run'
  rspec-core (3.1.7) lib/rspec/core/hooks.rb:500:in `run'
  rspec-core (3.1.7) lib/rspec/core/example.rb:331:in `with_around_example_hooks'
  rspec-core (3.1.7) lib/rspec/core/example.rb:149:in `run'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:490:in `block in run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:486:in `run_examples'
  rspec-core (3.1.7) lib/rspec/core/example_group.rb:453:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block (2 levels) in run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:111:in `block in run_specs'
  rspec-core (3.1.7) lib/rspec/core/reporter.rb:53:in `report'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:107:in `run_specs'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:85:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:69:in `run'
  rspec-core (3.1.7) lib/rspec/core/runner.rb:37:in `invoke'
  rspec-core (3.1.7) exe/rspec:4:in `<top (required)>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `<main>'
   () Users/riku/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `<main>'

  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.3ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (12.5ms)
  Rendered beers/new.html.erb within layouts/application (12.9ms)
Completed 200 OK in 16ms (Views: 15.2ms | ActiveRecord: 0.3ms)
Started POST "/beers" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (5.8ms)
  Rendered beers/new.html.erb within layouts/application (6.3ms)
Completed 200 OK in 17ms (Views: 8.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.3ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.4ms)
Completed 200 OK in 34ms (Views: 32.5ms | ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:39.173634"], ["name", "Koff"], ["updated_at", "2015-02-03 16:25:39.173634"], ["year", 1897]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:39.176480"], ["name", "Karjala"], ["updated_at", "2015-02-03 16:25:39.176480"], ["year", 1898]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:39.179093"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 16:25:39.179093"], ["year", 1899]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.1ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (12.0ms)
Completed 200 OK in 15ms (Views: 14.0ms | ActiveRecord: 0.2ms)
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:39.215153"], ["name", "Koff"], ["updated_at", "2015-02-03 16:25:39.215153"], ["year", 1897]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:39.217728"], ["name", "Karjala"], ["updated_at", "2015-02-03 16:25:39.217728"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:39.220970"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 16:25:39.220970"], ["year", 1899]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (5.3ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.3ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.2ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.5ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (58.5ms)
Completed 200 OK in 70ms (Views: 65.5ms | ActiveRecord: 1.5ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:39.325101"], ["name", "Koff"], ["updated_at", "2015-02-03 16:25:39.325101"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 16:25:39.329253"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:39.329253"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 16:25:39.334832"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:39.334832"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:39.356029"], ["password_digest", "$2a$04$c/hTCR5zA7F8gJ/wtoLHnOoekVYrCIX8JhatG.3AK4w7Q4fDGj4eC"], ["updated_at", "2015-02-03 16:25:39.356029"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:39.369607"], ["password_digest", "$2a$04$5ToflAhxPYJ9N/6AajrlSuynjWp9DHdtCqo0DvsJaICCpgfd0VhLW"], ["updated_at", "2015-02-03 16:25:39.369607"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.5ms)
Completed 200 OK in 21ms (Views: 20.7ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.2ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (50.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 69ms (Views: 64.7ms | ActiveRecord: 3.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.2ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.1ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (26.4ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 53ms (Views: 50.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 16:25:39.637472"], ["score", 15], ["updated_at", "2015-02-03 16:25:39.637472"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-03 16:25:39.663596"], ["user_id", 1]]
  [1m[35m (2.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 52ms (ActiveRecord: 5.4ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.7ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.2ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (43.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 53ms (Views: 48.5ms | ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36mRating Load (0.7ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:39.767344"], ["name", "Koff"], ["updated_at", "2015-02-03 16:25:39.767344"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 16:25:39.773183"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:39.773183"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 16:25:39.778816"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:39.778816"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:39.785038"], ["password_digest", "$2a$04$emCBwt1Qtt8oUt./yNeO..7sp./LoR7ssmhPWroDgqh5lvm8tW6kG"], ["updated_at", "2015-02-03 16:25:39.785038"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:39.791802"], ["password_digest", "$2a$04$hGZKACjFDOcnnKL6XxhZfewAaQad9BXgTfGc4exntnGkyS96t6.zK"], ["updated_at", "2015-02-03 16:25:39.791802"], ["username", "Riku"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.2ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 15ms (Views: 13.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 16:25:39.852643"], ["score", 12], ["updated_at", "2015-02-03 16:25:39.852643"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-03 16:25:39.860174"], ["score", 15], ["updated_at", "2015-02-03 16:25:39.860174"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/ratings" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by RatingsController#index as HTML
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/index.html.erb within layouts/application (8.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 23ms (Views: 21.9ms | ActiveRecord: 0.6ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:39.906083"], ["name", "Koff"], ["updated_at", "2015-02-03 16:25:39.906083"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 16:25:39.908957"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:39.908957"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 16:25:39.911658"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:39.911658"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:39.926301"], ["password_digest", "$2a$04$CDcKxBRGOz.0LUdmLDyOKe3LHqq/48hWCTUqmLvnJghuWudc2IdwG"], ["updated_at", "2015-02-03 16:25:39.926301"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:39.931370"], ["password_digest", "$2a$04$0nUVwzEBm8Ld8pS1aeAPseCrrN3ip05ybs5alOHGIdfntV7cts8wm"], ["updated_at", "2015-02-03 16:25:39.931370"], ["username", "Riku"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.4ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 18:25:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 17.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 16:25:40.014895"], ["score", 12], ["updated_at", "2015-02-03 16:25:40.014895"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 16:25:40.018238"], ["score", 15], ["updated_at", "2015-02-03 16:25:40.018238"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 16:25:40.024141"], ["score", 13], ["updated_at", "2015-02-03 16:25:40.024141"], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerClub Exists (0.1ms)[0m  SELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (18.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 26ms (Views: 23.3ms | ActiveRecord: 0.8ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.7ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:40.067430"], ["name", "Koff"], ["updated_at", "2015-02-03 16:25:40.067430"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-03 16:25:40.079514"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:40.079514"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 16:25:40.083191"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:40.083191"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:40.089235"], ["password_digest", "$2a$04$gPuqR4H1BGuegz2/wFFhN.XNaRYp6dYww0V4suKSS8hsWme4AkilG"], ["updated_at", "2015-02-03 16:25:40.089235"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Riku' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:40.095477"], ["password_digest", "$2a$04$61eH77.rtaq7MF4gb8USFeB75pv5VypFh7J.gRNrg42DxyPzev1WS"], ["updated_at", "2015-02-03 16:25:40.095477"], ["username", "Riku"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (4.9ms)
Completed 200 OK in 10ms (Views: 7.8ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 13ms (Views: 10.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-03 16:25:40.163382"], ["score", 12], ["updated_at", "2015-02-03 16:25:40.163382"], ["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (9.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 16ms (Views: 13.5ms | ActiveRecord: 1.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.5ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 14ms (Views: 11.6ms | ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35m (2.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:40.228471"], ["password_digest", "$2a$04$MB6yNL.PWy/5BHq64wt0COWAI/b27MKNRqircci3T/L5NxL5KKime"], ["updated_at", "2015-02-03 16:25:40.228471"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (7.0ms)
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeerClub Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.7ms)
  [1m[35mCACHE (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 18ms (Views: 15.5ms | ActiveRecord: 0.9ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:40.299452"], ["password_digest", "$2a$04$Kzikb3uWEHmJ2KFxaDggfOjtMaF4RWB1JWeJ7RPeW7mMpii5t8ieW"], ["updated_at", "2015-02-03 16:25:40.299452"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:40.342701"], ["password_digest", "$2a$04$9.rROpfG4R2uRcYqKHfBg.u0TWukusKB0QM0Oszw4lszEj2OXsvzK"], ["updated_at", "2015-02-03 16:25:40.342701"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (7.6ms)
  Rendered users/new.html.erb within layouts/application (14.2ms)
Completed 200 OK in 23ms (Views: 22.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:40.405679"], ["password_digest", "$2a$04$E4VqHRTiTdgr9zHUlCkyye9WhGy39zsD/hLPozCHbuKE13QqhIi7m"], ["updated_at", "2015-02-03 16:25:40.405679"], ["username", "Brian"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 12ms (ActiveRecord: 1.1ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-03 18:25:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 2]]
  [1m[36mBeerClub Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "beer_clubs" INNER JOIN "memberships" ON "beer_clubs"."id" = "memberships"."beer_club_id" WHERE "memberships"."user_id" = ? LIMIT 1[0m  [["user_id", 2]]
  [1m[35mRating Load (0.1ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  Rendered users/show.html.erb within layouts/application (5.1ms)
Completed 200 OK in 9ms (Views: 7.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:40.581852"], ["name", "Testiolut"], ["style", "Weizen"], ["updated_at", "2015-02-03 16:25:40.581852"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:40.587422"], ["name", "Schlenkerla"], ["updated_at", "2015-02-03 16:25:40.587422"], ["year", 1674]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (9.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:40.702084"], ["password_digest", "$2a$04$UgM2SeTvcZ1.6PcXqrFRp.CIkE4NuHgXBXXkN8F4p5z4ZSwQj1ajG"], ["updated_at", "2015-02-03 16:25:40.702084"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (5.9ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (2.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:40.942900"], ["password_digest", "$2a$04$7/IYVGRND3zfrdiei5EfDucOtgFO8wNB3DiuIOofhniih9OdA/MKy"], ["updated_at", "2015-02-03 16:25:40.942900"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:40.946704"], ["score", 10], ["updated_at", "2015-02-03 16:25:40.946704"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-03 16:25:40.949467"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:40.951751"], ["score", 20], ["updated_at", "2015-02-03 16:25:40.951751"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-03 16:25:40.954114"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.1ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:40.967527"], ["password_digest", "$2a$04$k.htJmZunlI94W8AgZbv3.fyQ88HWBhiRiE9yyUTd2UpvvldvHQYK"], ["updated_at", "2015-02-03 16:25:40.967527"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (4.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:40.981950"], ["password_digest", "$2a$04$BZUef1jw.rPWx0asU./nyOJXKzkXMBEyPqhKsOicxdq5LoYK9G4ye"], ["updated_at", "2015-02-03 16:25:40.981950"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (6.8ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:41.002834"], ["password_digest", "$2a$04$fkJtARwAfQ3.5ec08tTzCOXY.BYJ2NjkSrUxdWKQG6OzZWNHYRFEu"], ["updated_at", "2015-02-03 16:25:41.002834"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.008874"], ["name", "anonymous"], ["updated_at", "2015-02-03 16:25:41.008874"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 16:25:41.015690"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:41.015690"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 16:25:41.024197"], ["score", 10], ["updated_at", "2015-02-03 16:25:41.024197"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.3ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.1ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:41.041090"], ["password_digest", "$2a$04$6qJSjQOWqjIZoMluXLmwm.mpq4gFGOlgukTqVtxdvZoxf424a.qzS"], ["updated_at", "2015-02-03 16:25:41.041090"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.046927"], ["name", "anonymous"], ["updated_at", "2015-02-03 16:25:41.046927"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-03 16:25:41.049627"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:41.049627"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-03 16:25:41.052889"], ["score", 10], ["updated_at", "2015-02-03 16:25:41.052889"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:41.056337"], ["name", "anonymous"], ["updated_at", "2015-02-03 16:25:41.056337"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-03 16:25:41.059805"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:41.059805"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-03 16:25:41.062641"], ["score", 20], ["updated_at", "2015-02-03 16:25:41.062641"], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.065180"], ["name", "anonymous"], ["updated_at", "2015-02-03 16:25:41.065180"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-03 16:25:41.067715"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:41.067715"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-03 16:25:41.070812"], ["score", 15], ["updated_at", "2015-02-03 16:25:41.070812"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:41.074161"], ["name", "anonymous"], ["updated_at", "2015-02-03 16:25:41.074161"], ["year", 1900]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-03 16:25:41.087671"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:41.087671"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-03 16:25:41.093659"], ["score", 7], ["updated_at", "2015-02-03 16:25:41.093659"], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.096470"], ["name", "anonymous"], ["updated_at", "2015-02-03 16:25:41.096470"], ["year", 1900]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-03 16:25:41.099150"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:41.099150"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-03 16:25:41.101674"], ["score", 9], ["updated_at", "2015-02-03 16:25:41.101674"], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-03 16:25:41.104349"], ["name", "anonymous"], ["updated_at", "2015-02-03 16:25:41.104349"], ["year", 1900]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-03 16:25:41.107915"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-03 16:25:41.107915"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-03 16:25:41.111101"], ["score", 25], ["updated_at", "2015-02-03 16:25:41.111101"], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.1ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.2ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.1ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.121808"], ["password_digest", "$2a$04$KBr1F0cC96rIm2ylc.bDj.NKIIP4iotnizzRexT6S/qRN4tvf0mvW"], ["updated_at", "2015-02-03 16:25:41.121808"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.131654"], ["password_digest", "$2a$04$NLy5itZPFWMWEMtQfPq1VulQHxtXrn7V6YtovVox8z4M8jyI/MI7q"], ["updated_at", "2015-02-03 16:25:41.131654"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.140020"], ["password_digest", "$2a$04$HkXhMB2X.MALlRw9Jk7at.SSAvRJ95RDJeinU40B4cn/v4/SCL2GK"], ["updated_at", "2015-02-03 16:25:41.140020"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.3ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.154669"], ["password_digest", "$2a$04$J1N6vW2jWQrChDqb8lT/6OIy4JzIf797QOzauj9zzrm6cdqRl6bNu"], ["updated_at", "2015-02-03 16:25:41.154669"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.176916"], ["password_digest", "$2a$04$tOJcaibzt1bE7z7uSliSEeoSTQmmKuRr9bCyXrSOfBwtVsgARkfzm"], ["updated_at", "2015-02-03 16:25:41.176916"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.185287"], ["password_digest", "$2a$04$SOLTqdMo.pK1mg.lKPHsO.bFA99803Di9R03tdGdhSsNU7jnOdJ7."], ["updated_at", "2015-02-03 16:25:41.185287"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (4.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.209256"], ["password_digest", "$2a$04$KLAPLKhb2nh/pvydnpbX0.k2tzdVJMKw8DxlhcNc.z.VBemaio6i6"], ["updated_at", "2015-02-03 16:25:41.209256"], ["username", "Pekka"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-03 16:25:41.218091"], ["password_digest", "$2a$04$6vrrAP.bjAUhm7mI8Sr5nO8Y1QfF9qo3LVdGTSlWnwyz7AEgmAIaq"], ["updated_at", "2015-02-03 16:25:41.218091"], ["username", "Pekka"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
